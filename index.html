<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#111111" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="description" content="NephroCalc Pro â€” Clinical Nephrology Decision Support" />
  <title>NephroCalc Pro</title>
  <style>
    body { margin: 0; font-family: sans-serif; }
    #loading { display:flex; align-items:center; justify-content:center; 
               min-height:100vh; background:#f7f8fa; flex-direction:column; gap:12px; }
    .spinner { width:32px; height:32px; border:3px solid #e0e3ea; 
               border-top-color:#111; border-radius:50%; animation:spin 0.8s linear infinite; }
    @keyframes spin { to { transform:rotate(360deg); } }
    .err { padding:40px; font-family:monospace; max-width:600px; }
    .err h3 { color:#dc2626; }
  </style>
</head>
<body>
  <div id="root">
    <div id="loading">
      <div class="spinner"></div>
      <div style="font-size:13px;color:#888;">Loading NephroCalc Pro...</div>
      <div style="font-size:10px;color:#ccc;">71 calculators &middot; 18 sections</div>
    </div>
  </div>
  <script>
    window.onerror = function(msg, url, line) {
      var r = document.getElementById("root");
      if(r) r.innerHTML = '<div class="err"><h3>Load Error</h3><p>'+msg+'</p><p style="color:#888">Try refreshing.</p></div>';
    };
    function loadScript(src, cb) {
      var s = document.createElement("script");
      s.src = src; s.onload = cb;
      s.onerror = function() {
        document.getElementById("root").innerHTML = 
          '<div class="err"><h3>Network Error</h3><p>Could not load: '+src+'</p><p style="color:#888">Check internet connection and refresh.</p></div>';
      };
      document.head.appendChild(s);
    }
    loadScript("https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js", function() {
      loadScript("https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js", function() {
        loadScript("https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.24.4/babel.min.js", function() {
          try {
            var jsxCode = atob(document.getElementById("app-source").textContent.trim());
            var compiled = Babel.transform(jsxCode, { presets: ["react"] }).code;
            new Function(compiled)();
          } catch(e) {
            document.getElementById("root").innerHTML = 
              '<div class="err"><h3>Compilation Error</h3><p>'+e.message+'</p><p style="color:#888">Please report this error.</p></div>';
          }
        });
      });
    });
  </script>
  <script id="app-source" type="text/plain">Y29uc3QgeyB1c2VTdGF0ZSB9ID0gUmVhY3Q7CgovLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAKLy8gwqkgMjAyNiBEci4gQXNoaXNoIFBhdGVsLiBBbGwgcmlnaHRzIHJlc2VydmVkLgovLyBQZWVyIFJldmlld2VyczogWyAgICAgICAgICAgICAgICAgICAgXSBbICAgICAgICAgICAgICAgICAgICBdIFsgICAgICAgICAgICAgICAgICAgIF0KLy8KLy8gUFJJTUFSWSBTT1VSQ0UgVkVSSUZJQ0FUSU9OIExPRwovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKLy8gIzEgIENLRC1FUEkgMjAyMSAgICAgSW5rZXIgTEEgZXQgYWwuIE5FSk0gMjAyMTszODU6MTczNy0xNzQ5Ci8vICMyICBDb2NrY3JvZnQtR2F1bHQgIENvY2tjcm9mdCBEVywgR2F1bHQgTUguIE5lcGhyb24gMTk3NjsxNjozMS00MQovLyAjMyAgU2Nod2FydHogUmV2LiAgICBTY2h3YXJ0eiBHSiBldCBhbC4gSkFTTiAyMDA5OzIwOjYyOS02MzcKLy8gIzQgIE1lYXMgQ3JDbCAgICAgICAgU3RhbmRhcmQgcmVuYWwgcGh5c2lvbG9neQovLyAjNSAgR2VuIENsZWFyYW5jZSAgICBTdGFuZGFyZCByZW5hbCBwaHlzaW9sb2d5Ci8vICM2ICBFUlBGL1BBSCAgICAgICAgIFNtaXRoIEhXLiBQaHlzaW9sb2d5IG9mIHRoZSBLaWRuZXksIDE5MzcKLy8gIzcgIEZpbHRyYXRpb24gRnJhYy4gU3RhbmRhcmQgcmVuYWwgcGh5c2lvbG9neQovLyAjOCAgTmV0IEZpbHQgUHJlcy4gICBHdXl0b24gJiBIYWxsIE1lZGljYWwgUGh5c2lvbG9neQovLyAjOSAgU3RhcmxpbmcgRXEuICAgICBTdGFybGluZyBFSC4gSiBQaHlzaW9sIDE4OTY7MTk6MzEyLTMyNgovLyAjMTAgT25jb3RpYyBQcmVzLiAgICBad2VpZmFjaCAmIEludGFnbGlldHRhLiBNaWNyb3Zhc2MgUmVzIDE5NjgKLy8gIzExMSBNZWhyYW4gQ0lOICAgICAgTWVocmFuIFIgZXQgYWwuIEpBQ0MgMjAwNDs0NDoxMzkzLTEzOTkKLy8gIzExMiBNY01haG9uICAgICAgICAgTWNNYWhvbiBHTSBldCBhbC4gQW5uIEludGVybiBNZWQgMjAxMzsxNTg6NTYwCi8vICMxMTMgS0ZSRSA0LXZhciAgICAgIFRhbmdyaSBOIGV0IGFsLiBKQU1BIDIwMTE7MzA1OjE1NTMtMTU1OQovLyAjMTE0IEtGUkUgOC12YXIgICAgICBUYW5ncmkgTiBldCBhbC4gSkFNQSAyMDExICg4LXZhcikKLy8gIzExNSBTU0lHTiAgICAgICAgICAgRnJhbmsgSSBldCBhbC4gSiBVcm9sIDIwMDI7MTY4OjIzOTUtMjQwMAovLyAjMTE2IExlaWJvdmljaCAgICAgICBMZWlib3ZpY2ggQkMgZXQgYWwuIENhbmNlciAyMDAzOzk3OjE2NjMtMTY3MQovLyAjMTE3IElNREMgICAgICAgICAgICBIZW5nIERZIGV0IGFsLiBMYW5jZXQgT25jb2wgMjAwOTsxMDoxMjQwLTEyNDcKLy8gIzExOCBNU0tDQy9Nb3R6ZXIgICAgTW90emVyIFJKIGV0IGFsLiBKQ08gMTk5OTsxNzoyNTMwLTI1NDAKLy8gIzExOSBSRU5BTCBOZXBoLiAgICAgS3V0aWtvdiBBLCBVenpvIFJHLiBKIFVyb2wgMjAwOTsxODI6ODQ0LTg1MwovLyAjMTIwIFNUT05FIFNjb3JlICAgICBNb29yZSBDTCBldCBhbC4gQk1KIDIwMTQ7MzQ4OmcyMTkxCi8vICMxMjEgQ1AtQUtJICAgICAgICAgIExhdW5heS1WYWNoZXIgViBldCBhbC4gKGxvZ2lzdGljIGZyYW1ld29yaykKLy8gIzEyMiBDaXNwbGF0aW4gQUtJICAgQ3JvbmEgREogZXQgYWwuIE9uY29sb2dpc3QgMjAxNyAobG9naXN0aWMgZnJhbWV3b3JrKQovLyAjMTIzIExpY3Vyc2UgICAgICAgICBMaWN1cnNlIEEgZXQgYWwuIEFyY2ggSW50ZXJuIE1lZCAyMDEwOzE3MDoxOTAwCi8vICMxMjQgTlJQRSAgICAgICAgICAgIFRlc3RhbmkgSk0gZXQgYWwuIENpcmMgSGVhcnQgRmFpbCAyMDE0Ci8vICMxMjUgSElWIENLRCAgICAgICAgIE1vY3JvZnQgQSBldCBhbC4gTGFuY2V0IDIwMDM7MzYyOjIwMy0yMDkKLy8gIzEyNiBDS2lEIFUyNSAgICAgICAgUGllcmNlIENCIGV0IGFsLiBLaWRuZXkgSW50IDIwMjE7OTk6NjIyLTYzMAovLyAjMTI3IE1FTEQgICAgICAgICAgICBLYW1hdGggUFMgZXQgYWwuIEhlcGF0b2xvZ3kgMjAwMTszMzo0NjQtNDcwCi8vICMxMjggTUVMRC1OYSAgICAgICAgIEtpbSBXUiBldCBhbC4gTkVKTSAyMDA4OzM1OToxMDE4LTEwMjYgKFVOT1MgTUVMRC1OYSBmb3JtdWxhKQovLyAjMTI5IFNBQUcgICAgICAgICAgICBSdW55b24gQkEgZXQgYWwuIEFubiBJbnRlcm4gTWVkIDE5OTI7MTE3OjIxNS0yMjAKLy8gIzEzMCBTQlAgUE1OICAgICAgICAgRUFTTCBHdWlkZWxpbmVzIDIwMTg7IFJpbW9sYSBldCBhbC4KLy8gIzEzMSBQUkEgICAgICAgICAgICAgU2VhbGV5IEpFLCBMYXJhZ2ggSkguIEh5cGVydGVuc2lvbiAxOTkwCi8vICMxMzIgQVJSICAgICAgICAgICAgIEZ1bmRlciBKVyBldCBhbC4gSkNFTSAyMDE2OzEwMToxODg5LTE5MTYKLy8gIzEzMyBSZW5pbiBQaGVub3R5cGUgTGFyYWdoIEpILiBBbSBKIE1lZCAxOTc4Ci8vICMxMzQgUFJBIERydWcgUnVsZSAgIFdpbGxpYW1zIEIgZXQgYWwuIEJNSiAyMDA0OzMyODo2MzQKLy8gIzEzNSBSQUFTIEluZGV4ICAgICAgTGFyYWdoIEpILiBBbSBIZWFydCBKIDE5ODkKLy8gIzEzNiBNUiBFeGNlc3MgICAgICAgRnVuZGVyIEpXIGV0IGFsLiBKQ0VNIDIwMTYKLy8gIzEzNyBSZXNpc3RhbnQgSFROICAgQ2FyZXkgUk0gZXQgYWwuIEh5cGVydGVuc2lvbiAyMDE4OzcyOmU1My1lOTAKLy8gIzEzOCBUcnVlIFJlc2lzdGFudCAgQ2FyZXkgUk0gZXQgYWwuIEh5cGVydGVuc2lvbiAyMDE4Ci8vICMxMzkgUkROIEVsaWdpYmlsaXR5IE1haGZvdWQgRiBldCBhbC4gRXVyIEhlYXJ0IEogMjAxOQovLyAjMTQwIFN5bXBhdGhldGljIElkeCBFc2xlciBNIGV0IGFsLiBIeXBlcnRlbnNpb24gMjAxMAovLyAjMTQxIFJDQyBULVN0YWdlICAgICBBSkNDIENhbmNlciBTdGFnaW5nIE1hbnVhbCA4dGggRWQuIDIwMTcKLy8gIzE0MiBUTk0gQ29tcG9zaXRlICAgQUpDQyA4dGggRWQuIDIwMTcKLy8gIzE0MyBTdXJnaWNhbCBSdWxlICAgQ2FtcGJlbGwgU0MgZXQgYWwuIEogVXJvbCAyMDA5Ci8vICMxNDQgUkNDIFN1cnZlaWxsYW5jZSBNb3R6ZXIgUkogZXQgYWwuIE5DQ04gR3VpZGVsaW5lcwovLyAjMTQ1IG1SQ0MgVHJlYXRtZW50ICBOQ0NOL0VTTU8gR3VpZGVsaW5lcyAyMDIzCi8vICMxNDYgQ29ycmVjdGVkIENhICAgIFBheW5lIFJCIGV0IGFsLiBMYW5jZXQgMTk3MzsyOjgzLTg2Ci8vICMxNDcgQ2HDl1Bob3MgICAgICAgICBLRElHTyBDS0QtTUJEIEd1aWRlbGluZSAyMDE3Ci8vICMxNDggUFRIIE1vZGVsICAgICAgIEtESUdPIENLRC1NQkQgMjAxNwovLyAjMTQ5IGVHRlItUGhvcyAgICAgICBLRElHTyBDS0QtTUJEIDIwMTcKLy8gIzE1MCBGR0YyMyAgICAgICAgICAgV29sZiBNLiBKIEFtIFNvYyBOZXBocm9sIDIwMTAKLy8gIzE1MSBDUlMgVHlwZSAxICAgICAgUm9uY28gQyBldCBhbC4gSkFDQyAyMDA4OzUyOjE1MjctMTUzOQovLyAjMTUyIENSUyBUeXBlIDIgICAgICBSb25jbyBDIGV0IGFsLiBKQUNDIDIwMDgKLy8gIzE1MyBGRU5hIENhcmRpb3JlbmFsIE11bGxlbnMgVyBldCBhbC4gSkFDQyAyMDA5Ci8vICMxNTQgUmVuYWwgVmVub3VzICAgIERhbW1hbiBLIGV0IGFsLiBKIEFtIENvbGwgQ2FyZGlvbCAyMDA5Ci8vICMxNTUgSFJTLUFLSSAgICAgICAgIEVBU0wgQ1BHIDIwMTg7IElDQSBDb25zZW5zdXMgMjAxNQovLyAjMTU2IEhSUyBVTmEgICAgICAgICBTYWxlcm5vIEYgZXQgYWwuIEhlcGF0b2xvZ3kgMTk5MwovLyAjMTU3IEhSUyBGRU5hICAgICAgICBFcHN0ZWluIE0uIEdhc3Ryb2VudGVyb2xvZ3kgMTk3MAovLyAjMTU4IEFudGktR0JNICAgICAgICBQdXNleSBDRC4gS2lkbmV5IEludCAyMDAzOzYzOjg4My04ODkKLy8gIzE1OSBBTkNBICAgICAgICAgICAgSmVubmV0dGUgSkMgZXQgYWwuIEFydGhyaXRpcyBSaGV1bSAyMDEzCi8vICMxNjAgQ29tcGxlbWVudCAgICAgIFNldGhpIFMsIEZlcnZlbnphIEZDLiBORUpNIDIwMTI7MzY2OjExMTkKLy8gIzE2MSBSZW5vdmFzY3VsYXIgICAgSGlyc2NoIEFUIGV0IGFsLiBKQUNDIDIwMDY7NDc6MTIzOS0xMzEyCi8vICMxNjIgUkFTIEhlbW9keW5hbWljIFRleHRvciBTQy4gQW0gSiBLaWRuZXkgRGlzIDIwMDkKLy8gIzE2MyBUTUEgICAgICAgICAgICAgR2VvcmdlIEpOLiBORUpNIDIwMDY7MzU0OjE5MjctMTkzNQovLyAjMTY0IEFEQU1UUzEzICAgICAgICBTYWRsZXIgSkUuIE5FSk0gMjAwNDszNTE6MTIyNy0xMjM1Ci8vICMxNjUgUEUgUHJvdGVpbnVyaWEgIEFDT0cgUHJhY3RpY2UgQnVsbGV0aW4gMjIyLCAyMDIwICh1cGRhdGVkIDIwMjIpCi8vICMxNjYgc0ZsdC0xL1BsR0YgICAgIFZlcmxvaHJlbiBTIGV0IGFsLiBIeXBlcnRlbnNpb24gMjAxNDs2MzozNDYtMzUyICh0aHJlc2hvbGRzKQovLyBOZXBocm90aWMgRGVmLiAgICAgICBLRElHTyBHbG9tZXJ1bGFyIERpc2Vhc2VzIDIwMjEKLy8gU2VsZWN0aXZpdHkgSW5kZXggICAgQ2FtZXJvbiBKUywgQmxhbmRmb3JkIEcuIExhbmNldCAxOTY2Ci8vIFNBQUcgICAgICAgICAgICAgICAgIFJ1bnlvbiBCQS4gQW5uIEludGVybiBNZWQgMTk5MgovLyBGRU5hICAgICAgICAgICAgICAgICBLRElHTyBBS0kgMjAxMgovLyBGRVVyZWEgICAgICAgICAgICAgICBDYXJ2b3VuaXMgQ1AgZXQgYWwuIEtpZG5leSBJbnQgMjAwMjs2MjoyMjIzLTIyMjkKLy8gT3Ntb2xhciBHYXAgICAgICAgICAgU21pdGhsaW5lIE4sIEdhcmRuZXIgS0QuIEFubiBFbWVyZyBNZWQgMTk3NgovLyBOYSBEZWZpY2l0ICAgICAgICAgICBBZHJvZ3VlIEhKLCBNYWRpYXMgTkUuIE5FSk0gMjAwMDszNDI6MTU4MQovLyBTSUFESCB2cyBDU1cgRkVVcmF0ZSBGZW5za2UgVyBldCBhbC4gSkNFTSAyMDA4OzkzOjI5OTEtMjk5NwovLyAgICAgICAgICAgICAgICAgICAgICBNYWVzYWthIEpLIGV0IGFsLiBLaWRuZXkgSW50IDE5OTA7Mzc6MTUwMC0xNTA3Ci8vICAgICAgICAgICAgICAgICAgICAgIFZlcmJhbGlzIEpHIGV0IGFsLiBBbSBKIE1lZCAyMDEzOzEyNjpTMS1TNDIKLy8gICAgICAgICAgICAgICAgICAgICAgTklIIGNsaW5pY2FsIHJlZmVyZW5jZSBsaXRlcmF0dXJlCi8vIEFuaW9uIEdhcCBjb3JyLiAgICAgIEZpZ2dlIEogZXQgYWwuIEogTGFiIENsaW4gTWVkIDE5OTIKLy8gRGVsdGEtRGVsdGEgICAgICAgICAgTmFyaW5zIFJHLCBFbW1ldHQgTS4gTWVkaWNpbmUgMTk4MAovLyBXaW50ZXIncyBGb3JtdWxhICAgICBBbGJlcnQgTVMgZXQgYWwuIEFubiBJbnRlcm4gTWVkIDE5Njc7NjY6MzEyCi8vIFVyaW5lIEFuaW9uIEdhcCAgICAgIEJhdHRsZSBEQyBldCBhbC4gTkVKTSAxOTg4OzMxODo1OTQtNTk5Ci8vIFNUT05FIFNjb3JlICAgICAgICAgIE1vb3JlIENMIGV0IGFsLiBCTUogMjAxNDszNDg6ZzIxOTEKLy8gUklGTEUgQ3JpdGVyaWEgICAgICBCZWxsb21vIFIgZXQgYWwuIENyaXQgQ2FyZSAyMDA0Ozg6UjIwNC1SMjEyCi8vIEtESUdPIEFLSSAyMDEyICAgICAgS2lkbmV5IEludCBTdXBwbCAyMDEyOzI6MS0xMzgKLy8gTmEvR2x1Y29zZSBDb3JyLiAgICBLYXR6IE1BLiBORUpNIDE5NzM7Mjg5Ojg0My04NDQgKGZhY3RvciAxLjYpCi8vICAgICAgICAgICAgICAgICAgICAgSGlsbGllciBUQSBldCBhbC4gQW0gSiBNZWQgMTk5OTsxMDY6Mzk5LTQwMyAoZmFjdG9yIDIuNCkKLy8gRnJlZSBXYXRlciBEZWZpY2l0ICBBZHJvZ3VlIEhKLCBNYWRpYXMgTkUuIE5FSk0gMjAwMDszNDI6MTU4MQovLyBIZW5kZXJzb24tSC4gICAgICAgIEhlbmRlcnNvbiBMSiAvIEhhc3NlbGJhbGNoIEsuIHBLYT02LjEKLy8gTVVEUElMRVMvR09MRE1BUksgICBNZWh0YSBBTiBldCBhbC4gTGFuY2V0IDIwMDg7MzcyOjg5MgovLyBVUENSIFN0YWdpbmcgICAgICAgIEtESUdPIENLRCAyMDEyOyBBU04gcmVjb21tZW5kYXRpb25zCi8vIFJUQSBUeXBpbmcgICAgICAgICAgQmF0dGxlIERDIGV0IGFsLiBORUpNIDE5ODg7IFJvZHJpZ3Vlei1Tb3JpYW5vIDIwMDIKLy8gUGhvcy9DYSBDS0QtTUJEICAgICBLRElHTyBDS0QtTUJEIDIwMTc7IEtET1FJIDIwMDMKLy8gTUVMRCAzLjAgICAgICAgICAgICBLaW0gV1IgZXQgYWwuIEdhc3Ryb2VudGVyb2xvZ3kgMjAyMjsxNjM6MTQ3Ni0xNDg4Ci8vCi8vIOKUgOKUgCBUUkFOU1BMQU5UIE5FUEhST0xPR1kgKHYxMC4wIGFkZGl0aW9ucykg4pSA4pSACi8vIFMxIENWIFNjcmVlbmluZyAgICAgS0RJR08gVHJhbnNwbGFudCBDYW5kaWRhY3kgMjAyMCDCpzEzLjM7IEtET1FJIENvbW1lbnRhcnkgMjAyMQovLyBTMiBNYWxpZyBXYWl0ICAgICAgIEFTVCBDb25zZW5zdXMgKFNhd2luc2tpIGV0IGFsLiwgQW0gSiBUcmFuc3BsYW50IDIwMjApOyBLRElHTyAyMDIwIMKnMTEKLy8gUzMgQk1JIEFzc2VzcyAgICAgICBLRElHTyAyMDIwIMKnNjsgS0RPUUkgQ29tbWVudGFyeSAyMDIxCi8vIFM0IGNQUkEvSExBICAgICAgICAgS0RJR08gMjAyMCDCpzE5OyBVTk9TIGNQUkEgZGVmaW5pdGlvbgovLyBTNSBGcmllZCBGcmFpbHR5ICAgIEZyaWVkIExQIGV0IGFsLiBKIEdlcm9udG9sIDIwMDE7NTY6TTE0Ni1NMTU2OyBLRElHTyAyMDIwCi8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkAoKY29uc3QgR1VJREVMSU5FX0NMT1NJTkcgPSAiSW4gYW4gZW1lcmdlbmN5LCBzdGFiaWxpc2UgdGhlIHBhdGllbnQgZmlyc3Qg4oCUIGNhbGN1bGF0b3Igb3V0cHV0cyBtdXN0IG5ldmVyIGRlbGF5IHJlc3VzY2l0YXRpb24uIEFwcGx5IGN1cnJlbnQgaW50ZXJuYXRpb25hbCBhbmQgbmF0aW9uYWwgZ3VpZGVsaW5lcyBhbG9uZ3NpZGUgeW91ciBpbnN0aXR1dGlvbuKAmXMgcHJvdG9jb2xzIHdoZW4gbWFraW5nIG1hbmFnZW1lbnQgZGVjaXNpb25zLiI7Cgpjb25zdCBESVNDTEFJTUVSX1RFWFQgPSBgSU1QT1JUQU5UIE5PVElDRSDigJQgUkVBRCBDQVJFRlVMTFkgQkVGT1JFIFVTRQoKwqkgMjAyNiBEci4gQXNoaXNoIFBhdGVsLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBVbmF1dGhvcmlzZWQgcmVwcm9kdWN0aW9uIG9yIGRpc3RyaWJ1dGlvbiBwcm9oaWJpdGVkLgpQZWVyIFJldmlld2VyczogWyAgICAgICAgICAgICAgICAgICAgXSBbICAgICAgICAgICAgICAgICAgICBdIFsgICAgICAgICAgICAgICAgICAgIF0KCkVNRVJHRU5DWSAmIENSSVRJQ0FMIENBUkUgTk9USUNFCkluIGhhZW1vZHluYW1pY2FsbHkgdW5zdGFibGUgcGF0aWVudHMgb3IgY2xpbmljYWwgZW1lcmdlbmNpZXMsIGltbWVkaWF0ZSByZXN1c2NpdGF0aW9uIGFuZCBzdGFiaWxpc2F0aW9uIHRha2UgYWJzb2x1dGUgcHJlY2VkZW5jZS4gVGhlIG91dHB1dHMgb2YgdGhpcyB0b29sIGFyZSBub3QgYSBzdWJzdGl0dXRlIGZvciBlbWVyZ2VuY3kgY2xpbmljYWwgYXNzZXNzbWVudCBhbmQgbXVzdCBub3QgZGVsYXkgdGltZS1jcml0aWNhbCBpbnRlcnZlbnRpb25zIGluY2x1ZGluZyBhaXJ3YXkgbWFuYWdlbWVudCwgZmx1aWQgcmVzdXNjaXRhdGlvbiwgb3Igb3JnYW4gc3VwcG9ydC4KCkVWSURFTkNFIEJBU0UgJiBHVUlERUxJTkUgSElFUkFSQ0hZCkZvcm11bGFzIGFuZCB0aHJlc2hvbGRzIHdpdGhpbiB0aGlzIHRvb2wgYXJlIGRlcml2ZWQgZnJvbSBwcmltYXJ5IHBlZXItcmV2aWV3ZWQgbGl0ZXJhdHVyZSwgc3lzdGVtYXRpYyByZXZpZXdzLCBhbmQgbWV0YS1hbmFseXNlcyBhcyBjaXRlZC4gSW50ZXJwcmV0aXZlIGd1aWRhbmNlIHJlZmxlY3RzIGN1cnJlbnQgYXBwbGljYWJsZSByZWNvbW1lbmRhdGlvbnMgZnJvbSBpbnRlcm5hdGlvbmFsIGJvZGllcyBpbmNsdWRpbmcgdGhlIEtpZG5leSBEaXNlYXNlOiBJbXByb3ZpbmcgR2xvYmFsIE91dGNvbWVzIChLRElHTykgaW5pdGlhdGl2ZSwgdGhlIEFtZXJpY2FuIFNvY2lldHkgb2YgTmVwaHJvbG9neSAoQVNOKSwgdGhlIEV1cm9wZWFuIFJlbmFsIEFzc29jaWF0aW9uIChFUkEpLCB0aGUgSW50ZXJuYXRpb25hbCBTb2NpZXR5IG9mIE5lcGhyb2xvZ3kgKElTTiksIGFuZCBvdGhlciByZWxldmFudCBuYXRpb25hbCBhbmQgc3BlY2lhbHR5IGd1aWRlbGluZXMuIFVzZXJzIGFyZSByZXNwb25zaWJsZSBmb3IgYXBwbHlpbmcgdGhlIG1vc3QgY3VycmVudCBwdWJsaXNoZWQgdmVyc2lvbiBvZiBhbnkgcmVmZXJlbmNlZCBndWlkZWxpbmUgYW5kIGFkYXB0aW5nIHJlY29tbWVuZGF0aW9ucyB0byB0aGVpciBuYXRpb25hbCByZWd1bGF0b3J5IGZyYW1ld29yayBhbmQgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuCgpTQ09QRSBPRiBVU0UKUmVzdWx0cyBtdXN0IGJlIGludGVycHJldGVkIHdpdGhpbiB0aGUgZnVsbCBjbGluaWNhbCBjb250ZXh0IG9mIHRoZSBpbmRpdmlkdWFsIHBhdGllbnQuIE5vIGNhbGN1bGF0b3IgcmVzdWx0IGNvbnN0aXR1dGVzIGEgZGlhZ25vc2lzLCB0cmVhdG1lbnQgZGVjaXNpb24sIG9yIHN1YnN0aXR1dGUgZm9yIHRoZSBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgb2YgYSBxdWFsaWZpZWQgbmVwaHJvbG9naXN0IG9yIGxpY2Vuc2VkIGhlYWx0aGNhcmUgcHJvZmVzc2lvbmFsLgoKRElTQ0xBSU1FUiBPRiBMSUFCSUxJVFkKRHIuIEFzaGlzaCBQYXRlbCwgdGhlIGF1dGhvciwgcGVlciByZXZpZXdlcnMgKHdoZXJlIGxpc3RlZCksIGFuZCBhbGwgYXNzb2NpYXRlZCBkZXZlbG9wZXJzIGV4cHJlc3NseSBkaXNjbGFpbSBhbnkgYW5kIGFsbCBsaWFiaWxpdHksIHRvIHRoZSBmdWxsZXN0IGV4dGVudCBwZXJtaXR0ZWQgYnkgYXBwbGljYWJsZSBsYXcsIGZvciBhbnkgY2xpbmljYWwgZGVjaXNpb25zLCBvdXRjb21lcywgb3IgaGFybXMgYXJpc2luZyBkaXJlY3RseSBvciBpbmRpcmVjdGx5IGZyb20gdXNlIG9mIHRoaXMgdG9vbC4gTm8gd2FycmFudHkg4oCUIGV4cHJlc3MsIGltcGxpZWQsIG9yIHN0YXR1dG9yeSDigJQgaXMgbWFkZSByZWdhcmRpbmcgdGhlIGFjY3VyYWN5LCBjb21wbGV0ZW5lc3MsIHJlbGlhYmlsaXR5LCBvciBmaXRuZXNzIGZvciBhbnkgcGFydGljdWxhciBjbGluaWNhbCBwdXJwb3NlIG9mIGFueSBmb3JtdWxhIG9yIG91dHB1dCBoZXJlaW4uCgpGT1JNVUxBIEFDQ1VSQUNZICYgT05HT0lORyBVUERBVEVTCkZvcm11bGFzIGFyZSBkZXJpdmVkIGZyb20gcGVlci1yZXZpZXdlZCBsaXRlcmF0dXJlIGFuZCBlc3RhYmxpc2hlZCBjbGluaWNhbCBwcmFjdGljZSBndWlkZWxpbmVzLCBhcyBjaXRlZCBpbiBlYWNoIGNhbGN1bGF0b3IuIEhvd2V2ZXIsIG1hbnkgZXF1YXRpb25zIGFyZSBtYXRoZW1hdGljYWwgYXBwcm94aW1hdGlvbnMgb2YgY29tcGxleCBwaHlzaW9sb2dpY2FsIHByb2Nlc3NlcyBhbmQgbWF5IG5vdCBiZSBhcHBsaWNhYmxlIHRvIGFsbCBwYXRpZW50IHBvcHVsYXRpb25zLCBpbmNsdWRpbmcgcGF0aWVudHMgYXQgZXh0cmVtZXMgb2YgbXVzY2xlIG1hc3Mgb3IgYm9keSBoYWJpdHVzLCBwYWVkaWF0cmljIHBhdGllbnRzIG91dHNpZGUgc3RhdGVkIGFnZSByYW5nZXMsIGNyaXRpY2FsbHkgaWxsIHBhdGllbnRzIHdpdGggcmFwaWRseSBjaGFuZ2luZyByZW5hbCBmdW5jdGlvbiwgcHJlZ25hbnQgcGF0aWVudHMsIHBhdGllbnRzIHdpdGggdW51c3VhbCBkaWV0YXJ5IHBhdHRlcm5zLCBvciB0aG9zZSB3aXRoIGNvbmRpdGlvbnMgbm90IHJlcHJlc2VudGVkIGluIHRoZSBvcmlnaW5hbCBkZXJpdmF0aW9uIGNvaG9ydC4gQ2xpbmljYWwgcHJhY3RpY2UgZ3VpZGVsaW5lcywgcmVmZXJlbmNlIHJhbmdlcywgYW5kIHJlY29tbWVuZGVkIHRocmVzaG9sZHMgYXJlIHN1YmplY3QgdG8gcGVyaW9kaWMgcmV2aXNpb24gYXMgbmV3IGV2aWRlbmNlIGVtZXJnZXM7IHRoZSBmb3JtdWxhcyBhbmQgaW50ZXJwcmV0YXRpb25zIHdpdGhpbiB0aGlzIHRvb2wgbWF5IGJlIHVwZGF0ZWQgYWNjb3JkaW5nbHkgYnV0IG1heSBub3QgYWx3YXlzIHJlZmxlY3QgdGhlIHZlcnkgbGF0ZXN0IHB1Ymxpc2hlZCByZXZpc2lvbnMuIFVzZXJzIHNob3VsZCB2ZXJpZnkgYWdhaW5zdCB0aGUgbW9zdCBjdXJyZW50IHZlcnNpb24gb2YgYW55IHJlZmVyZW5jZWQgZ3VpZGVsaW5lIGFuZCBjb25maXJtIGFwcGxpY2FiaWxpdHkgdG8gdGhlaXIgcGF0aWVudCBwb3B1bGF0aW9uIGJlZm9yZSB1c2UuCgpVc2Ugb2YgdGhpcyB0b29sIGNvbnN0aXR1dGVzIGFja25vd2xlZGdtZW50IGFuZCBmdWxsIGFjY2VwdGFuY2Ugb2YgdGhlc2UgdGVybXMuYDsKCi8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkAovLyBBTEwgU0VDVElPTlMgJiBDQUxDVUxBVE9SUyDigJQgY29tcGxldGUgd2l0aCBUcmFuc3BsYW50IE5lcGhyb2xvZ3kKLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQCmNvbnN0IFNFQ1RJT05TID0gWwogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHsKICAgIGlkOiJzMSIsIGxhYmVsOiAiUmVuYWwgRnVuY3Rpb24gJiBIZW1vZHluYW1pY3MiLAogICAgY2FsY3M6IFsKICAgICAgewogICAgICAgIGlkOiJja2RlcGkiLCBuYW1lOiJDS0QtRVBJIDIwMjEiLCByZWY6IiMxIMK3IElua2VyIGV0IGFsLiwgTkVKTSAyMDIxIiwgdGFnOiJlR0ZSIiwKICAgICAgICBmb3JtdWxhOiIxNDIgw5cgbWluKFNjci/OuiwgMSlezrEgw5cgbWF4KFNjci/OuiwgMSle4oiSMS4yMDAgw5cgMC45OTM4XkFnZSDDlyAxLjAxMltGZW1hbGVdXG7OuiA9IDAuNyAoRikgLyAwLjkgKE0pICAgzrEgPSDiiJIwLjI0MSAoRikgLyDiiJIwLjMwMiAoTSkiLAogICAgICAgIG5vdGU6IlJhY2UtZnJlZSAyMDIxIGVxdWF0aW9uLiBQcmVmZXJyZWQgYWR1bHQgR0ZSIGVzdGltYXRvci4gUmVxdWlyZWQgaW5wdXQgZm9yIEtGUkUgcmlzayBjYWxjdWxhdGlvbi4gRG8gbm90IHVzZSBpbiBwcmVnbmFuY3ksIGV4dHJlbWVzIG9mIG11c2NsZSBtYXNzLCBvciBhY3V0ZSBpbGxuZXNzLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoic2NyIixsYWJlbDoiU2VydW0gQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMS4yIn0sCiAgICAgICAgICB7aWQ6ImFnZSIsbGFiZWw6IkFnZSIsdW5pdDoieWVhcnMiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNTUifSwKICAgICAgICAgIHtpZDoic2V4IixsYWJlbDoiU2V4Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJNYWxlIiwiRmVtYWxlIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHNjcj0rdi5zY3IsYWdlPSt2LmFnZTsgaWYoIXNjcnx8c2NyPD0wfHwhYWdlfHxhZ2U8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgZj12LnNleD09PSJGZW1hbGUiLGs9Zj8wLjc6MC45LGE9Zj8tMC4yNDE6LTAuMzAyLHI9c2NyL2s7CiAgICAgICAgICByZXR1cm4ge3ZhbDooMTQyKk1hdGgucG93KE1hdGgubWluKHIsMSksYSkqTWF0aC5wb3coTWF0aC5tYXgociwxKSwtMS4yKSpNYXRoLnBvdygwLjk5MzgsYWdlKSooZj8xLjAxMjoxKSkudG9GaXhlZCgxKSx1bml0OiJtTC9taW4vMS43M23CsiJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2Pj05MCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBHMSDigJQgTm9ybWFsIG9yIGhpZ2ggKOKJpTkwIG1ML21pbi8xLjczbcKyKS4gQSBDS0QgZGlhZ25vc2lzIGF0IHRoaXMgbGV2ZWwgd291bGQgcmVxdWlyZSB0aGUgcHJlc2VuY2Ugb2Yga2lkbmV5IGRhbWFnZSBtYXJrZXJzIGZvciBtb3JlIHRoYW4gMyBtb250aHMuIENhcmRpb3Zhc2N1bGFyIHJpc2sgZmFjdG9yIG9wdGltaXNhdGlvbiBpcyByZWNvbW1lbmRlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTYwKSByZXR1cm4ge2M6IiM2NWEzMGQiLHQ6YEcyIOKAlCBNaWxkbHkgZGVjcmVhc2VkICg2MOKAkzg5KS4gQW5udWFsIG1vbml0b3JpbmcgaXMgYXBwcm9wcmlhdGUgaWYgZGFtYWdlIG1hcmtlcnMgYXJlIHByZXNlbnQuIEJsb29kIHByZXNzdXJlIGFuZCBwcm90ZWludXJpYSB0YXJnZXRzIHNob3VsZCBiZSByZXZpZXdlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTQ1KSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEczYSDigJQgTWlsZGx5LXRvLW1vZGVyYXRlbHkgZGVjcmVhc2VkICg0NeKAkzU5KS4gU2l4LXRvLXR3ZWx2ZSBtb250aGx5IHJldmlldyBpcyByZWFzb25hYmxlLiBNb25pdG9yaW5nIGZvciBDS0TigJNNaW5lcmFsIGFuZCBCb25lIERpc29yZGVyLCBhbmFlbWlhLCBhbmQgbWV0YWJvbGljIGFjaWRvc2lzIGlzIGFkdmlzZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj0zMCkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBHM2Ig4oCUIE1vZGVyYXRlbHktdG8tc2V2ZXJlbHkgZGVjcmVhc2VkICgzMOKAkzQ0KS4gTmVwaHJvbG9neSByZWZlcnJhbCBpcyByZWNvbW1lbmRlZC4gSW50cm9kdWNpbmcgZWR1Y2F0aW9uIG9uIHJlbmFsIHJlcGxhY2VtZW50IHRoZXJhcHkgb3B0aW9ucyBtYXkgYmUgYXBwcm9wcmlhdGUgaW4gcHJlcGFyYXRpb24gZm9yIGZ1dHVyZSBwbGFubmluZy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTE1KSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEc0IOKAlCBTZXZlcmVseSBkZWNyZWFzZWQgKDE14oCTMjkpLiBFeHBlZGl0ZWQgbmVwaHJvbG9neSByZXZpZXcgaXMgc3Ryb25nbHkgcmVjb21tZW5kZWQuIERpc2N1c3Npb25zIHJlZ2FyZGluZyB2YXNjdWxhciBhY2Nlc3MgcGxhbm5pbmcgYW5kIHRyYW5zcGxhbnQgYXNzZXNzbWVudCwgd2hlcmUgY2xpbmljYWxseSBhcHByb3ByaWF0ZSwgc2hvdWxkIGJlIGNvbnNpZGVyZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiM5OTFiMWIiLHQ6YEc1IOKAlCBLaWRuZXkgZmFpbHVyZSAoPDE1KS4gUHJvbXB0IG11bHRpZGlzY2lwbGluYXJ5IG5lcGhyb2xvZ3kgaW5wdXQgaXMgcmVjb21tZW5kZWQuIERpc2N1c3Npb25zIHJlZ2FyZGluZyByZW5hbCByZXBsYWNlbWVudCB0aGVyYXB5IG9yIGNvbnNlcnZhdGl2ZSBtYW5hZ2VtZW50IHNob3VsZCBiZSB1bmRlcnRha2VuIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgcGF0aWVudCdzIHByZWZlcmVuY2VzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJjZyIsIG5hbWU6IkNvY2tjcm9mdOKAk0dhdWx0IiwgcmVmOiIjMiDCtyBDb2NrY3JvZnQgJiBHYXVsdCwgTmVwaHJvbiAxOTc2IiwgdGFnOiJDckNsIOKAlCBEcnVnIERvc2luZyIsCiAgICAgICAgZm9ybXVsYToiQ3JDbCA9IFsoMTQwIOKIkiBBZ2UpIMOXIFdlaWdodF0gLyAoNzIgw5cgU2NyKSDDlyAwLjg1IGlmIEZlbWFsZSIsCiAgICAgICAgbm90ZToiVXNlIGFjdHVhbCBib2R5IHdlaWdodCB1bmxlc3Mgb2Jlc2UgKElCVyBvciBhZGp1c3RlZCBCVykuIFByaW1hcnkgZXF1YXRpb24gZm9yIGRvc2UtYWRqdXN0bWVudCBvZiByZW5hbGx5LWNsZWFyZWQgbWVkaWNhdGlvbnMuIE5vdCByZWNvbW1lbmRlZCBmb3IgR0ZSIHN0YWdpbmcuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJhZ2UiLGxhYmVsOiJBZ2UiLHVuaXQ6InllYXJzIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDY1In0sCiAgICAgICAgICB7aWQ6Ind0IixsYWJlbDoiV2VpZ2h0Iix1bml0OiJrZyIsdHlwZToibnVtYmVyIixwaDoiZS5nLiA3MCJ9LAogICAgICAgICAge2lkOiJzY3IiLGxhYmVsOiJTZXJ1bSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxLjAifSwKICAgICAgICAgIHtpZDoic2V4IixsYWJlbDoiU2V4Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJNYWxlIiwiRmVtYWxlIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGFnZT0rdi5hZ2Usd3Q9K3Yud3Qsc2NyPSt2LnNjcjsgaWYoIWFnZXx8IXd0fHwhc2NyfHxzY3I8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KCgoMTQwLWFnZSkqd3QpLyg3MipzY3IpKih2LnNleD09PSJGZW1hbGUiPzAuODU6MSkpLnRvRml4ZWQoMSksdW5pdDoibUwvbWluIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY+PTYwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YOKJpTYwIG1ML21pbiDigJQgTm9ybWFsIHJhbmdlLiBTdGFuZGFyZCBkcnVnIGRvc2luZyBpcyBnZW5lcmFsbHkgYXBwcm9wcmlhdGUuIFZlcmlmeSBhZ2FpbnN0IGluZGl2aWR1YWwgZHJ1ZyBwcmVzY3JpYmluZyBpbmZvcm1hdGlvbi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTMwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YDMw4oCTNTkgbUwvbWluIOKAlCBNb2RlcmF0ZSByZW5hbCBpbXBhaXJtZW50LiBEb3NlIGFkanVzdG1lbnQgaXMgbGlrZWx5IHJlcXVpcmVkIGZvciBtYW55IHJlbmFsbHktY2xlYXJlZCBtZWRpY2F0aW9ucyBpbmNsdWRpbmcgRE9BQ3MsIGFtaW5vZ2x5Y29zaWRlcywgbWV0Zm9ybWluLCBhbmQgTE1XSC4gUGhhcm1hY2lzdCByZXZpZXcgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj0xNSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAxNeKAkzI5IG1ML21pbiDigJQgU2V2ZXJlIHJlbmFsIGltcGFpcm1lbnQuIFNpZ25pZmljYW50IGRvc2UgcmVkdWN0aW9ucyBsaWtlbHkgcmVxdWlyZWQuIE5lcGhyb3RveGljIGFnZW50cyBzaG91bGQgYmUgYXZvaWRlZCB3aGVyZSBwb3NzaWJsZS4gUGhhcm1hY2lzdCBpbnB1dCBhbmQgbmVwaHJvbG9neSByZXZpZXcgYXJlIHN0cm9uZ2x5IHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjOTkxYjFiIix0OmA8MTUgbUwvbWluIOKAlCBEaWFseXNpcyByYW5nZS4gRGlhbHlzaXMgZG9zaW5nIHByb3RvY29scyBzaG91bGQgYmUgYXBwbGllZC4gQ29tYmluZWQgbmVwaHJvbG9neSBhbmQgcGhhcm1hY2lzdCByZXZpZXcgaXMgcmVjb21tZW5kZWQgYXMgYSBwcmlvcml0eS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoic2Nod2FydHoiLCBuYW1lOiJSZXZpc2VkIFNjaHdhcnR6IChQYWVkaWF0cmljKSIsIHJlZjoiIzMgwrcgU2Nod2FydHogZXQgYWwuLCBKQVNOIDIwMDkiLCB0YWc6IlBhZWRpYXRyaWMgZUdGUiIsCiAgICAgICAgZm9ybXVsYToiZUdGUiA9IDAuNDEzIMOXIChIZWlnaHQgLyBTY3IpIiwKICAgICAgICBub3RlOiJIZWlnaHQgaW4gY20sIFNjciBpbiBtZy9kTC4gVmFsaWQgZm9yIGNoaWxkcmVuIGFnZWQgMeKAkzE2IHllYXJzLiBEbyBub3QgYXBwbHkgdG8gYWR1bHRzLiBUaGUgMjAwOSByZXZpc2VkIGVxdWF0aW9uIHVzZXMgaz0wLjQxMy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Imh0IixsYWJlbDoiSGVpZ2h0Iix1bml0OiJjbSIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxMjAifSwKICAgICAgICAgIHtpZDoic2NyIixsYWJlbDoiU2VydW0gQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMC42In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgaD0rdi5odCxzPSt2LnNjcjsgaWYoIWh8fCFzfHxzPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigwLjQxMypoL3MpLnRvRml4ZWQoMSksdW5pdDoibUwvbWluLzEuNzNtwrIifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49OTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRzEg4oCUIE5vcm1hbCBwYWVkaWF0cmljIEdGUiAo4omlOTApLiBLaWRuZXkgZGFtYWdlIG1hcmtlcnMgYXJlIHJlcXVpcmVkIGZvciBhIENLRCBkaWFnbm9zaXMgYXQgdGhpcyBlR0ZSIGxldmVsLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49NjApIHJldHVybiB7YzoiIzY1YTMwZCIsdDpgRzIg4oCUIE1pbGRseSBkZWNyZWFzZWQgKDYw4oCTODkpLiBBbm51YWwgbW9uaXRvcmluZyBpcyByZWFzb25hYmxlIGlmIGtpZG5leSBkYW1hZ2UgbWFya2VycyBhcmUgcHJlc2VudC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTMwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEczIOKAlCBNb2RlcmF0ZWx5IGRlY3JlYXNlZCAoMzDigJM1OSkuIFBhZWRpYXRyaWMgbmVwaHJvbG9neSByZWZlcnJhbCBpcyByZWNvbW1lbmRlZC4gQXR0ZW50aW9uIHRvIGdyb3d0aCwgbnV0cml0aW9uLCBhbmQgYm9uZSBoZWFsdGggaXMgYWR2aXNlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTE1KSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEc0IOKAlCBTZXZlcmVseSBkZWNyZWFzZWQgKDE14oCTMjkpLiBQcm9tcHQgcGFlZGlhdHJpYyBuZXBocm9sb2d5IGlucHV0IGlzIHJlY29tbWVuZGVkLiBGYW1pbHkgZWR1Y2F0aW9uIHJlZ2FyZGluZyBSUlQgb3B0aW9ucyBzaG91bGQgYmUgY29uc2lkZXJlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzk5MWIxYiIsdDpgRzUg4oCUIEtpZG5leSBmYWlsdXJlICg8MTUpLiBVcmdlbnQgcGFlZGlhdHJpYyBuZXBocm9sb2d5IGlucHV0IGlzIHJlY29tbWVuZGVkLiBSUlQgcGxhbm5pbmcgb3IgY29uc2VydmF0aXZlIG1hbmFnZW1lbnQgZGlzY3Vzc2lvbnMgc2hvdWxkIGJlIGluaXRpYXRlZCBwcm9tcHRseS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiY2tpZHUyNSIsIG5hbWU6IkNLaUQgVTI1IChQaWVyY2UgMjAyMSkiLCByZWY6IiMxMjYgwrcgUGllcmNlIGV0IGFsLiwgS2lkbmV5IEludCAyMDIxOzk5OjYyMi02MzAiLCB0YWc6IlBhZWRpYXRyaWMgJiBZb3VuZyBBZHVsdCBlR0ZSIOKJpDI1eXIiLAogICAgICAgIGZvcm11bGE6ImVHRlIgPSDOuiDDlyAoSGVpZ2h0W2NtXSAvIFNjclttZy9kTF0pXG5TZXgtc3RyYXRpZmllZCDOujpcbiAgRmVtYWxlOiAy4oCTMTF5IOKGkiAzNy4yIHwgMTLigJMxN3kg4oaSIDM2LjUgfCAxOOKAkzI1eSDihpIgMzIuOFxuICBNYWxlOiAgIDLigJMxMXkg4oaSIDM5LjQgfCAxMuKAkzE3eSDihpIgNDQuOCB8IDE44oCTMjV5IOKGkiA0My4xIiwKICAgICAgICBub3RlOiJBZ2UtIGFuZCBzZXgtc3RyYXRpZmllZCDOuiB2YWx1ZXMuIFZhbGlkYXRlZCBhZ2VzIDLigJMyNSBhZ2FpbnN0IGlvaGV4b2wgR0ZSLiBSZXF1aXJlcyBJRE1TLXN0YW5kYXJkaXNlZCBjcmVhdGluaW5lLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiaHQiLGxhYmVsOiJIZWlnaHQiLHVuaXQ6ImNtIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDE2NSJ9LAogICAgICAgICAge2lkOiJzY3IiLGxhYmVsOiJTZXJ1bSBDcmVhdGluaW5lIChJRE1TLWNhbGlicmF0ZWQpIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAwLjkifSwKICAgICAgICAgIHtpZDoiYWdlIixsYWJlbDoiQWdlIix1bml0OiJ5ZWFycyIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxNiJ9LAogICAgICAgICAge2lkOiJzZXgiLGxhYmVsOiJTZXgiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk1hbGUiLCJGZW1hbGUiXX0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgaD0rdi5odCxzPSt2LnNjcixhZ2U9K3YuYWdlOyBpZighaHx8IXN8fHM8PTB8fCFhZ2UpIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgZj12LnNleD09PSJGZW1hbGUiOwogICAgICAgICAgbGV0IGs7CiAgICAgICAgICBpZihhZ2U8PTExKSBrPWY/MzcuMjozOS40OwogICAgICAgICAgZWxzZSBpZihhZ2U8PTE3KSBrPWY/MzYuNTo0NC44OwogICAgICAgICAgZWxzZSBrPWY/MzIuODo0My4xOwogICAgICAgICAgcmV0dXJuIHt2YWw6KGsqaC9zKS50b0ZpeGVkKDEpLHVuaXQ6Im1ML21pbi8xLjczbcKyIixzZWM6YM66ID0gJHtrfSAoJHt2LnNleH0sIGFnZSAke2FnZX15cilgfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49OTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgZUdGUiAke3IudmFsfSDigJQgRzE6IE5vcm1hbCBvciBoaWdoICjiiaU5MCkuIEtpZG5leSBkYW1hZ2UgbWFya2VycyBuZWVkZWQgZm9yIENLRCBkaWFnbm9zaXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj02MCkgcmV0dXJuIHtjOiIjNjVhMzBkIix0OmBlR0ZSICR7ci52YWx9IOKAlCBHMjogTWlsZGx5IGRlY3JlYXNlZCAoNjDigJM4OSkuIEJQIGFuZCBwcm90ZWludXJpYSBvcHRpbWlzYXRpb24gcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj00NSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBlR0ZSICR7ci52YWx9IOKAlCBHM2E6IE1pbGRseS10by1tb2RlcmF0ZWx5IGRlY3JlYXNlZCAoNDXigJM1OSkuIE5lcGhyb2xvZ3kgcmVmZXJyYWwgYXBwcm9wcmlhdGUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj0zMCkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBlR0ZSICR7ci52YWx9IOKAlCBHM2I6IE1vZGVyYXRlbHktdG8tc2V2ZXJlbHkgZGVjcmVhc2VkICgzMOKAkzQ0KS4gTmVwaHJvbG9neSBmb2xsb3ctdXAgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj0xNSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBlR0ZSICR7ci52YWx9IOKAlCBHNDogU2V2ZXJlbHkgZGVjcmVhc2VkICgxNeKAkzI5KS4gRXhwZWRpdGVkIG5lcGhyb2xvZ3kgaW5wdXQgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiM5OTFiMWIiLHQ6YGVHRlIgJHtyLnZhbH0g4oCUIEc1OiBLaWRuZXkgZmFpbHVyZSAoPDE1KS4gUHJvbXB0IG11bHRpZGlzY2lwbGluYXJ5IG5lcGhyb2xvZ3kgaW5wdXQgc3Ryb25nbHkgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImNrZGVwaV9jeXMiLCBuYW1lOiJDS0QtRVBJIEN5c3RhdGluIEMgJiBDci1DeXMgKDIwMjEvMjAxMikiLCByZWY6Iklua2VyIGV0IGFsLiwgTkVKTSAyMDIxOzM4NToxNzM3LTE3NDk7IE5JRERLOyBOS0YtQVNOIFRhc2sgRm9yY2UgMjAyMSIsIHRhZzoiZUdGUiDigJQgQ3lzdGF0aW4gQyAoRWFybHkgQmlvbWFya2VyKSIsCiAgICAgICAgZm9ybXVsYToiZUdGUihDci1DeXMgMjAyMSkgPSAxMzUgw5cgbWluKFNjci/OuiwxKV7OsSDDlyBtYXgoU2NyL866LDEpXuKIkjAuNTQ0IMOXIG1pbihTY3lzLzAuOCwxKV7iiJIwLjMyMyDDlyBtYXgoU2N5cy8wLjgsMSle4oiSMC43Nzggw5cgMC45OTYxXkFnZSDDlyAwLjk2M1tpZiBmZW1hbGVdXG7OuiA9IDAuNyhGKSAvIDAuOShNKSwgzrEgPSDiiJIwLjIxOShGKSAvIOKIkjAuMTQ0KE0pXG5cbmVHRlIoQ3lzLW9ubHkgMjAxMikgPSAxMzMgw5cgbWluKFNjeXMvMC44LDEpXuKIkjAuNDk5IMOXIG1heChTY3lzLzAuOCwxKV7iiJIxLjMyOCDDlyAwLjk5Nl5BZ2Ugw5cgMC45MzJbaWYgZmVtYWxlXSIsCiAgICAgICAgbm90ZToiQ3lzdGF0aW4gQyBpcyBsZXNzIGFmZmVjdGVkIGJ5IG11c2NsZSBtYXNzLCBkaWV0LCBhbmQgcmFjZSB0aGFuIGNyZWF0aW5pbmUg4oCUIGl0IHNlcnZlcyBhcyBhbiBlYXJseSBiaW9tYXJrZXIgb2YgR0ZSIGRlY2xpbmUgZXNwZWNpYWxseSBpbiBsb3cgbXVzY2xlIG1hc3MsIGVsZGVybHksIHZlZ2V0YXJpYW4sIGFuZCBvbmNvbG9neSBwYXRpZW50cy4gVGhlIGNvbWJpbmVkIENyLUN5cyBlcXVhdGlvbiAoUDMwIH45MSUpIGlzIHRoZSBtb3N0IGFjY3VyYXRlIGVHRlIgZXN0aW1hdGUgYW5kIGlzIHJlY29tbWVuZGVkIGJ5IEtESUdPIDIwMjQgYW5kIHRoZSBOS0YtQVNOIFRhc2sgRm9yY2UgZm9yIGNvbmZpcm1hdG9yeSB0ZXN0aW5nLiBDeXN0YXRpbiBDIG1heSBiZSBlbGV2YXRlZCBieSBpbmZsYW1tYXRpb24sIHRoeXJvaWQgZHlzZnVuY3Rpb24sIG9iZXNpdHksIGFuZCBjb3J0aWNvc3Rlcm9pZHMuIFJlcXVpcmVzIElGQ0Mtc3RhbmRhcmRpc2VkIGFzc2F5IChFUk0tREE0NzEpLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoic2NyIixsYWJlbDoiU2VydW0gQ3JlYXRpbmluZSAoSURNUykiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIxLjEifSwKICAgICAgICAgIHtpZDoiY3lzIixsYWJlbDoiU2VydW0gQ3lzdGF0aW4gQyAoSUZDQykiLHVuaXQ6Im1nL0wiLHR5cGU6Im51bWJlciIscGg6IjAuOTUifSwKICAgICAgICAgIHtpZDoiYWdlIixsYWJlbDoiQWdlIix1bml0OiJ5ZWFycyIsdHlwZToibnVtYmVyIixwaDoiNTUifSwKICAgICAgICAgIHtpZDoic2V4IixsYWJlbDoiU2V4Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJNYWxlIiwiRmVtYWxlIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGNyPSt2LnNjcixjeXM9K3YuY3lzLGFnZT0rdi5hZ2UsZmVtPXYuc2V4PT09IkZlbWFsZSI7CiAgICAgICAgICBpZighY3lzfHwhYWdlKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGs9ZmVtPzAuNzowLjksIGE9ZmVtPy0wLjIxOTotMC4xNDQ7CiAgICAgICAgICBjb25zdCBzZXhGY3JjeXM9ZmVtPzAuOTYzOjEsIHNleEZjeXM9ZmVtPzAuOTMyOjE7CiAgICAgICAgICBsZXQgZUdGUmN5cz0xMzMqTWF0aC5wb3coTWF0aC5taW4oY3lzLzAuOCwxKSwtMC40OTkpKk1hdGgucG93KE1hdGgubWF4KGN5cy8wLjgsMSksLTEuMzI4KSpNYXRoLnBvdygwLjk5NixhZ2UpKnNleEZjeXM7CiAgICAgICAgICBsZXQgZUdGUmNyY3lzPW51bGw7CiAgICAgICAgICBpZihjciYmY3I+MCl7CiAgICAgICAgICAgIGVHRlJjcmN5cz0xMzUqTWF0aC5wb3coTWF0aC5taW4oY3IvaywxKSxhKSpNYXRoLnBvdyhNYXRoLm1heChjci9rLDEpLC0wLjU0NCkqTWF0aC5wb3coTWF0aC5taW4oY3lzLzAuOCwxKSwtMC4zMjMpKk1hdGgucG93KE1hdGgubWF4KGN5cy8wLjgsMSksLTAuNzc4KSpNYXRoLnBvdygwLjk5NjEsYWdlKSpzZXhGY3JjeXM7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBiZXN0PWVHRlJjcmN5c3x8ZUdGUmN5czsKICAgICAgICAgIHJldHVybiB7dmFsOmJlc3QudG9GaXhlZCgxKSx1bml0OiJtTC9taW4vMS43M21cdTAwQjIiLHNlYzpgZUdGUihDeXMtb25seSk6ICR7ZUdGUmN5cy50b0ZpeGVkKDEpfSR7ZUdGUmNyY3lzP2AgfCBlR0ZSKENyLUN5cyk6ICR7ZUdGUmNyY3lzLnRvRml4ZWQoMSl9IOKAlCBwcmVmZXJyZWRgOiIgfCBDciBub3QgcHJvdmlkZWQ7IEN5cy1vbmx5IGVxdWF0aW9uIHVzZWQifWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBnZnI9K3IudmFsLCBjeXM9K3YuY3lzOwogICAgICAgICAgbGV0IHN0YWdlPWdmcj49OTA/IkcxIjpnZnI+PTYwPyJHMiI6Z2ZyPj00NT8iRzNhIjpnZnI+PTMwPyJHM2IiOmdmcj49MTU/Ikc0IjoiRzUiOwogICAgICAgICAgbGV0IG1zZz1gZUdGUiAke3IudmFsfSBtTC9taW4vMS43M21cdTAwQjIgKENLRCBzdGFnZSAke3N0YWdlfSkuIGA7CiAgICAgICAgICBpZihjeXM+MS4wJiYoIXYuc2NyfHwrdi5zY3I8MS4zKSkgbXNnKz1gQ3lzdGF0aW4gQyAke2N5c30gbWcvTCBpcyBlbGV2YXRlZCAocmVmIDwwLjk1KSB3aGlsZSBjcmVhdGluaW5lIHJlbWFpbnMgbmVhci1ub3JtYWwg4oCUIHRoaXMgcGF0dGVybiBzdWdnZXN0cyBlYXJseSBHRlIgZGVjbGluZSBkZXRlY3RhYmxlIGJ5IGN5c3RhdGluIEMgYmVmb3JlIGNyZWF0aW5pbmUgcmlzZXMgKGVzcGVjaWFsbHkgcmVsZXZhbnQgaW4gbG93IG11c2NsZSBtYXNzLCBlbGRlcmx5LCBvciBvbmNvbG9neSBwYXRpZW50cykuIGA7CiAgICAgICAgICBlbHNlIGlmKGN5cz4xLjIpIG1zZys9YEN5c3RhdGluIEMgJHtjeXN9IG1nL0wgaXMgZWxldmF0ZWQuIENvbnNpZGVyIG5vbi1HRlIgZGV0ZXJtaW5hbnRzOiBpbmZsYW1tYXRpb24sIHRoeXJvaWQgZHlzZnVuY3Rpb24sIG9iZXNpdHksIGNvcnRpY29zdGVyb2lkcy4gYDsKICAgICAgICAgIGlmKHYuc2NyJiYrdi5zY3I+MCkgbXNnKz1gQ3ItQ3lzIGNvbWJpbmVkIGVxdWF0aW9uIHVzZWQgKFAzMCB+OTElLCBtb3N0IGFjY3VyYXRlKS4gYDsKICAgICAgICAgIGVsc2UgbXNnKz1gQ3lzLW9ubHkgZXF1YXRpb24gdXNlZC4gRm9yIGJlc3QgYWNjdXJhY3ksIGNvbWJpbmUgd2l0aCBjcmVhdGluaW5lLiBgOwogICAgICAgICAgcmV0dXJuIHtjOmdmcj49NjA/IiMxNmEzNGEiOmdmcj49MzA/IiNjYThhMDQiOmdmcj49MTU/IiNlYTU4MGMiOiIjZGMyNjI2Iix0Om1zZytHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6Im1lYXNfY3JjbCIsIG5hbWU6Ik1lYXN1cmVkIENyZWF0aW5pbmUgQ2xlYXJhbmNlIiwgcmVmOiIjNCDCtyBTdGFuZGFyZCByZW5hbCBwaHlzaW9sb2d5IiwgdGFnOiIyNGggVXJpbmUgQ3JDbCIsCiAgICAgICAgZm9ybXVsYToiQ3JDbCA9IChVQ3Igw5cgVikgLyBQQ3JcblYgPSAyNGggdXJpbmUgdm9sdW1lIGluIG1ML21pbiAoZGl2aWRlIHRvdGFsIG1MIGJ5IDE0NDApIiwKICAgICAgICBub3RlOiJHb2xkLXN0YW5kYXJkIHRpbWVkIHVyaW5lIGNvbGxlY3Rpb24uIFZlcmlmeSBjb21wbGV0ZW5lc3M6IGV4cGVjdGVkIFVDciA9IDE14oCTMjUgbWcva2cvZGF5IChtZW4pLCAxMOKAkzIwIG1nL2tnL2RheSAod29tZW4pLiBPdmVyY29ycmVjdHMgR0ZSIGR1ZSB0byB0dWJ1bGFyIGNyZWF0aW5pbmUgc2VjcmV0aW9uICh+MTDigJMyMCUpLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoidWNyIixsYWJlbDoiVXJpbmUgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNjAifSwKICAgICAgICAgIHtpZDoidm9sIixsYWJlbDoiMjRoIFVyaW5lIFZvbHVtZSIsdW5pdDoibUwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMTUwMCJ9LAogICAgICAgICAge2lkOiJwY3IiLGxhYmVsOiJQbGFzbWEgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMS4yIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgdWM9K3YudWNyLHZvbD0rdi52b2wscGM9K3YucGNyOyBpZighdWN8fCF2b2x8fCFwY3x8cGM8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgdnBtPXZvbC8xNDQwOwogICAgICAgICAgcmV0dXJuIHt2YWw6KCh1Yyp2cG0pL3BjKS50b0ZpeGVkKDEpLHVuaXQ6Im1ML21pbiIsc2VjOmBWID0gJHt2cG0udG9GaXhlZCgzKX0gbUwvbWluYH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY+PTYwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YCR7ci52YWx9IG1ML21pbiDigJQgTm9ybWFsIGNsZWFyYW5jZS4gTm90ZTogbWVhc3VyZWQgQ3JDbCBzbGlnaHRseSBvdmVyZXN0aW1hdGVzIHRydWUgR0ZSIGR1ZSB0byB0dWJ1bGFyIHNlY3JldGlvbi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTMwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YCR7ci52YWx9IG1ML21pbiDigJQgTW9kZXJhdGUgaW1wYWlybWVudC4gQ29ycmVsYXRlIHdpdGggQ0tELUVQSSBlR0ZSLiBDaGVjayAyNGggY29sbGVjdGlvbiBjb21wbGV0ZW5lc3MuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YCR7ci52YWx9IG1ML21pbiDigJQgU2V2ZXJlIGltcGFpcm1lbnQuIE5lcGhyb2xvZ3kgcmV2aWV3LiBWZXJpZnkgY29sbGVjdGlvbiBhZGVxdWFjeSBiZWZvcmUgY2xpbmljYWwgdXNlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJnZW5fY2xlYXIiLCBuYW1lOiJHZW5lcmFsIENsZWFyYW5jZSIsIHJlZjoiIzUgwrcgU3RhbmRhcmQgcmVuYWwgcGh5c2lvbG9neSIsIHRhZzoiUmVuYWwgQ2xlYXJhbmNlIFByaW5jaXBsZSIsCiAgICAgICAgZm9ybXVsYToiQ3ggPSAoVXggw5cgVsyHKSAvIFB4IiwKICAgICAgICBub3RlOiJGdW5kYW1lbnRhbCByZW5hbCBjbGVhcmFuY2UgZXF1YXRpb24uIEN4ID0gdm9sdW1lIG9mIHBsYXNtYSBjb21wbGV0ZWx5IGNsZWFyZWQgb2Ygc3Vic3RhbmNlIFggcGVyIHVuaXQgdGltZS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InV4IixsYWJlbDoiVXJpbmUgY29uY2VudHJhdGlvbiBvZiBYIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiA4MCJ9LAogICAgICAgICAge2lkOiJ2IixsYWJlbDoiVXJpbmUgZmxvdyByYXRlIChWzIcpIix1bml0OiJtTC9taW4iLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMS4wNCJ9LAogICAgICAgICAge2lkOiJweCIsbGFiZWw6IlBsYXNtYSBjb25jZW50cmF0aW9uIG9mIFgiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDEuMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHV4PSt2LnV4LHZyPSt2LnYscHg9K3YucHg7IGlmKCF1eHx8IXZyfHwhcHh8fHB4PD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigodXgqdnIpL3B4KS50b0ZpeGVkKDIpLHVuaXQ6Im1ML21pbiJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgcmV0dXJuIHtjOiIjMjU2M2ViIix0OmBDbGVhcmFuY2Ugb2YgWCA9ICR7ci52YWx9IG1ML21pbi4gSWYgc3Vic3RhbmNlIGlzIGZyZWVseSBmaWx0ZXJlZCBhbmQgbm90IHNlY3JldGVkL3JlYWJzb3JiZWQsIHRoaXMgYXBwcm94aW1hdGVzIEdGUi4gQ2xlYXJhbmNlID4gR0ZSIOKGkiBuZXQgdHVidWxhciBzZWNyZXRpb24uIENsZWFyYW5jZSA8IEdGUiDihpIgbmV0IHR1YnVsYXIgcmVhYnNvcnB0aW9uLmB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJlcnBmIiwgbmFtZToiRVJQRiAoUEFIIENsZWFyYW5jZSkiLCByZWY6IiM2IMK3IFNtaXRoIEhXLCAxOTM3IiwgdGFnOiJSZW5hbCBQbGFzbWEgRmxvdyIsCiAgICAgICAgZm9ybXVsYToiRVJQRiA9IChVUEFIIMOXIFbMhykgLyBQUEFIIiwKICAgICAgICBub3RlOiJQQUggaXMgfjkwJSBleHRyYWN0ZWQgaW4gb25lIHBhc3Mg4oaSIEVSUEYg4omIIHRydWUgUlBGLiBVc2VkIHdpdGggR0ZSIHRvIGNhbGN1bGF0ZSBmaWx0cmF0aW9uIGZyYWN0aW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoidXBhaCIsbGFiZWw6IlVyaW5lIFBBSCBjb25jZW50cmF0aW9uIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxMjAifSwKICAgICAgICAgIHtpZDoidiIsbGFiZWw6IlVyaW5lIGZsb3cgcmF0ZSAoVsyHKSIsdW5pdDoibUwvbWluIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDEuMDQifSwKICAgICAgICAgIHtpZDoicHBhaCIsbGFiZWw6IlBsYXNtYSBQQUggY29uY2VudHJhdGlvbiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMC4yIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgdT0rdi51cGFoLHZyPSt2LnYscD0rdi5wcGFoOyBpZighdXx8IXZyfHwhcHx8cDw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKHUqdnIpL3ApLnRvRml4ZWQoMCksdW5pdDoibUwvbWluIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY+PTUwMCYmdjw9NzAwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEVSUEYgJHtyLnZhbH0gbUwvbWluIOKAlCBXaXRoaW4gbm9ybWFsIHJhbmdlICg1MDDigJM3MDApLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjw1MDApIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgRVJQRiAke3IudmFsfSBtTC9taW4g4oCUIFJlZHVjZWQgKDw1MDApLiBQb3NzaWJsZSBjYXVzZXMgaW5jbHVkZSByZWR1Y2VkIHJlbmFsIG1hc3MsIHJlbm92YXNjdWxhciBkaXNlYXNlLCB2b2x1bWUgZGVwbGV0aW9uLCBjYXJkaW9yZW5hbCBzeW5kcm9tZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgRVJQRiAke3IudmFsfSBtTC9taW4g4oCUIEVsZXZhdGVkICg+NzAwKS4gTWF5IGJlIGNvbnNpc3RlbnQgd2l0aCBlYXJseSBkaWFiZXRpYyBoeXBlcmZpbHRyYXRpb24gb3IgdmFzb2RpbGF0b3J5IHN0YXRlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJmZiIsIG5hbWU6IkZpbHRyYXRpb24gRnJhY3Rpb24iLCByZWY6IiM3IMK3IFN0YW5kYXJkIHJlbmFsIHBoeXNpb2xvZ3kiLCB0YWc6Ikdsb21lcnVsYXIgSGVtb2R5bmFtaWNzIiwKICAgICAgICBmb3JtdWxhOiJGRiA9IEdGUiAvIEVSUEYiLAogICAgICAgIG5vdGU6Ik5vcm1hbCBGRiA9IDAuMTXigJMwLjIwICgxNeKAkzIwJSkuIEVsZXZhdGVkIEZGIHN1Z2dlc3RzIGVmZmVyZW50IGFydGVyaW9sYXIgY29uc3RyaWN0aW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiZ2ZyIixsYWJlbDoiR0ZSIix1bml0OiJtTC9taW4iLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMTIwIn0sCiAgICAgICAgICB7aWQ6ImVycGYiLGxhYmVsOiJFUlBGIix1bml0OiJtTC9taW4iLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNjUwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgZz0rdi5nZnIsZT0rdi5lcnBmOyBpZighZ3x8IWV8fGU8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KGcvZSoxMDApLnRvRml4ZWQoMSksdW5pdDoiJSJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2Pj0xNSYmdjw9MjApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRkYgJHtyLnZhbH0lIOKAlCBOb3JtYWwgKDE14oCTMjAlKS4gR2xvbWVydWxhciBoYWVtb2R5bmFtaWNzIGFwcGVhciBpbnRhY3QuYH07CiAgICAgICAgICBpZih2PjIwKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YEZGICR7ci52YWx9JSDigJQgRWxldmF0ZWQgKD4yMCUpLiBDb25zaXN0ZW50IHdpdGggZWZmZXJlbnQgYXJ0ZXJpb2xhciBjb25zdHJpY3Rpb24sIGVhcmx5IGRpYWJldGljIG5lcGhyb3BhdGh5LCBvciBuZXBocm90aWMgc3luZHJvbWUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEZGICR7ci52YWx9JSDigJQgQmVsb3cgbm9ybWFsICg8MTUlKS4gTWF5IHJlZmxlY3QgYWZmZXJlbnQgYXJ0ZXJpb2xhciBkaWxhdGlvbiBvciB2YXNvZGlsYXRvcnkgc3RhdGUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6Im5mcCIsIG5hbWU6Ik5ldCBGaWx0cmF0aW9uIFByZXNzdXJlIiwgcmVmOiIjOCDCtyBHdXl0b24gJiBIYWxsIE1lZGljYWwgUGh5c2lvbG9neSIsIHRhZzoiR2xvbWVydWxhciBEcml2aW5nIEZvcmNlIiwKICAgICAgICBmb3JtdWxhOiJORlAgPSBQR0Mg4oiSIFBCUyDiiJIgz4BHQyIsCiAgICAgICAgbm90ZToiTm9ybWFsIHZhbHVlczogUEdDIOKJiCA2MCBtbUhnLCBQQlMg4omIIDE4IG1tSGcsIM+AR0Mg4omIIDMyIG1tSGcg4oaSIE5GUCDiiYggMTAgbW1IZy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InBnYyIsbGFiZWw6IlBHQyDigJQgR2xvbWVydWxhciBjYXBpbGxhcnkgaHlkcm9zdGF0aWMgcHJlc3N1cmUiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6IjYwIn0sCiAgICAgICAgICB7aWQ6InBicyIsbGFiZWw6IlBCUyDigJQgQm93bWFuJ3Mgc3BhY2UgaHlkcm9zdGF0aWMgcHJlc3N1cmUiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6IjE4In0sCiAgICAgICAgICB7aWQ6InBnY19vbmMiLGxhYmVsOiLPgEdDIOKAlCBHbG9tZXJ1bGFyIGNhcGlsbGFyeSBvbmNvdGljIHByZXNzdXJlIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiIzMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHBnYz0rdi5wZ2MscGJzPSt2LnBicyxvbmM9K3YucGdjX29uYzsgaWYoIXBnY3x8IXBic3x8IW9uYykgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDoocGdjLXBicy1vbmMpLnRvRml4ZWQoMSksdW5pdDoibW1IZyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PjApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgTkZQID0gJHtyLnZhbH0gbW1IZyDigJQgUG9zaXRpdmUuIEFjdGl2ZSBmaWx0cmF0aW9uIG9jY3VycmluZy5gfTsKICAgICAgICAgIGlmKHY9PT0wKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YE5GUCA9IDAgbW1IZyDigJQgRmlsdHJhdGlvbiBlcXVpbGlicml1bS4gR0ZSID0gMCBhdCB0aGlzIHBvaW50LmB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBORlAgPSAke3IudmFsfSBtbUhnIOKAlCBOZWdhdGl2ZS4gTmV0IGZpbHRyYXRpb24gaW1wb3NzaWJsZS4gQ29uc2lkZXIgZWxldmF0ZWQgUEJTIChvYnN0cnVjdGlvbiksIHJlZHVjZWQgUEdDIChzaG9jayksIG9yIGVsZXZhdGVkIG9uY290aWMgcHJlc3N1cmUuYH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InN0YXJsaW5nIiwgbmFtZToiU3RhcmxpbmcgRXF1YXRpb24iLCByZWY6IiM5IMK3IFN0YXJsaW5nIEVILCBKIFBoeXNpb2wgMTg5NiIsIHRhZzoiT2VkZW1hIFBoeXNpb2xvZ3kiLAogICAgICAgIGZvcm11bGE6Ikp2ID0gS2YgWyhQYyDiiJIgUGkpIOKIkiDPgyjPgGMg4oiSIM+AaSldIiwKICAgICAgICBub3RlOiJHb3Zlcm5zIGZsdWlkIG1vdmVtZW50IGFjcm9zcyBjYXBpbGxhcnkgbWVtYnJhbmVzLiBSZWxldmFudCB0byBnbG9tZXJ1bGFyIGZpbHRyYXRpb24sIHB1bG1vbmFyeSBvZWRlbWEsIGFuZCBuZXBocm90aWMgb2VkZW1hLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoicGMiLGxhYmVsOiJQYyDigJQgQ2FwaWxsYXJ5IGh5ZHJvc3RhdGljIHByZXNzdXJlIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiIzNSJ9LAogICAgICAgICAge2lkOiJwaSIsbGFiZWw6IlBpIOKAlCBJbnRlcnN0aXRpYWwgaHlkcm9zdGF0aWMgcHJlc3N1cmUiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6IuKIkjIifSwKICAgICAgICAgIHtpZDoicGljIixsYWJlbDoiz4BjIOKAlCBDYXBpbGxhcnkgb25jb3RpYyBwcmVzc3VyZSIsdW5pdDoibW1IZyIsdHlwZToibnVtYmVyIixwaDoiMjgifSwKICAgICAgICAgIHtpZDoicGlpIixsYWJlbDoiz4BpIOKAlCBJbnRlcnN0aXRpYWwgb25jb3RpYyBwcmVzc3VyZSIsdW5pdDoibW1IZyIsdHlwZToibnVtYmVyIixwaDoiNSJ9LAogICAgICAgICAge2lkOiJzaWdtYSIsbGFiZWw6Is+DIOKAlCBSZWZsZWN0aW9uIGNvZWZmaWNpZW50ICgw4oCTMSkiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiMC45In0sCiAgICAgICAgICB7aWQ6ImtmIixsYWJlbDoiS2Yg4oCUIEZpbHRyYXRpb24gY29lZmZpY2llbnQiLHVuaXQ6Im1ML21pbi9tbUhnIix0eXBlOiJudW1iZXIiLHBoOiIxLjAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBwYz0rdi5wYyxwaT0rdi5waSxwaWM9K3YucGljLHBpaT0rdi5waWkscz0rdi5zaWdtYSxrZj0rdi5rZjsKICAgICAgICAgIGlmKCFwY3x8IXBpY3x8IXN8fCFrZikgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooa2YqKChwYy1waSktcyoocGljLXBpaSkpKS50b0ZpeGVkKDIpLHVuaXQ6Im1ML21pbiAoSnYpIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY+MCkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBKdiA9ICR7ci52YWx9IG1ML21pbiDigJQgTmV0IGZpbHRyYXRpb24gKGZsdWlkIGxlYXZpbmcgY2FwaWxsYXJ5KS4gUG9zaXRpdmUgdmFsdWVzIGRyaXZlIG9lZGVtYSBmb3JtYXRpb24uYH07CiAgICAgICAgICBpZih2PDApIHJldHVybiB7YzoiIzI1NjNlYiIsdDpgSnYgPSAke3IudmFsfSBtTC9taW4g4oCUIE5ldCByZWFic29ycHRpb24gKGZsdWlkIHJldHVybmluZyB0byBjYXBpbGxhcnkpLmB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBKdiA9IDAg4oCUIFN0YXJsaW5nIGVxdWlsaWJyaXVtLiBObyBuZXQgZmx1aWQgbW92ZW1lbnQuYH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6Im9uY290aWMiLCBuYW1lOiJPbmNvdGljIFByZXNzdXJlIiwgcmVmOiIjMTAgwrcgWndlaWZhY2ggJiBJbnRhZ2xpZXR0YSwgTWljcm92YXNjIFJlcyAxOTY4IiwgdGFnOiJQcm90ZWluIE9uY290aWMgRm9yY2UiLAogICAgICAgIGZvcm11bGE6Is+AID0gMi4xQyArIDAuMTZDwrIgKyAwLjAwOUPCsyAoTGFuZGlzLVBhcHBlbmhlaW1lcikiLAogICAgICAgIG5vdGU6Ik5vcm1hbCBzZXJ1bSBvbmNvdGljIHByZXNzdXJlIOKJiCAyNeKAkzI4IG1tSGcgKGFsYnVtaW4gfjQgZy9kTCkuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJhbGIiLGxhYmVsOiJBbGJ1bWluIGNvbmNlbnRyYXRpb24iLHVuaXQ6ImcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMi4wIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgYz0rdi5hbGI7IGlmKCFjfHxjPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigyLjEqYyswLjE2KmMqYyswLjAwOSpjKmMqYykudG9GaXhlZCgxKSx1bml0OiJtbUhnIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY+PTI1KSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YM+AID0gJHtyLnZhbH0gbW1IZyDigJQgTm9ybWFsIG9uY290aWMgcHJlc3N1cmUuIEFkZXF1YXRlIGZvcmNlIHRvIHJldGFpbiBpbnRyYXZhc2N1bGFyIGZsdWlkLmB9OwogICAgICAgICAgaWYodj49MTUpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgz4AgPSAke3IudmFsfSBtbUhnIOKAlCBSZWR1Y2VkLiBPZWRlbWEgcmlzayBpbmNyZWFzZWQuIE1vbml0b3IgZmx1aWQgYmFsYW5jZS5gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgz4AgPSAke3IudmFsfSBtbUhnIOKAlCBTZXZlcmVseSByZWR1Y2VkICg8MTUpLiBBbGJ1bWluIGNyaXRpY2FsbHkgbG93LiBQcm9mb3VuZCBvZWRlbWEgZXhwZWN0ZWQuIENvbnNpZGVyIElWIGFsYnVtaW4gYmVmb3JlIGxvb3AgZGl1cmV0aWNzIGluIHJlZnJhY3RvcnkgbmVwaHJvdGljIG9lZGVtYS5gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICBdCiAgfSwKCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgLy8gSUkuIFNPRElVTSwgRkxVSUQgJiBPU01PTEFMSVRZLAogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHsKICAgIGlkOiJzMiIsIGxhYmVsOiJTb2RpdW0sIEZsdWlkICYgT3Ntb2xhbGl0eSIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoiZmVuYSIsIG5hbWU6IkZFTmEiLCByZWY6IktESUdPIEFLSSAyMDEyIiwgdGFnOiJBS0kgV29ya3VwIiwKICAgICAgICBmb3JtdWxhOiJGRU5hICglKSA9IFsoVU5hIC8gUE5hKSDDtyAoVUNyIC8gUENyKV0gw5cgMTAwIiwKICAgICAgICBub3RlOiJQcmUtcmVuYWw6IEZFTmEgPDElLiBJbnRyaW5zaWMgKEFUTik6IEZFTmEg4omlMiUuIE5PVCB2YWxpZCBvbiBkaXVyZXRpY3Mg4oCUIHVzZSBGRVVyZWEgaW5zdGVhZC4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVuYSIsbGFiZWw6IlVyaW5lIFNvZGl1bSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjIwIn0sCiAgICAgICAgICB7aWQ6InBuYSIsbGFiZWw6IlBsYXNtYSBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIxNDAifSwKICAgICAgICAgIHtpZDoidWNyIixsYWJlbDoiVXJpbmUgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjgwIn0sCiAgICAgICAgICB7aWQ6InBjciIsbGFiZWw6IlBsYXNtYSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi4wIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgdW49K3YudW5hLHBuPSt2LnBuYSx1Yz0rdi51Y3IscGM9K3YucGNyOyBpZighdW58fCFwbnx8IXVjfHwhcGN8fHBuPD0wfHx1Yzw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKHVuL3BuKS8odWMvcGMpKjEwMCkudG9GaXhlZCgyKSx1bml0OiIlIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8MSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OiJGRU5hICIrci52YWwrIiUgKDwxJSkg4oCUIFByZS1yZW5hbCBwYXR0ZXJuIG9yIGhlcGF0b3JlbmFsIHN5bmRyb21lLiBBdmlkIHNvZGl1bSByZXRlbnRpb24gc3VnZ2VzdHMgcmVkdWNlZCBlZmZlY3RpdmUgY2lyY3VsYXRpbmcgdm9sdW1lLiBGRU5hIGlzIHVucmVsaWFibGUgb24gZGl1cmV0aWNzIOKAlCB1c2UgRkVVcmVhIGluc3RlYWQuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgaWYodjwyKSByZXR1cm4ge2M6IiNmNTllMGIiLHQ6IkZFTmEgIityLnZhbCsiJSAoMeKAkzIlKSDigJQgSW5kZXRlcm1pbmF0ZS4gRkVVcmVhLCB1cmluZSBtaWNyb3Njb3B5LCBhbmQgZnVsbCBjbGluaWNhbCBhc3Nlc3NtZW50IHdvdWxkIGhlbHAgY2xhcmlmeS4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6IkZFTmEgIityLnZhbCsiJSAo4omlMiUpIOKAlCBDb25zaXN0ZW50IHdpdGggaW50cmluc2ljIHJlbmFsIEFLSSAoQVROIG9yIEFJTikuIFVyaW5lIG1pY3Jvc2NvcHkgZm9yIG11ZGR5LWJyb3duIGNhc3RzIGFuZCBjbGluaWNhbCBjb3JyZWxhdGlvbiByZWNvbW1lbmRlZC4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImZldW4iLCBuYW1lOiJGRVVyZWEiLCByZWY6IkNhcnZvdW5pcyBldCBhbC4sIE5FSk0gMjAwMiIsIHRhZzoiQUtJIG9uIERpdXJldGljcyIsCiAgICAgICAgZm9ybXVsYToiRkVVcmVhICglKSA9IFsoVVVyZWEgLyBQVXJlYSkgw7cgKFVDciAvIFBDcildIMOXIDEwMCIsCiAgICAgICAgbm90ZToiUHJlZmVycmVkIG92ZXIgRkVOYSBvbiBkaXVyZXRpY3MuIFByZS1yZW5hbDogPDM1JS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InV1cmVhIixsYWJlbDoiVXJpbmUgVXJlYSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjMwMCJ9LAogICAgICAgICAge2lkOiJwdXVyZWEiLGxhYmVsOiJQbGFzbWEgVXJlYSAoQlVOKSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIwIn0sCiAgICAgICAgICB7aWQ6InVjciIsbGFiZWw6IlVyaW5lIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI4MCJ9LAogICAgICAgICAge2lkOiJwY3IiLGxhYmVsOiJQbGFzbWEgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuMCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHV1PSt2LnV1cmVhLHB1PSt2LnB1dXJlYSx1Yz0rdi51Y3IscGM9K3YucGNyOyBpZighdXV8fCFwdXx8IXVjfHwhcGN8fHB1PD0wfHx1Yzw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKHV1L3B1KS8odWMvcGMpKjEwMCkudG9GaXhlZCgxKSx1bml0OiIlIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8MzUpIHJldHVybiB7YzoiI2NhOGEwNCIsdDoiRkVVcmVhICIrci52YWwrIiUgKDwzNSUpIOKAlCBQcmUtcmVuYWwgcGF0dGVybi4gTWF4aW1hbCB1cmVhIHJldGVudGlvbi4gUHJlZmVycmVkIG1hcmtlciBvbiBkaXVyZXRpY3MuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OiJGRVVyZWEgIityLnZhbCsiJSAo4omlMzUlKSDigJQgQ29uc2lzdGVudCB3aXRoIGludHJpbnNpYyByZW5hbCBBS0kuIFR1YnVsYXIgdXJlYS1oYW5kbGluZyBpbXBhaXJlZC4gTm90IHNpZ25pZmljYW50bHkgYWZmZWN0ZWQgYnkgZGl1cmV0aWNzLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoib3NtZ2FwIiwgbmFtZToiT3Ntb2xhciBHYXAiLCByZWY6IlNtaXRobGluZSAmIEdhcmRuZXIsIEFubiBFbWVyZyBNZWQgMTk3NiIsIHRhZzoiVG94aWMgQWxjb2hvbCBTY3JlZW4iLAogICAgICAgIGZvcm11bGE6IkNhbGN1bGF0ZWQgT3NtID0gMsOXTmEgKyBCVU4vMi44ICsgR2x1Y29zZS8xOFxuT3Ntb2xhciBHYXAgPSBNZWFzdXJlZCDiiJIgQ2FsY3VsYXRlZCIsCiAgICAgICAgbm90ZToiTm9ybWFsIOKJpDEwIG1Pc20va2cuIEVsZXZhdGVkIGluIHRveGljIGFsY29ob2xzLCBtYW5uaXRvbCwgc2V2ZXJlIHVyYWVtaWEuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJuYSIsbGFiZWw6IlNvZGl1bSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjE0MCJ9LAogICAgICAgICAge2lkOiJidW4iLGxhYmVsOiJCVU4iLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIxNCJ9LAogICAgICAgICAge2lkOiJnbGMiLGxhYmVsOiJHbHVjb3NlIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMTAwIn0sCiAgICAgICAgICB7aWQ6Im1vc20iLGxhYmVsOiJNZWFzdXJlZCBPc21vbGFsaXR5Iix1bml0OiJtT3NtL2tnIix0eXBlOiJudW1iZXIiLHBoOiIyOTUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBuYT0rdi5uYSxidW49K3YuYnVuLGdsYz0rdi5nbGMsbW89K3YubW9zbTsgaWYoIW5hfHwhYnVufHwhZ2xjfHwhbW8pIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgY2FsYz0yKm5hK2J1bi8yLjgrZ2xjLzE4OwogICAgICAgICAgcmV0dXJuIHt2YWw6KG1vLWNhbGMpLnRvRml4ZWQoMSksdW5pdDoibU9zbS9rZyIsc2VjOiJDYWxjdWxhdGVkIE9zbTogIitjYWxjLnRvRml4ZWQoMCkrIiBtT3NtL2tnIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8PTEwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6Ik9zbW9sYXIgZ2FwICIrci52YWwrIiBtT3NtL2tnIOKAlCBOb3JtYWwgKOKJpDEwKS4gTm8gc2lnbmlmaWNhbnQgdW5tZWFzdXJlZCBvc21vbGVzIGlkZW50aWZpZWQuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgaWYodjw9MjApIHJldHVybiB7YzoiI2NhOGEwNCIsdDoiT3Ntb2xhciBnYXAgIityLnZhbCsiIG1Pc20va2cg4oCUIE1pbGRseSBlbGV2YXRlZCAoMTDigJMyMCkuIENvbnNpZGVyIGVhcmx5IHRveGljIGFsY29ob2wsIG1hbm5pdG9sLCBwcm9weWxlbmUgZ2x5Y29sLCBvciBzZXZlcmUgdXJhZW1pYS4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6Ik9zbW9sYXIgZ2FwICIrci52YWwrIiBtT3NtL2tnIOKAlCBTaWduaWZpY2FudGx5IGVsZXZhdGVkICg+MjApLiBVcmdlbnQgYXNzZXNzbWVudCBmb3IgdG94aWMgYWxjb2hvbCAobWV0aGFub2wsIGV0aHlsZW5lIGdseWNvbCwgaXNvcHJvcGFub2wpIHdhcnJhbnRlZC4gT2J0YWluIEFCRyDigJQgaGlnaCBBRyArIGhpZ2ggb3Ntb2xhciBnYXAgaXMgaGlnaGx5IHN1Z2dlc3RpdmUuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJuYWRlZiIsIG5hbWU6IlNvZGl1bSBEZWZpY2l0IiwgcmVmOiJBZHJvZ3VlICYgTWFkaWFzLCBORUpNIDIwMDAiLCB0YWc6Ikh5cG9uYXRyYWVtaWEgQ29ycmVjdGlvbiIsCiAgICAgICAgZm9ybXVsYToiTmEgRGVmaWNpdCA9IFRCVyDDlyAoVGFyZ2V0IE5hIOKIkiBDdXJyZW50IE5hKSIsCiAgICAgICAgbm90ZToiQ1JJVElDQUw6IEluIGNocm9uaWMgaHlwb25hdHJhZW1pYSAoPjQ4aCksIGNvcnJlY3Qg4omkOOKAkzEwIG1FcS9MIHBlciAyNGggdG8gcHJldmVudCBPRFMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ0YnciLGxhYmVsOiJUb3RhbCBCb2R5IFdhdGVyIChUQlcpIix1bml0OiJMIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDQyIn0sCiAgICAgICAgICB7aWQ6InRhcmdldCIsbGFiZWw6IlRhcmdldCBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIxMzAifSwKICAgICAgICAgIHtpZDoiY3VycmVudCIsbGFiZWw6IkN1cnJlbnQgU29kaXVtIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMTE1In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgdGJ3PSt2LnRidyx0Z3Q9K3YudGFyZ2V0LGN1cj0rdi5jdXJyZW50OyBpZighdGJ3fHwhdGd0fHwhY3VyKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOih0YncqKHRndC1jdXIpKS50b0ZpeGVkKDApLHVuaXQ6Im1FcSBOYSByZXF1aXJlZCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBkPStyLnZhbCxyaXNlPSt2LnRhcmdldC0rdi5jdXJyZW50OwogICAgICAgICAgaWYoZDw9MCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OiJObyBzb2RpdW0gZGVmaWNpdCBhdCB0YXJnZXQuIEN1cnJlbnQgTmEg4omlIHRhcmdldC4ifTsKICAgICAgICAgIHJldHVybiB7YzoiI2VhNTgwYyIsdDpyLnZhbCsiIG1FcSBOYSBuZWVkZWQgdG8gcmFpc2UgYnkgIityaXNlKyIgbUVxL0wuIFNBRkVUWTog4omkOOKAkzEwIG1FcS9MIHBlciAyNGggKGNocm9uaWMgaHlwb25hdHJhZW1pYSkuIE1vbml0b3IgTmEgcTLigJM0aC4gSWYgb3ZlcmNvcnJlY3Rpb246IEREQVZQIHJlc2N1ZSBwcm90b2NvbC4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6Im5hY29ycl9nbHVjb3NlIiwgbmFtZToiU29kaXVtIENvcnJlY3Rpb24g4oCUIEh5cGVyZ2x5Y2FlbWlhIiwgcmVmOiJLYXR6IE1BLiBORUpNIDE5NzMgfCBIaWxsaWVyIFRBIGV0IGFsLiBBbSBKIE1lZCAxOTk5IiwgdGFnOiJDb3JyZWN0ZWQgU29kaXVtIC8gSHlwZXJnbHljYWVtaWEiLAogICAgICAgIGZvcm11bGE6IkthdHogMS42OiBDb3JyZWN0ZWQgTmEgPSBOYSArIDEuNiDDlyBbKEdsdWNvc2Ug4oiSIDEwMCkgLyAxMDBdXG5IaWxsaWVyIDIuNDogQ29ycmVjdGVkIE5hID0gTmEgKyAyLjQgw5cgWyhHbHVjb3NlIOKIkiAxMDApIC8gMTAwXSIsCiAgICAgICAgbm90ZToiSGlsbGllciAyLjQgcHJlZmVycmVkIGF0IGdsdWNvc2UgPjQwMCBtZy9kTC4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Im5hIixsYWJlbDoiTWVhc3VyZWQgU29kaXVtIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxMzAifSwKICAgICAgICAgIHtpZDoiZ2xjIixsYWJlbDoiQmxvb2QgR2x1Y29zZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNDUwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgbmE9K3YubmEsIGdsYz0rdi5nbGM7CiAgICAgICAgICBpZighbmF8fCFnbGN8fGdsYzw9MTAwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGthdHo9bmErMS42KigoZ2xjLTEwMCkvMTAwKTsKICAgICAgICAgIGNvbnN0IGhpbGxpZXI9bmErMi40KigoZ2xjLTEwMCkvMTAwKTsKICAgICAgICAgIHJldHVybiB7dmFsOmthdHoudG9GaXhlZCgxKSx1bml0OiJtRXEvTCAoS2F0eiAxLjYpIixzZWM6IkhpbGxpZXIgMi40OiAiK2hpbGxpZXIudG9GaXhlZCgxKSsiIG1FcS9MIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IG5hPSt2Lm5hLCBnbGM9K3YuZ2xjOwogICAgICAgICAgY29uc3Qga2F0ej1uYSsxLjYqKChnbGMtMTAwKS8xMDApOwogICAgICAgICAgY29uc3QgaGlsbGllcj1uYSsyLjQqKChnbGMtMTAwKS8xMDApOwogICAgICAgICAgY29uc3QgcHJlZmVycmVkPWdsYz40MDA/aGlsbGllcjprYXR6OwogICAgICAgICAgY29uc3QgbGFiZWw9Z2xjPjQwMD8iSGlsbGllciAyLjQiOiJLYXR6IDEuNiI7CiAgICAgICAgICBpZihwcmVmZXJyZWQ8MTM1KSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6IkNvcnJlY3RlZCBOYSAiK3ByZWZlcnJlZC50b0ZpeGVkKDEpKyIgbUVxL0wgKCIrbGFiZWwrIikg4oCUIFRydWUgaHlwb25hdHJhZW1pYSBhZnRlciBnbHVjb3NlIGNvcnJlY3Rpb24uICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgaWYocHJlZmVycmVkPDE0NSkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OiJDb3JyZWN0ZWQgTmEgIitwcmVmZXJyZWQudG9GaXhlZCgxKSsiIG1FcS9MICgiK2xhYmVsKyIpIOKAlCBOb3JtYWwgcmFuZ2UuIERpbHV0aW9uYWwgaHlwb25hdHJhZW1pYSBmcm9tIGh5cGVyZ2x5Y2FlbWlhLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICAgIHJldHVybiB7YzoiI2NhOGEwNCIsdDoiQ29ycmVjdGVkIE5hICIrcHJlZmVycmVkLnRvRml4ZWQoMSkrIiBtRXEvTCAoIitsYWJlbCsiKSDigJQgSHlwZXJuYXRyYWVtaWEuIFNpZ25pZmljYW50IGZyZWUgd2F0ZXIgZGVmaWNpdCBjb2V4aXN0aW5nIHdpdGggaHlwZXJnbHljYWVtaWEuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJmd2QiLCBuYW1lOiJGcmVlIFdhdGVyIERlZmljaXQiLCByZWY6IkFkcm9ndWUgJiBNYWRpYXMsIE5FSk0gMjAwMCIsIHRhZzoiSHlwZXJuYXRyYWVtaWEg4oCUIEZyZWUgV2F0ZXIgUmVwbGFjZW1lbnQiLAogICAgICAgIGZvcm11bGE6IkZXRCA9IFRCVyDDlyBbKE5hIC8gMTQwKSDiiJIgMV0iLAogICAgICAgIG5vdGU6IkNvcnJlY3Qg4omkMTDigJMxMiBtRXEvTCBwZXIgMjRoIHRvIGF2b2lkIGNlcmVicmFsIG9lZGVtYS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Im5hIixsYWJlbDoiQ3VycmVudCBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDE2MCJ9LAogICAgICAgICAge2lkOiJ3dCIsbGFiZWw6IldlaWdodCIsdW5pdDoia2ciLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNzAifSwKICAgICAgICAgIHtpZDoic2V4X2FnZSIsbGFiZWw6IlNleCAmIEFnZSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTWFsZSAoYWR1bHQpIiwiRmVtYWxlIG9yIGVsZGVybHkgbWFsZSIsIkVsZGVybHkgZmVtYWxlICg+NjV5KSJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBuYT0rdi5uYSwgd3Q9K3Yud3Q7CiAgICAgICAgICBpZighbmF8fCF3dHx8bmE8PTE0MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCB0YndGcmFjPXYuc2V4X2FnZT09PSJNYWxlIChhZHVsdCkiPzAuNjp2LnNleF9hZ2U9PT0iRmVtYWxlIG9yIGVsZGVybHkgbWFsZSI/MC41OjAuNDU7CiAgICAgICAgICBjb25zdCB0Ync9dGJ3RnJhYyp3dDsKICAgICAgICAgIGNvbnN0IGZ3ZD10YncqKChuYS8xNDApLTEpOwogICAgICAgICAgcmV0dXJuIHt2YWw6ZndkLnRvRml4ZWQoMSksdW5pdDoiTCBmcmVlIHdhdGVyIGRlZmljaXQiLHNlYzoiVEJXOiAiK3Ridy50b0ZpeGVkKDEpKyIgTCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBmd2Q9K3IudmFsLCBuYT0rdi5uYTsKICAgICAgICAgIGNvbnN0IGRlZmljaXQ9bmEtMTQwOwogICAgICAgICAgcmV0dXJuIHtjOiBkZWZpY2l0PjE1PyIjZGMyNjI2IjpkZWZpY2l0PjEwPyIjZWE1ODBjIjoiI2NhOGEwNCIsCiAgICAgICAgICAgIHQ6IkZyZWUgd2F0ZXIgZGVmaWNpdCBhcHByb3hpbWF0ZWx5ICIrci52YWwrIiBMLiBSZXBsYWNlIG92ZXIgYXQgbGVhc3QgIitNYXRoLmNlaWwoZGVmaWNpdC8xMCkqMjQrImggKOKJpDEw4oCTMTIgbUVxL0wgcGVyIDI0aCkuIFNlcmlhbCBOYSBxNOKAkzZoLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiY3N3X3NpYWRoIiwgbmFtZToiQ1NXIHZzIFNJQURIIERpZmZlcmVudGlhdG9yIiwgcmVmOiJGZW5za2UgVyBldCBhbC4sIEpDRU0gMjAwODs5MzoyOTkxLTI5OTc7IE1hZXNha2EgSksgZXQgYWwuLCBBSktEIDIwMDk7NTM6Nzc1LTc4OTsgQml0ZXcgUyBldCBhbC4sIEFtIEogRW1lcmcgTWVkIDIwMDk7Mjc6MTA4Ni0xMDkzIiwgdGFnOiJIeXBvbmF0cmFlbWlhIOKAlCBDZXJlYnJhbCBTYWx0IFdhc3RpbmcgdnMgU0lBREgiLAogICAgICAgIGZvcm11bGE6IkZFVXJhdGUgKCUpID0gKFVyaW5lIFVyaWMgQWNpZCDDlyBTZXJ1bSBDcmVhdGluaW5lKSAvIChTZXJ1bSBVcmljIEFjaWQgw5cgVXJpbmUgQ3JlYXRpbmluZSkgw5cgMTAwXG5GRVAgKCUpID0gKFVyaW5lIFBob3NwaGF0ZSDDlyBTZXJ1bSBDcmVhdGluaW5lKSAvIChTZXJ1bSBQaG9zcGhhdGUgw5cgVXJpbmUgQ3JlYXRpbmluZSkgw5cgMTAwXG5cbkRpZmZlcmVudGlhdGlvbiAoRmVuc2tlIEpDRU0gMjAwODsgTWFlc2FrYSBBSktEIDIwMDkpOlxuICBGZWF0dXJlICAgICAgICAgICAgfCBDU1cgKFNhbHQgV2FzdGluZykgICAgICB8IFNJQURIIChXYXRlciBSZXRlbnRpb24pXG4gIFZvbHVtZSBzdGF0dXMgICAgICAgfCBIeXBvdm9sYWVtaWMgKGRyeSkgICAgICB8IEV1dm9sYWVtaWMgKG5vcm1hbClcbiAgVXJpbmUgdm9sdW1lICAgICAgICB8IEhpZ2ggKD4yLjUgTC9kYXkpICAgICAgIHwgTG93L05vcm1hbFxuICBVcmluZSBOYSAgICAgICAgICAgIHwgSGlnaCAoPjEwMCBtbW9sL0wpICAgICAgfCBIaWdoICg+MjAtMzAgbW1vbC9MKVxuICBGRVVyYXRlIGR1cmluZyBoeXBvTmF8ID4xMSUgICAgICAgICAgICAgICAgICAgfCA+MTElXG4gIEZFVXJhdGUgQUZURVIgTmEgZml4IHwgPjExJSAoUEVSU0lTVFMpICAgICAgICB8IE5vcm1hbGlzZXMgKDwxMCUpXG4gIEZFUCAgICAgICAgICAgICAgICAgfCBJbmNyZWFzZWQgKD4yMCUpICAgICAgICB8IE5vcm1hbCAo4omkMjAlKVxuICBUcmVhdG1lbnQgICAgICAgICAgIHwgVm9sdW1lIGV4cGFuc2lvbiAoTlMpICAgfCBGbHVpZCByZXN0cmljdGlvblxuXG5LZXk6IFRoZSBQT1NULUNPUlJFQ1RJT04gRkVVcmF0ZSBpcyB0aGUgZGVmaW5pdGl2ZSBkaXNjcmltaW5hdG9yLiIsCiAgICAgICAgbm90ZToiQm90aCBDU1cgYW5kIFNJQURIIHByZXNlbnQgd2l0aCBoeXBvdG9uaWMgaHlwb25hdHJhZW1pYSwgbG93IHNlcnVtIG9zbW9sYWxpdHksIGFuZCBpbmFwcHJvcHJpYXRlbHkgY29uY2VudHJhdGVkIHVyaW5lIChVT3NtID4xMDApLiBCb3RoIGhhdmUgZWxldmF0ZWQgdXJpbmUgTmEuIFRoZSBjcml0aWNhbCBkaXN0aW5jdGlvbiBpcyBWT0xVTUUgU1RBVFVTIOKAlCBDU1cgaXMgaHlwb3ZvbGFlbWljLCBTSUFESCBpcyBldXZvbGFlbWljIOKAlCBidXQgY2xpbmljYWwgdm9sdW1lIGFzc2Vzc21lbnQgaXMgb2Z0ZW4gdW5yZWxpYWJsZSBpbiBuZXVyb3N1cmdpY2FsIHBhdGllbnRzLlxuXG5EaWFnbm9zdGljIGFwcHJvYWNoOlxuICAxLiBDb25maXJtIGh5cG90b25pYyBoeXBvbmF0cmFlbWlhIChzZXJ1bSBPc20gPDI3NSwgdXJpbmUgT3NtID4xMDAsIHVyaW5lIE5hID4zMClcbiAgMi4gQXNzZXNzIHZvbHVtZTogQ1ZQLCBmbHVpZCBiYWxhbmNlLCB3ZWlnaHQgdHJlbmQsIHVyaW5lIG91dHB1dCAoQ1NXOiA+Mi41IEwvZGF5KVxuICAzLiBGRVVyYXRlOiBlbGV2YXRlZCBpbiBib3RoIGR1cmluZyBoeXBvbmF0cmFlbWlhOyBUSEUgS0VZIElTIFBPU1QtQ09SUkVDVElPTlxuICA0LiBGRVA6IGVsZXZhdGVkICg+MjAlKSBpbiBDU1csIG5vcm1hbCAo4omkMjAlKSBpbiBTSUFESFxuICA1LiBGbHVpZCBjaGFsbGVuZ2U6IDJMIE5TIGltcHJvdmVzIE5hIOKGkiBDU1c7IHdvcnNlbnMgTmEg4oaSIFNJQURIXG5cbk1hbmFnZW1lbnQ6XG4gIENTVzogVm9sdW1lIHJlcGxldGlvbiB3aXRoIGlzb3RvbmljL2h5cGVydG9uaWMgc2FsaW5lIMKxIGZsdWRyb2NvcnRpc29uZSAwLjItMC40IG1nL2RheS4gRmx1aWQgcmVzdHJpY3Rpb24gaXMgQ09OVFJBSU5ESUNBVEVELlxuICBTSUFESDogRmx1aWQgcmVzdHJpY3Rpb24gNTAwLTEwMDAgbUwvZGF5LiBJZiBzZXZlcmUgKE5hIDwxMjAgb3Igc3ltcHRvbWF0aWMpOiAzJSBzYWxpbmUgMC41LTEuMCBtTC9rZy9oIHdpdGggY2xvc2UgbW9uaXRvcmluZyAocmlzayBvZiBvdmVyY29ycmVjdGlvbiDihpIgT0RTKS5cbiAgQm90aDogQ29ycmVjdCBOYSDiiaQ4LTEwIG1FcS9MIHBlciAyNGggdG8gYXZvaWQgb3Ntb3RpYyBkZW15ZWxpbmF0aW9uIHN5bmRyb21lLlxuXG5MaW1pdGF0aW9uczogRGl1cmV0aWNzLCBDS0QsIGFuZCB1cmljb3N1cmljIGRydWdzIGludGVyZmVyZSB3aXRoIEZFVXJhdGUvRkVQLiBEcmF3IGxhYnMgT0ZGIGRpdXJldGljcy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVfdWEiLGxhYmVsOiJVcmluZSBVcmljIEFjaWQiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI0LjUifSwKICAgICAgICAgIHtpZDoic191YSIsbGFiZWw6IlNlcnVtIFVyaWMgQWNpZCIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuOCJ9LAogICAgICAgICAge2lkOiJ1X2NyIixsYWJlbDoiVXJpbmUgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6Ijg1In0sCiAgICAgICAgICB7aWQ6InNfY3IiLGxhYmVsOiJTZXJ1bSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMC45In0sCiAgICAgICAgICB7aWQ6InVfcGhvcyIsbGFiZWw6IlVyaW5lIFBob3NwaGF0ZSAob3B0aW9uYWwpIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiNDAifSwKICAgICAgICAgIHtpZDoic19waG9zIixsYWJlbDoiU2VydW0gUGhvc3BoYXRlIChvcHRpb25hbCkiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIzLjAifSwKICAgICAgICAgIHtpZDoidm9sdW1lIixsYWJlbDoiQ2xpbmljYWwgdm9sdW1lIHN0YXR1cyIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiRXV2b2xhZW1pYyAobm9ybWFsKSIsIkh5cG92b2xhZW1pYyAoZHJ5KSIsIlVuY2VydGFpbiJdfSwKICAgICAgICAgIHtpZDoidXJpbmVfdm9sIixsYWJlbDoiMjRoIHVyaW5lIG91dHB1dCIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiPDIuNSBML2RheSIsIuKJpTIuNSBML2RheSIsIlVua25vd24iXX0sCiAgICAgICAgICB7aWQ6ImNvcnJlY3RlZCIsbGFiZWw6IklzIGh5cG9uYXRyYWVtaWEgY29ycmVjdGVkPyIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTm8g4oCUIGN1cnJlbnRseSBoeXBvbmF0cmFlbWljIiwiWWVzIOKAlCBOYSBub3JtYWxpc2VkIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVfdWE9K3YudV91YSwgc191YT0rdi5zX3VhLCB1X2NyPSt2LnVfY3IsIHNfY3I9K3Yuc19jcjsKICAgICAgICAgIGlmKCF1X3VhfHwhc191YXx8IXVfY3J8fCFzX2NyfHxzX3VhPD0wfHx1X2NyPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGZldXJhdGU9KHVfdWEqc19jcikvKHNfdWEqdV9jcikqMTAwOwogICAgICAgICAgbGV0IGZlcD1udWxsOwogICAgICAgICAgY29uc3QgdV9wPSt2LnVfcGhvcywgc19wPSt2LnNfcGhvczsKICAgICAgICAgIGlmKHVfcCYmc19wJiZzX3A+MCYmdV9jcj4wKSBmZXA9KHVfcCpzX2NyKS8oc19wKnVfY3IpKjEwMDsKICAgICAgICAgIGxldCBzZWM9di5jb3JyZWN0ZWQ9PT0iWWVzIOKAlCBOYSBub3JtYWxpc2VkIj8iUG9zdC1jb3JyZWN0aW9uIHwgIjoiRHVyaW5nIGh5cG9uYXRyYWVtaWEgfCAiOwogICAgICAgICAgc2VjKz1gRkVVcmF0ZSAke2ZldXJhdGUudG9GaXhlZCgxKX0lYDsKICAgICAgICAgIGlmKGZlcCE9PW51bGwpIHNlYys9YCB8IEZFUCAke2ZlcC50b0ZpeGVkKDEpfSVgOwogICAgICAgICAgc2VjKz1gIHwgVm9sOiAke3Yudm9sdW1lfWA7CiAgICAgICAgICByZXR1cm4ge3ZhbDpmZXVyYXRlLnRvRml4ZWQoMSksdW5pdDoiJSBGRVVyYXRlIixzZWM6c2VjLGZlcDpmZXB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBmZT0rci52YWw7CiAgICAgICAgICBjb25zdCBmZXA9ci5mZXA7CiAgICAgICAgICBjb25zdCBjb3JyZWN0ZWQ9di5jb3JyZWN0ZWQ9PT0iWWVzIOKAlCBOYSBub3JtYWxpc2VkIjsKICAgICAgICAgIGNvbnN0IGh5cG92b2xlbWljPXYudm9sdW1lPT09Ikh5cG92b2xhZW1pYyAoZHJ5KSI7CiAgICAgICAgICBjb25zdCBldXZvbGVtaWM9di52b2x1bWU9PT0iRXV2b2xhZW1pYyAobm9ybWFsKSI7CiAgICAgICAgICBjb25zdCBoaWdoVU89di51cmluZV92b2w9PT0i4omlMi41IEwvZGF5IjsKICAgICAgICAgIGxldCBjc3dfcG9pbnRzPTAsIHNpYWRoX3BvaW50cz0wOwogICAgICAgICAgLyogU2NvcmUgZmVhdHVyZXMgKi8KICAgICAgICAgIGlmKGh5cG92b2xlbWljKSBjc3dfcG9pbnRzKz0yOyBpZihldXZvbGVtaWMpIHNpYWRoX3BvaW50cys9MjsKICAgICAgICAgIGlmKGhpZ2hVTykgY3N3X3BvaW50cys9MTsgaWYodi51cmluZV92b2w9PT0iPDIuNSBML2RheSIpIHNpYWRoX3BvaW50cys9MTsKICAgICAgICAgIGlmKGZlcCE9PW51bGwpe2lmKGZlcD4yMCkgY3N3X3BvaW50cys9MTsgZWxzZSBzaWFkaF9wb2ludHMrPTE7fQogICAgICAgICAgaWYoIWNvcnJlY3RlZCl7CiAgICAgICAgICAgIC8qIER1cmluZyBoeXBvbmF0cmFlbWlhIOKAlCBib3RoIGVsZXZhdGUgRkVVcmF0ZSwgc28gdXNlIGNsaW5pY2FsIGZlYXR1cmVzICovCiAgICAgICAgICAgIGNvbnN0IGZlcFN0cj1mZXAhPT1udWxsP2AgRkVQICR7ZmVwLnRvRml4ZWQoMSl9JSAoJHtmZXA+MjA/Ij4yMCUg4oaSIGZhdm91cnMgQ1NXIjoi4omkMjAlIOKGkiBmYXZvdXJzIFNJQURIIn0pLmA6IiI7CiAgICAgICAgICAgIGlmKGNzd19wb2ludHM+c2lhZGhfcG9pbnRzKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YEZFVXJhdGUgJHtyLnZhbH0lIGR1cmluZyBoeXBvbmF0cmFlbWlhIChlbGV2YXRlZCBpbiBib3RoIENTVyBhbmQgU0lBREgpLiR7ZmVwU3RyfSBDbGluaWNhbCBmZWF0dXJlcyBmYXZvdXIgQ1NXOiAke2h5cG92b2xlbWljPyJoeXBvdm9sYWVtaWMiOiIifSR7aGlnaFVPPyIgaGlnaCB1cmluZSBvdXRwdXQiOiIifS4gSG93ZXZlciwgdGhlIERFRklOSVRJVkUgdGVzdCBpcyBwb3N0LWNvcnJlY3Rpb24gRkVVcmF0ZSDigJQgcmVwZWF0IGFmdGVyIE5hIG5vcm1hbGlzZXMuIElmID4xMSUgcGVyc2lzdHMg4oaSIENTVyBjb25maXJtZWQuIElmIG5vcm1hbGlzZXMgPDEwJSDihpIgU0lBREguIEltbWVkaWF0ZSBtYW5hZ2VtZW50OiBpZiBDU1cgc3VzcGVjdGVkLCB2b2x1bWUgZXhwYW5zaW9uIHdpdGggaXNvdG9uaWMgc2FsaW5lIMKxIGZsdWRyb2NvcnRpc29uZSAwLjItMC40IG1nL2RheS4gRG8gTk9UIGZsdWlkIHJlc3RyaWN0IOKAlCB0aGlzIGlzIGNvbnRyYWluZGljYXRlZCBpbiBDU1cuIENvcnJlY3QgTmEg4omkOC0xMCBtRXEvTCBwZXIgMjRoLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgICBpZihzaWFkaF9wb2ludHM+Y3N3X3BvaW50cykgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBGRVVyYXRlICR7ci52YWx9JSBkdXJpbmcgaHlwb25hdHJhZW1pYSAoZWxldmF0ZWQgaW4gYm90aCBDU1cgYW5kIFNJQURIKS4ke2ZlcFN0cn0gQ2xpbmljYWwgZmVhdHVyZXMgZmF2b3VyIFNJQURIOiAke2V1dm9sZW1pYz8iZXV2b2xhZW1pYyI6IiJ9JHt2LnVyaW5lX3ZvbD09PSI8Mi41IEwvZGF5Ij8iIG5vcm1hbC9sb3cgdXJpbmUgb3V0cHV0IjoiIn0uIFJlcGVhdCBGRVVyYXRlIGFmdGVyIE5hIGNvcnJlY3Rpb24gdG8gY29uZmlybSDigJQgbm9ybWFsaXNhdGlvbiAoPDEwJSkgY29uZmlybXMgU0lBREguIE1hbmFnZW1lbnQ6IGZsdWlkIHJlc3RyaWN0aW9uIDUwMC0xMDAwIG1ML2RheS4gSWYgc2V2ZXJlIChOYSA8MTIwIG9yIHN5bXB0b21hdGljKTogMyUgc2FsaW5lIDAuNS0xLjAgbUwva2cvaC4gQ29ycmVjdCBOYSDiiaQ4LTEwIG1FcS9MIHBlciAyNGguICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICAgIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgRkVVcmF0ZSAke3IudmFsfSUgZHVyaW5nIGh5cG9uYXRyYWVtaWEg4oCUIGVsZXZhdGVkIGluIEJPVEggQ1NXIGFuZCBTSUFESC4ke2ZlcFN0cn0gVm9sdW1lIHN0YXR1cyAke3Yudm9sdW1lPT09IlVuY2VydGFpbiI/InVuY2VydGFpbiDigJQgY2xpbmljYWwgYXNzZXNzbWVudCB1bnJlbGlhYmxlIGluIH41MCUgb2YgY2FzZXMiOiJub3RlZCJ9LiBUSEUgREVGSU5JVElWRSBESVNDUklNSU5BVE9SIGlzIHBvc3QtY29ycmVjdGlvbiBGRVVyYXRlOiByZXBlYXQgYWZ0ZXIgTmEgbm9ybWFsaXNlcy4gRkVVcmF0ZSA+MTElIHBlcnNpc3RzIOKGkiBDU1cuIEZFVXJhdGUgbm9ybWFsaXNlcyA8MTAlIOKGkiBTSUFESC4gQ29uc2lkZXIgMkwgTlMgZmx1aWQgY2hhbGxlbmdlOiBpbXByb3ZlcyBOYSDihpIgQ1NXOyB3b3JzZW5zIE5hIOKGkiBTSUFESC4gQ29ycmVjdCBOYSDiiaQ4LTEwIG1FcS9MIHBlciAyNGguICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvKiBQb3N0LWNvcnJlY3Rpb24g4oCUIHRoaXMgaXMgdGhlIGRlZmluaXRpdmUgdGVzdCAqLwogICAgICAgICAgICBjb25zdCBmZXBTdHI9ZmVwIT09bnVsbD9gIEZFUCAke2ZlcC50b0ZpeGVkKDEpfSUgKCR7ZmVwPjIwPyI+MjAlIOKAlCBzdXBwb3J0cyBDU1ciOiLiiaQyMCUg4oCUIHN1cHBvcnRzIFNJQURIIn0pLmA6IiI7CiAgICAgICAgICAgIGlmKGZlPjExKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEZFVXJhdGUgJHtyLnZhbH0lIFJFTUFJTlMgRUxFVkFURUQgKD4xMSUpIGFmdGVyIE5hIGNvcnJlY3Rpb24g4oCUIENPTkZJUk1TIENlcmVicmFsIFNhbHQgV2FzdGluZyAoRmVuc2tlIEpDRU0gMjAwODsgTWFlc2FrYSBBSktEIDIwMDkpLiR7ZmVwU3RyfSBNYW5hZ2VtZW50OiB2b2x1bWUgcmVwbGV0aW9uIHdpdGggaXNvdG9uaWMgc2FsaW5lLiBGbHVkcm9jb3J0aXNvbmUgMC4yLTAuNCBtZy9kYXkgdG8gcmVkdWNlIHJlbmFsIHNvZGl1bSBsb3NzZXMuIEZsdWlkIHJlc3RyaWN0aW9uIGlzIENPTlRSQUlORElDQVRFRC4gTW9uaXRvciBOYSBjbG9zZWx5IOKAlCBDU1cgaXMgb2Z0ZW4gc2VsZi1saW1pdGluZyAoMi00IHdlZWtzIGluIHBvc3QtbmV1cm9zdXJnaWNhbCBwYXRpZW50cykuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRkVVcmF0ZSAke3IudmFsfSUgaGFzIE5PUk1BTElTRUQgKOKJpDExJSkgYWZ0ZXIgTmEgY29ycmVjdGlvbiDigJQgQ09ORklSTVMgU0lBREggKEZlbnNrZSBKQ0VNIDIwMDg7IE1hZXNha2EgQUpLRCAyMDA5KS4ke2ZlcFN0cn0gTWFuYWdlbWVudDogZmx1aWQgcmVzdHJpY3Rpb24gNTAwLTEwMDAgbUwvZGF5LiBGb3IgY2hyb25pYy9yZWN1cnJlbnQgU0lBREg6IGNvbnNpZGVyIHZhcHRhbiAodG9sdmFwdGFuKSwgdXJlYSAxNS02MCBnL2RheSwgb3IgZGVtZWNsb2N5Y2xpbmUuIElkZW50aWZ5IGFuZCB0cmVhdCB1bmRlcmx5aW5nIGNhdXNlIChDTlMsIHB1bG1vbmFyeSwgZHJ1Z3MsIG1hbGlnbmFuY3kpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJjb3JyY2FfZ2x1Y29zZSIsIG5hbWU6IkNvcnJlY3RlZCBDYWxjaXVtIChBbGJ1bWluKSIsIHJlZjoiUGF5bmUgZXQgYWwuLCBCTUogMTk3MzsgS0RJR08gQ0tELU1CRCAyMDE3IiwgdGFnOiJBbGJ1bWluLUFkanVzdGVkIENhbGNpdW0iLAogICAgICAgIGZvcm11bGE6IkNvcnJlY3RlZCBDYSA9IE1lYXN1cmVkIENhICsgMC44IMOXICg0LjAg4oiSIEFsYnVtaW4pIiwKICAgICAgICBub3RlOiJBbGJ1bWluLWNvcnJlY3Rpb24gY29ycmVsYXRlcyBpbXBlcmZlY3RseSB3aXRoIGlvbmlzZWQgY2FsY2l1bSwgcGFydGljdWxhcmx5IGluIGNyaXRpY2FsIGlsbG5lc3MuIElvbmlzZWQgY2FsY2l1bSBwcmVmZXJyZWQgd2hlbiBhY2N1cmFjeSBpcyBjcml0aWNhbC4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImNhIixsYWJlbDoiTWVhc3VyZWQgVG90YWwgQ2FsY2l1bSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNy44In0sCiAgICAgICAgICB7aWQ6ImFsYiIsbGFiZWw6IlNlcnVtIEFsYnVtaW4iLHVuaXQ6ImcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMi40In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgY2E9K3YuY2EsIGFsYj0rdi5hbGI7CiAgICAgICAgICBpZighY2F8fCFhbGJ8fGNhPD0wfHxhbGI8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgY29ycmVjdGVkPWNhKzAuOCooNC4wLWFsYik7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjb3JyZWN0ZWQudG9GaXhlZCgyKSx1bml0OiJtZy9kTCAoY29ycmVjdGVkKSJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDguNSkgcmV0dXJuIHtjOiIjMjU2M2ViIix0OiJDb3JyZWN0ZWQgY2FsY2l1bSAiK3IudmFsKyIgbWcvZEwg4oCUIEh5cG9jYWxjYWVtaWEuIENvbnNpZGVyIGh5cG9wYXJhdGh5cm9pZGlzbSwgdml0YW1pbiBEIGRlZmljaWVuY3ksIGh5cG9tYWduZXNhZW1pYSwgQ0tELCBvciBwYW5jcmVhdGl0aXMuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgaWYodjw9MTAuNSkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OiJDb3JyZWN0ZWQgY2FsY2l1bSAiK3IudmFsKyIgbWcvZEwg4oCUIE5vcm1hbCByYW5nZSAoOC414oCTMTAuNSkuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZWE1ODBjIix0OiJDb3JyZWN0ZWQgY2FsY2l1bSAiK3IudmFsKyIgbWcvZEwg4oCUIEh5cGVyY2FsY2FlbWlhLiBDb25zaWRlciBwcmltYXJ5IGh5cGVycGFyYXRoeXJvaWRpc20sIG1hbGlnbmFuY3ksIHZpdGFtaW4gRCB0b3hpY2l0eSwgZ3JhbnVsb21hdG91cyBkaXNlYXNlLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICB9CiAgICAgIH0sCiAgICBdCiAgfSwKCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgLy8gSUlJLiBBQ0lE4oCTQkFTRSwKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICB7CiAgICBpZDoiczMiLCBsYWJlbDoiQWNpZOKAk0Jhc2UiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6ImhlbmRlcnNvbl9oIiwgbmFtZToiSGVuZGVyc29u4oCTSGFzc2VsYmFsY2ggLyBCbG9vZCBHYXMgSW50ZXJwcmV0ZXIiLCByZWY6IkhlbmRlcnNvbiAxOTA4IC8gSGFzc2VsYmFsY2ggMTkxNiIsIHRhZzoiQUJHIEFjaWQtQmFzZSBJbnRlcnByZXRhdGlvbiIsCiAgICAgICAgZm9ybXVsYToicEggPSA2LjEgKyBsb2coW0hDT+KCg10gLyAoMC4wMzAxIMOXIFBhQ0/igoIpKSIsCiAgICAgICAgbm90ZToiRm91bmRhdGlvbiBvZiBibG9vZCBnYXMgaW50ZXJwcmV0YXRpb24uIEhlbmRlcnNvbiBlcXVhdGlvbjogW0jigbpdID0gMjQgw5cgUENP4oKCL0hDT+KCgy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InBoIixsYWJlbDoiTWVhc3VyZWQgcEggKGlmIGF2YWlsYWJsZSkiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiNy40MCJ9LAogICAgICAgICAge2lkOiJoY28zIixsYWJlbDoiSENP4oKDIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMjQifSwKICAgICAgICAgIHtpZDoicGNvMiIsbGFiZWw6IlBhQ0/igoIiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6IjQwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgaGNvMz0rdi5oY28zLCBwY28yPSt2LnBjbzI7CiAgICAgICAgICBpZighaGNvM3x8IXBjbzJ8fGhjbzM8PTB8fHBjbzI8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgY2FsY1BIPSg2LjErTWF0aC5sb2cxMChoY28zLygwLjAzMDEqcGNvMikpKTsKICAgICAgICAgIGNvbnN0IGhwbHVzPTI0KnBjbzIvaGNvMzsKICAgICAgICAgIGNvbnN0IG1lYXNQSD0rdi5waDsKICAgICAgICAgIHJldHVybiB7dmFsOmNhbGNQSC50b0ZpeGVkKDIpLHVuaXQ6ImNhbGN1bGF0ZWQgcEgiLHNlYzpgW0jigbpdOiAke2hwbHVzLnRvRml4ZWQoMCl9IG5tb2wvTCR7bWVhc1BIP2AgfCBNZWFzdXJlZDogJHttZWFzUEh9IHwgzpQ6ICR7TWF0aC5hYnMoY2FsY1BILW1lYXNQSCkudG9GaXhlZCgzKX1gOiIifWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBwSD0rci52YWwsIGhjbzM9K3YuaGNvMywgcGNvMj0rdi5wY28yOwogICAgICAgICAgbGV0IGRpc29yZGVyPSIiOwogICAgICAgICAgaWYocEg8Ny4zNSYmcGNvMj40NSkgZGlzb3JkZXI9IlJlc3BpcmF0b3J5IGFjaWRvc2lzIjsKICAgICAgICAgIGVsc2UgaWYocEg8Ny4zNSYmaGNvMzwyMikgZGlzb3JkZXI9Ik1ldGFib2xpYyBhY2lkb3NpcyI7CiAgICAgICAgICBlbHNlIGlmKHBIPjcuNDUmJnBjbzI8MzUpIGRpc29yZGVyPSJSZXNwaXJhdG9yeSBhbGthbG9zaXMiOwogICAgICAgICAgZWxzZSBpZihwSD43LjQ1JiZoY28zPjI2KSBkaXNvcmRlcj0iTWV0YWJvbGljIGFsa2Fsb3NpcyI7CiAgICAgICAgICBlbHNlIGRpc29yZGVyPSJwSCBub3JtYWwg4oCUIHBvc3NpYmxlIGNvbXBlbnNhdGVkIGRpc29yZGVyIjsKICAgICAgICAgIHJldHVybiB7YzpwSDw3LjM1PyIjZGMyNjI2IjpwSD43LjQ1PyIjN2MzYWVkIjoiIzE2YTM0YSIsCiAgICAgICAgICAgIHQ6YHBIICR7ci52YWx9IHwgUGF0dGVybjogJHtkaXNvcmRlcn0uIFdpbnRlcidzIGV4cGVjdGVkIFBhQ0/igoI6ICR7KDEuNSpoY28zKzgpLnRvRml4ZWQoMCl9IMKxIDIgbW1IZy4gRnVsbCBhbmFseXNpcyBzaG91bGQgaW5jb3Jwb3JhdGUgQUcsIGRlbHRhLWRlbHRhLCBhbmQgY29tcGVuc2F0aW9uIGFzc2Vzc21lbnQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImFnYXAiLCBuYW1lOiJBbmlvbiBHYXAgKEFsYnVtaW4tQ29ycmVjdGVkKSIsIHJlZjoiRmlnZ2UgZXQgYWwuLCBKIExhYiBDbGluIE1lZCAxOTkyIiwgdGFnOiJIQUdNQSBTY3JlZW4iLAogICAgICAgIGZvcm11bGE6IkFHID0gTmEg4oiSIChDbCArIEhDT+KCgylcbkNvcnJlY3RlZCBBRyA9IEFHICsgMi41IMOXICg0LjAg4oiSIEFsYnVtaW4pIiwKICAgICAgICBub3RlOiJBbHdheXMgY29ycmVjdCBmb3IgaHlwb2FsYnVtaW5hZW1pYS4gRWFjaCAxIGcvZEwgZmFsbCByZWR1Y2VzIEFHIGJ5IH4yLjUuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJuYSIsbGFiZWw6IlNvZGl1bSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjE0MCJ9LAogICAgICAgICAge2lkOiJjbCIsbGFiZWw6IkNobG9yaWRlIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMTAyIn0sCiAgICAgICAgICB7aWQ6ImhjbzMiLGxhYmVsOiJCaWNhcmJvbmF0ZSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjI0In0sCiAgICAgICAgICB7aWQ6ImFsYiIsbGFiZWw6IkFsYnVtaW4iLHVuaXQ6ImcvZEwiLHR5cGU6Im51bWJlciIscGg6IjQuMCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IG5hPSt2Lm5hLGNsPSt2LmNsLGhjbzM9K3YuaGNvMyxhbGI9K3YuYWxiOyBpZighbmF8fCFjbHx8IWhjbzMpIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgYWc9bmEtY2wtaGNvMywgY29ycj1hbGI/YWcrMi41Kig0LjAtYWxiKTphZzsKICAgICAgICAgIHJldHVybiB7dmFsOmNvcnIudG9GaXhlZCgxKSx1bml0OiJtRXEvTCIsc2VjOmBSYXcgQUc6ICR7YWd9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8PTEyKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YENvcnJlY3RlZCBBRyAke3IudmFsfSDigJQgTm9ybWFsICjiiaQxMikuIElmIGFjaWRvc2lzIHByZXNlbnQsIG5vbi1hbmlvbiBnYXAgKGh5cGVyY2hsb3JhZW1pYykgcGF0dGVybi4gQ29uc2lkZXIgR0kgbG9zcywgUlRBLCBzYWxpbmUgZXhjZXNzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjw9MjApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgQ29ycmVjdGVkIEFHICR7ci52YWx9IOKAlCBFbGV2YXRlZCAoMTLigJMyMCkuIEhBR01BLiBNVURQSUxFUyBkaWZmZXJlbnRpYWw6IE1ldGhhbm9sLCBVcmFlbWlhLCBES0EvQUtBLCBQcm9weWxlbmUgZ2x5Y29sLCBJc29uaWF6aWQvSXJvbiwgTGFjdGljIGFjaWRvc2lzLCBFdGh5bGVuZSBnbHljb2wsIFNhbGljeWxhdGVzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBDb3JyZWN0ZWQgQUcgJHtyLnZhbH0g4oCUIE1hcmtlZGx5IGVsZXZhdGVkICg+MjApLiBTZXZlcmUgSEFHTUEuIFVyZ2VudDogbGFjdGF0ZSwga2V0b25lcywgc2FsaWN5bGF0ZSwgb3Ntb2xhciBnYXAuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImRlbHRhIiwgbmFtZToiRGVsdGHigJNEZWx0YSBSYXRpbyIsIHJlZjoiTmFyaW5zICYgRW1tZXR0LCBNZWRpY2luZSAxOTgwIiwgdGFnOiJNaXhlZCBBY2lkLUJhc2UgRGV0ZWN0aW9uIiwKICAgICAgICBmb3JtdWxhOiLOlM6UID0gKEFHIOKIkiAxMikgw7cgKDI0IOKIkiBIQ0/igoMpIiwKICAgICAgICBub3RlOiI8MTogY29uY3VycmVudCBOQUdNQS4gPjI6IGNvbmN1cnJlbnQgbWV0YWJvbGljIGFsa2Fsb3Npcy4gMeKAkzI6IHB1cmUgSEFHTUEuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJhZyIsbGFiZWw6IkNvcnJlY3RlZCBBbmlvbiBHYXAiLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIyNCJ9LAogICAgICAgICAge2lkOiJoY28zIixsYWJlbDoiTWVhc3VyZWQgSENP4oKDIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMTgifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBhZz0rdi5hZyxoY28zPSt2LmhjbzM7IGlmKCFhZ3x8IWhjbzN8fGFnPD0xMikgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKGFnLTEyKS8oMjQtaGNvMykpLnRvRml4ZWQoMiksdW5pdDoicmF0aW8ifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodjwxLjApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgzpTOlCAke3IudmFsfSAoPDEuMCkg4oCUIE1peGVkIEhBR01BIGFuZCBub24tYW5pb24gZ2FwIG1ldGFib2xpYyBhY2lkb3Npcy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8PTIuMCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmDOlM6UICR7ci52YWx9ICgxLjDigJMyLjApIOKAlCBQdXJlIEhBR01BLiBCaWNhcmJvbmF0ZSBmZWxsIHByb3BvcnRpb25hbGx5IHRvIEFHIHJpc2UuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiM3YzNhZWQiLHQ6YM6UzpQgJHtyLnZhbH0gKD4yLjApIOKAlCBDb25jdXJyZW50IG1ldGFib2xpYyBhbGthbG9zaXMgbWFza2luZyBhY2lkb3NpcyBzZXZlcml0eS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoid2ludGVycyIsIG5hbWU6IldpbnRlcidzIEZvcm11bGEiLCByZWY6IkFsYmVydCBldCBhbC4sIEFubiBJbnRlcm4gTWVkIDE5NjciLCB0YWc6IlJlc3BpcmF0b3J5IENvbXBlbnNhdGlvbiBDaGVjayIsCiAgICAgICAgZm9ybXVsYToiRXhwZWN0ZWQgUGFDT+KCgiA9ICgxLjUgw5cgSENP4oKDKSArIDggwrEgMiIsCiAgICAgICAgbm90ZToiUHJlZGljdHMgcmVzcGlyYXRvcnkgY29tcGVuc2F0aW9uIGluIHB1cmUgbWV0YWJvbGljIGFjaWRvc2lzLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiaGNvMyIsbGFiZWw6IkhDT+KCgyIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjEyIn0sCiAgICAgICAgICB7aWQ6InBjbzIiLGxhYmVsOiJNZWFzdXJlZCBQYUNP4oKCIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiIyOCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGhjbzM9K3YuaGNvMzsgaWYoIWhjbzN8fGhjbzM8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgZXhwPTEuNSpoY28zKzg7CiAgICAgICAgICByZXR1cm4ge3ZhbDpgJHsoZXhwLTIpLnRvRml4ZWQoMCl94oCTJHsoZXhwKzIpLnRvRml4ZWQoMCl9YCx1bml0OiJtbUhnIixzZWM6di5wY28yP2BNZWFzdXJlZDogJHt2LnBjbzJ9IG1tSGdgOiIifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgaGNvMz0rdi5oY28zLHBjbzI9K3YucGNvMixleHA9MS41KmhjbzMrODsKICAgICAgICAgIGlmKCFwY28yKSByZXR1cm4ge2M6IiM2YjcyODAiLHQ6YEV4cGVjdGVkIFBhQ0/igoI6ICR7KGV4cC0yKS50b0ZpeGVkKDApfeKAkyR7KGV4cCsyKS50b0ZpeGVkKDApfSBtbUhnLiBFbnRlciBtZWFzdXJlZCBQYUNP4oKCIHRvIGNoZWNrIGZvciBjb25jdXJyZW50IHJlc3BpcmF0b3J5IGRpc29yZGVyLmB9OwogICAgICAgICAgaWYocGNvMj5leHArMikgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBQYUNP4oKCICR7cGNvMn0gYWJvdmUgZXhwZWN0ZWQgKCR7KGV4cC0yKS50b0ZpeGVkKDApfeKAkyR7KGV4cCsyKS50b0ZpeGVkKDApfSkg4oCUIGNvbmN1cnJlbnQgcmVzcGlyYXRvcnkgYWNpZG9zaXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihwY28yPGV4cC0yKSByZXR1cm4ge2M6IiM3YzNhZWQiLHQ6YFBhQ0/igoIgJHtwY28yfSBiZWxvdyBleHBlY3RlZCDigJQgY29uY3VycmVudCByZXNwaXJhdG9yeSBhbGthbG9zaXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YFBhQ0/igoIgJHtwY28yfSB3aXRoaW4gZXhwZWN0ZWQgcmFuZ2Ug4oCUIGFwcHJvcHJpYXRlIGNvbXBlbnNhdGlvbiBmb3IgcHVyZSBtZXRhYm9saWMgYWNpZG9zaXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InVhZyIsIG5hbWU6IlVyaW5lIEFuaW9uIEdhcCIsIHJlZjoiQmF0dGxlIGV0IGFsLiwgTkVKTSAxOTg4IiwgdGFnOiJSVEEgdnMgR0kgTG9zcyIsCiAgICAgICAgZm9ybXVsYToiVUFHID0gVU5hICsgVUsg4oiSIFVDbCIsCiAgICAgICAgbm90ZToiTmVnYXRpdmUgPSBoaWdoIE5I4oKE4oG6ID0gR0kgbG9zcy4gUG9zaXRpdmUgPSBsb3cgTkjigoTigbogPSBSVEEuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ1bmEiLGxhYmVsOiJVcmluZSBOYSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjQwIn0sCiAgICAgICAgICB7aWQ6InVrIixsYWJlbDoiVXJpbmUgSyIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjIwIn0sCiAgICAgICAgICB7aWQ6InVjbCIsbGFiZWw6IlVyaW5lIENsIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMzUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCB1bj0rdi51bmEsdWs9K3YudWssdWM9K3YudWNsOyBpZighdW58fCF1a3x8IXVjKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOih1bit1ay11YykudG9GaXhlZCgwKSx1bml0OiJtRXEvTCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgVUFHICR7ci52YWx9IOKAlCBOZWdhdGl2ZS4gSW50YWN0IHJlbmFsIGFjaWRpZmljYXRpb24uIE5BR01BIGxpa2VseSBmcm9tIEdJIGJpY2FyYm9uYXRlIGxvc3MgKGRpYXJyaG9lYSwgZmlzdHVsYSkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFVBRyAke3IudmFsfSDigJQgUG9zaXRpdmUuIEltcGFpcmVkIE5I4oKE4oG6IGV4Y3JldGlvbiBjb25zaXN0ZW50IHdpdGggUlRBLiBUeXBlIDEgKGRpc3RhbCwgdXJpbmUgcEggPjUuNSksIFR5cGUgMiAocHJveGltYWwpLCBvciBUeXBlIDQgKGh5cGVya2FsYWVtaWMpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAvLyBJVi4gQUtJICYgUklTSyBTQ09SRVMsCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgewogICAgaWQ6InM0IiwgbGFiZWw6IkFLSSAmIFJpc2sgU2NvcmVzIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJtZWhyYW4iLCBuYW1lOiJNZWhyYW4gQ0lOIFNjb3JlIiwgcmVmOiJNZWhyYW4gZXQgYWwuLCBKQUNDIDIwMDQiLCB0YWc6IkNvbnRyYXN0LUluZHVjZWQgQUtJIiwKICAgICAgICBmb3JtdWxhOiJTY29yZSA9IDUoSHlwb3RlbnNpb24pICsgNShJQUJQKSArIDUoQ0hGKSArIDQoQWdlPjc1KSArIDMoQW5hZW1pYSkgKyAzKERNKSArIDQoQ3I+MS41KSArIOKMilZvbC8xMDDijIsiLAogICAgICAgIG5vdGU6IuKJpDUgfjcuNSUsIDbigJMxMCB+MTQlLCAxMeKAkzE1IH4yNiUsIOKJpTE2IH41NyUgQ0lOIHJpc2suIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJodG4iLGxhYmVsOiJIeXBvdGVuc2lvbiAoU0JQIDw4MCDiiaUxaCAvIHZhc29wcmVzc29ycykiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImlhYnAiLGxhYmVsOiJJQUJQIGluIHVzZSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiY2hmIixsYWJlbDoiQ0hGIChOWUhBIElJSeKAk0lWIC8gcHVsbW9uYXJ5IG9lZGVtYSkiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImFnZTc1IixsYWJlbDoiQWdlID43NSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiYW5hZW1pYSIsbGFiZWw6IkFuYWVtaWEgKEhjdCA8MzklIE0sIDwzNiUgRikiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImRtIixsYWJlbDoiRGlhYmV0ZXMiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNyMTUiLGxhYmVsOiJDcmVhdGluaW5lID4xLjUgbWcvZEwiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNvbnRyYXN0IixsYWJlbDoiQ29udHJhc3QgVm9sdW1lIix1bml0OiJtTCIsdHlwZToibnVtYmVyIixwaDoiMTUwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgbGV0IHM9MDsKICAgICAgICAgIGlmKHYuaHRuKSBzKz01OyBpZih2LmlhYnApIHMrPTU7IGlmKHYuY2hmKSBzKz01OwogICAgICAgICAgaWYodi5hZ2U3NSkgcys9NDsgaWYodi5hbmFlbWlhKSBzKz0zOyBpZih2LmRtKSBzKz0zOyBpZih2LmNyMTUpIHMrPTQ7CiAgICAgICAgICBjb25zdCBjPSt2LmNvbnRyYXN0OyBpZihjPjApIHMrPU1hdGguZmxvb3IoYy8xMDApOwogICAgICAgICAgcmV0dXJuIHt2YWw6cyx1bml0OiJwb2ludHMifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9ci52YWw7CiAgICAgICAgICBpZih2PD01KSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YFNjb3JlICR7dn0gKOKJpDUpIOKAlCBMb3cgQ0lOIHJpc2sgKH43LjUlKS4gU3RhbmRhcmQgaHlkcmF0aW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjw9MTApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgU2NvcmUgJHt2fSAoNuKAkzEwKSDigJQgTW9kZXJhdGUgcmlzayAofjE0JSkuIEFnZ3Jlc3NpdmUgSVYgc2FsaW5lIGh5ZHJhdGlvbi4gTWluaW1pc2UgY29udHJhc3QuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PD0xNSkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBTY29yZSAke3Z9ICgxMeKAkzE1KSDigJQgSGlnaCByaXNrICh+MjYlKS4gTWF4aW1hbCBwcm9waHlsYXhpcy4gQ29uc2lkZXIgbm9uLWNvbnRyYXN0IGFsdGVybmF0aXZlcy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgU2NvcmUgJHt2fSAo4omlMTYpIOKAlCBWZXJ5IGhpZ2ggcmlzayAofjU3JSkuIE5vbi1jb250cmFzdCBhbHRlcm5hdGl2ZXMgc3Ryb25nbHkgcHJlZmVycmVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJyaWZsZV9rZGlnbyIsIG5hbWU6IlJJRkxFICYgS0RJR08gQUtJIFN0YWdpbmciLCByZWY6IkJlbGxvbW8gZXQgYWwuLCBDcml0IENhcmUgMjAwNDsgS0RJR08gQUtJIDIwMTIiLCB0YWc6IkFLSSBDbGFzc2lmaWNhdGlvbiIsCiAgICAgICAgZm9ybXVsYToiS0RJR086IFN0YWdlIDE6IENyIMOXMS414oCTMS45IG9yIOKGkeKJpTAuMyB8IFN0YWdlIDI6IMOXMi4w4oCTMi45IHwgU3RhZ2UgMzogw5czLjAgb3Ig4omlNC4wIG9yIFJSVCIsCiAgICAgICAgbm90ZToiS0RJR08gMjAxMiBzdXBlcnNlZGVzIFJJRkxFLiBCYXNlbGluZSA9IGxvd2VzdCB2YWx1ZSB3aXRoaW4gMyBtb250aHMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJzY3JfYmFzZSIsbGFiZWw6IkJhc2VsaW5lIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIwLjkifSwKICAgICAgICAgIHtpZDoic2NyX25vdyIsbGFiZWw6IkN1cnJlbnQgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuNyJ9LAogICAgICAgICAge2lkOiJzY3JfNDhoIixsYWJlbDoiQ3JlYXRpbmluZSA0OGggYWdvIChpZiBhdmFpbGFibGUpIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMS4xIn0sCiAgICAgICAgICB7aWQ6InJydCIsbGFiZWw6IlJlbmFsIFJlcGxhY2VtZW50IFRoZXJhcHkgaW5pdGlhdGVkPyIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTm8iLCJZZXMg4oCUIGF1dG8gU3RhZ2UgMyJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBiYXNlPSt2LnNjcl9iYXNlLCBub3c9K3Yuc2NyX25vdywgczQ4PSt2LnNjcl80OGg7CiAgICAgICAgICBpZighYmFzZXx8IW5vdykgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCByYXRpbz1ub3cvYmFzZTsKICAgICAgICAgIGNvbnN0IHJpc2U0OD0oczQ4PjApPyhub3ctczQ4KTowOwogICAgICAgICAgbGV0IHN0YWdlPTA7CiAgICAgICAgICBpZihyYXRpbz49M3x8bm93Pj00LjB8fHYucnJ0PT09IlllcyDigJQgYXV0byBTdGFnZSAzIikgc3RhZ2U9MzsKICAgICAgICAgIGVsc2UgaWYocmF0aW8+PTIuMCkgc3RhZ2U9MjsKICAgICAgICAgIGVsc2UgaWYocmF0aW8+PTEuNXx8cmlzZTQ4Pj0wLjMpIHN0YWdlPTE7CiAgICAgICAgICByZXR1cm4ge3ZhbDpzdGFnZT09PTA/Ik5vIEFLSSI6c3RhZ2UsdW5pdDpzdGFnZT09PTA/IiI6IktESUdPIFN0YWdlIixzZWM6YFJhdGlvOiAke3JhdGlvLnRvRml4ZWQoMil9w5dgfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3Qgc3RhZ2U9ci52YWw7CiAgICAgICAgICBpZihzdGFnZT09PSJObyBBS0kiKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YE5vIEFLSSBjcml0ZXJpYSBtZXQuIE1vbml0b3IgaWYgY2xpbmljYWwgc3VzcGljaW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgY29uc3QgaW5mbz17CiAgICAgICAgICAgIDE6e2M6IiNjYThhMDQiLHQ6YEtESUdPIFN0YWdlIDEuIE5lcGhyb3RveGluIHJldmlldywgZG9zZSBhZGp1c3RtZW50LCBoYWVtb2R5bmFtaWMgYXNzZXNzbWVudC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfSwKICAgICAgICAgICAgMjp7YzoiI2VhNTgwYyIsdDpgS0RJR08gU3RhZ2UgMi4gUHJvbXB0IG5lcGhyb2xvZ3kgcmV2aWV3LiBOZXBocm90b3hpbiBhdm9pZGFuY2UsIGhhZW1vZHluYW1pYyBvcHRpbWlzYXRpb24uICR7R1VJREVMSU5FX0NMT1NJTkd9YH0sCiAgICAgICAgICAgIDM6e2M6IiNkYzI2MjYiLHQ6YEtESUdPIFN0YWdlIDMg4oCUIFNldmVyZSBBS0kuIFVyZ2VudCBuZXBocm9sb2d5IGlucHV0LiBDb25zaWRlciBSUlQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH0sCiAgICAgICAgICB9OwogICAgICAgICAgcmV0dXJuIGluZm9bc3RhZ2VdfHx7YzoiIzZiNzI4MCIsdDoiVmVyaWZ5IGlucHV0cy4ifTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiYWluX3Jpc2siLCBuYW1lOiJBY3V0ZSBJbnRlcnN0aXRpYWwgTmVwaHJpdGlzIChBSU4pIFJpc2sgQ2FsY3VsYXRvciIsIHJlZjoiTW9sZWRpbmEgREcgZXQgYWwuLCBOZXBocm9sIERpYWwgVHJhbnNwbGFudCAyMDIyOzM3OjIyMTQtMjIyMjsgTW9sZWRpbmEgREcgZXQgYWwuLCBKQVNOIDIwMjQgKGV4dGVybmFsIHZhbGlkYXRpb24pIiwgdGFnOiJBSU4g4oCUIEJpb3BzeSBEZWNpc2lvbiBTdXBwb3J0IiwKICAgICAgICBmb3JtdWxhOiJTdW0gPSAwLjgzNjc1MTggw5cgbG4oQ3IpICsgKOKIkjAuOTE4MTkzOCDDlyBsbihCVU7Dt0NyKSkgKyAo4oiSMC4wNTAxMjAzIMOXIDEwMDAgw5cgKFNHIOKIkiAxKSkgKyBwcm90ZWluX2NvZWZmICsgMC43NzAzOTggKyBsbihwcmV2YWxlbmNlw7cwLjIzKVxuUHJvdGVpbiBjb2VmZmljaWVudCA9IDAuOTM2MDEyNyBpZiBkaXBzdGljayDiiaQxKywgZWxzZSAwXG4lIFByb2JhYmlsaXR5IG9mIEFJTiA9IDEwMCDDlyBlXnN1bSDDtyAoMSArIGVec3VtKVxuXG5BVUM6IDAuNzggKHRyYWluaW5nKSwgMC43MyAoaW50ZXJuYWwgdmFsaWRhdGlvbiksIDAuNzQgKGV4dGVybmFsIEJCQ0kgY29ob3J0KSIsCiAgICAgICAgbm90ZToiVmFsaWRhdGVkIDQtdmFyaWFibGUgbG9naXN0aWMgcmVncmVzc2lvbiBtb2RlbCBpZGVudGlmaWVzIHBhdGllbnRzIGF0IHJpc2sgb2YgYmlvcHN5LXByb3ZlbiBBSU4gdXNpbmcgRUhSIGRhdGEuIERldmVsb3BlZCBhdCBZYWxlIChuPTM5MywgODYgQUlOIG9uIGJpb3BzeSksIGV4dGVybmFsbHkgdmFsaWRhdGVkIGluIHRoZSBCaW9wc3kgQmlvYmFuayBDb2hvcnQgSW5pdGlhdGl2ZSAoQkJDSTsgbj0xMTE4LCAxMTkgQUlOKSBhbmQgYWdhaW4gaW4gSkFTTiAyMDI0LiBIaWdoZXIgcHJvYmFiaWxpdHkgaW5kaWNhdGVzIGdyZWF0ZXIgbGlrZWxpaG9vZCBvZiBBSU4gb24gYmlvcHN5LCBndWlkaW5nIGRlY2lzaW9ucyBhYm91dCB3aG8gc2hvdWxkIHVuZGVyZ28ga2lkbmV5IGJpb3BzeS4gUGFydGljdWxhcmx5IGhlbHBmdWwgd2l0aCBhdHlwaWNhbCBvciBzdWJjbGluaWNhbCBwcmVzZW50YXRpb25zIHdoZXJlIHRoZSBjbGFzc2ljIHRyaWFkIChyYXNoLCBmZXZlciwgZW9zaW5vcGhpbGlhKSBpcyBhYnNlbnQgKH45MCUgb2YgY2FzZXMpLiBBSU4gYWNjb3VudHMgZm9yIDE1LTI3JSBvZiB1bmV4cGxhaW5lZCBBS0kgb24gYmlvcHN5LiBNb3N0IGNvbW1vbiBjdWxwcml0czogUFBJcywgYW50aWJpb3RpY3MsIE5TQUlEcywgY2hlY2twb2ludCBpbmhpYml0b3JzLiBUcmVhdG1lbnQ6IHdpdGhkcmF3IG9mZmVuZGluZyBkcnVnOyBpZiBubyBDciByZWNvdmVyeSBpbiA1LTcgZGF5cywgc3RhcnQgcHJlZG5pc29uZSAxIG1nL2tnIChHb256YWxleiwgS2lkbmV5IEludCAyMDA4IOKAlCBlYXJsaWVyIHN0ZXJvaWRzIGltcHJvdmUgcmVjb3ZlcnkpLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiY3IiLGxhYmVsOiJTZXJ1bSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi41In0sCiAgICAgICAgICB7aWQ6ImJ1biIsbGFiZWw6IkJsb29kIFVyZWEgTml0cm9nZW4gKEJVTikiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIyOCJ9LAogICAgICAgICAge2lkOiJ1c2ciLGxhYmVsOiJVcmluZSBTcGVjaWZpYyBHcmF2aXR5IChkaXBzdGljaykiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiMS4wMTIifSwKICAgICAgICAgIHtpZDoidV9wcm90ZWluIixsYWJlbDoiVXJpbmUgRGlwc3RpY2sgUHJvdGVpbiIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiMSsgb3IgbG93ZXIiLCIyKyBvciBoaWdoZXIiXX0sCiAgICAgICAgICB7aWQ6InByZXZhbGVuY2UiLGxhYmVsOiJMb2NhbCBBSU4gcHJldmFsZW5jZSBhbW9uZyBiaW9wc2llcyAoZGVyaXZhdGlvbiBjb2hvcnQ6IDAuMjM7IHZhcmllcyBieSBjZW50cmUsIGUuZy4gSkhIIDAuMDUsIFlhbGUgMC4xNykiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiMC4yMyJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGNyPSt2LmNyLCBidW49K3YuYnVuLCBzZz0rdi51c2csIHByZXY9K3YucHJldmFsZW5jZXx8MC4yMzsKICAgICAgICAgIGlmKCFjcnx8IWJ1bnx8IXNnfHxjcjw9MHx8YnVuPD0wfHxzZzwxLjB8fHNnPjEuMDUwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGJ1bkNyUmF0aW89YnVuL2NyOwogICAgICAgICAgY29uc3QgcHJvdENvZWZmPXYudV9wcm90ZWluPT09IjErIG9yIGxvd2VyIj8wLjkzNjAxMjc6MDsKICAgICAgICAgIGNvbnN0IHN1bT0wLjgzNjc1MTgqTWF0aC5sb2coY3IpKygtMC45MTgxOTM4Kk1hdGgubG9nKGJ1bkNyUmF0aW8pKSsoLTAuMDUwMTIwMyoxMDAwKihzZy0xKSkrcHJvdENvZWZmKzAuNzcwMzk4K01hdGgubG9nKHByZXYvMC4yMyk7CiAgICAgICAgICBjb25zdCBwcm9iPTEwMCooTWF0aC5leHAoc3VtKS8oMStNYXRoLmV4cChzdW0pKSk7CiAgICAgICAgICByZXR1cm4ge3ZhbDpwcm9iLnRvRml4ZWQoMSksdW5pdDoiJSBwcm9iYWJpbGl0eSBvZiBBSU4gb24gYmlvcHN5IixzZWM6YEJVTjpDciByYXRpbzogJHtidW5DclJhdGlvLnRvRml4ZWQoMSl9IHwgU0c6ICR7c2d9IHwgUHJvdGVpbjogJHt2LnVfcHJvdGVpbn0gfCBMb2NhbCBwcmV2YWxlbmNlOiAke3ByZXZ9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IHByb2I9K3IudmFsOwogICAgICAgICAgY29uc3QgY3I9K3YuY3IsIGJ1bj0rdi5idW47CiAgICAgICAgICBjb25zdCByYXRpbz1idW4vY3I7CiAgICAgICAgICBsZXQgbXNnPWBBSU4gcHJvYmFiaWxpdHk6ICR7ci52YWx9JSAoTW9sZWRpbmEgbW9kZWwsIEFVQyAwLjcz4oCTMC43OCkuIGA7CiAgICAgICAgICBpZihwcm9iPj01MCkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0Om1zZytgSElHSCBwcm9iYWJpbGl0eSBvZiBBSU4gb24gYmlvcHN5LiBGZWF0dXJlcyBmYXZvdXJpbmcgQUlOOiAke2NyPjEuNT8iZWxldmF0ZWQgY3JlYXRpbmluZSwgIjoiIn0ke3JhdGlvPDIwPyJsb3cgQlVOOkNyIHJhdGlvIChpbnRyaW5zaWMgcmVuYWwgcGF0dGVybiksICI6IiJ9JHt2LnVfcHJvdGVpbj09PSIxKyBvciBsb3dlciI/ImFic2VudCBvciBtaW5pbWFsIHByb3RlaW51cmlhICh0eXBpY2FsIG9mIEFJTikuICI6IiJ9U3Ryb25nIGluZGljYXRpb24gZm9yIGtpZG5leSBiaW9wc3kuIFdpdGhkcmF3IHN1c3BlY3RlZCBkcnVnIGltbWVkaWF0ZWx5IChQUElzLCBhbnRpYmlvdGljcywgTlNBSURzLCBjaGVja3BvaW50IGluaGliaXRvcnMpLiBJZiBiaW9wc3kgY29uZmlybXMgQUlOIGFuZCBubyBDciBpbXByb3ZlbWVudCBpbiA1LTcgZGF5cywgaW5pdGlhdGUgcHJlZG5pc29uZSAxIG1nL2tnL2RheS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHByb2I+PTI1KSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6bXNnK2BNT0RFUkFURSBwcm9iYWJpbGl0eS4gQ29uc2lkZXIga2lkbmV5IGJpb3BzeSwgZXNwZWNpYWxseSBpZiBBS0kgaXMgdW5leHBsYWluZWQgb3IgYSBzdGVyb2lkLXJlc3BvbnNpdmUgQUlOIGRpYWdub3NpcyB3b3VsZCBjaGFuZ2UgbWFuYWdlbWVudC4gUmV2aWV3IG1lZGljYXRpb25zIGZvciBjdWxwcml0IGRydWdzIChQUElzIGFyZSBub3cgdGhlIG1vc3QgY29tbW9uIGNhdXNlKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHByb2I+PTEwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6bXNnK2BMT1ctTU9ERVJBVEUgcHJvYmFiaWxpdHkuIEFJTiBsZXNzIGxpa2VseSBidXQgY2Fubm90IGJlIGV4Y2x1ZGVkLiBNb25pdG9yIHJlbmFsIGZ1bmN0aW9uIGNsb3NlbHkuIElmIEFLSSBwZXJzaXN0cyBvciB3b3JzZW5zIHdpdGhvdXQgY2xlYXIgYWV0aW9sb2d5LCByZWNvbnNpZGVyIGJpb3BzeS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDptc2crYExPVyBwcm9iYWJpbGl0eSBvZiBBSU4uIENvbnNpZGVyIGFsdGVybmF0aXZlIGRpYWdub3NlcyAoQVROLCBwcmUtcmVuYWwsIG9ic3RydWN0aXZlKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCgogICAgXQogIH0sCgogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIC8vIFYuIEtJRE5FWSBGQUlMVVJFIFJJU0sg4oCUIEtGUkUsCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgewogICAgaWQ6InM1IiwgbGFiZWw6IktpZG5leSBGYWlsdXJlIFJpc2sg4oCUIEtGUkUiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6ImtmcmU0IiwgbmFtZToiS0ZSRSA0LVZhcmlhYmxlIiwgcmVmOiJUYW5ncmkgZXQgYWwuLCBKQU1BIDIwMTEiLCB0YWc6IjJ5ciAmIDV5ciBFU1JEIFByb2JhYmlsaXR5IiwKICAgICAgICBmb3JtdWxhOiJSaXNr4oKC4bWn4bWjID0gMSDiiJIgMC45ODMyXmV4cChMUClcbkxQID0g4oiSMC4yMjAxKEFnZS8xMOKIkjcuMDM2KSArIDAuMjQ2NyhNYWxl4oiSMC41NjQyKSDiiJIgMC41NTY3KGVHRlIvNeKIkjcuMjIyKSArIDAuNDUxMChsbkFDUuKIkjUuMTM3KSIsCiAgICAgICAgbm90ZToiQUNSIGluIG1nL2cuIFZhbGlkYXRlZCBDS0QgRzPigJNHNS4gR3VpZGVzIHRpbWluZyBvZiBhY2Nlc3MgY3JlYXRpb24gYW5kIHRyYW5zcGxhbnQgcmVmZXJyYWwuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJhZ2UiLGxhYmVsOiJBZ2UiLHVuaXQ6InllYXJzIix0eXBlOiJudW1iZXIiLHBoOiI2MCJ9LAogICAgICAgICAge2lkOiJzZXgiLGxhYmVsOiJTZXgiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk1hbGUiLCJGZW1hbGUiXX0sCiAgICAgICAgICB7aWQ6ImVnZnIiLGxhYmVsOiJlR0ZSIix1bml0OiJtTC9taW4vMS43M23CsiIsdHlwZToibnVtYmVyIixwaDoiMjUifSwKICAgICAgICAgIHtpZDoiYWNyIixsYWJlbDoiVXJpbmUgQUNSIix1bml0OiJtZy9nIix0eXBlOiJudW1iZXIiLHBoOiIzMDAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBhZ2U9K3YuYWdlLGVnZnI9K3YuZWdmcixhY3I9K3YuYWNyOyBpZighYWdlfHwhZWdmcnx8IWFjcnx8YWNyPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IG09di5zZXg9PT0iTWFsZSI/MTowOwogICAgICAgICAgY29uc3QgbHA9LTAuMjIwMSooYWdlLzEwLTcuMDM2KSswLjI0NjcqKG0tMC41NjQyKS0wLjU1NjcqKGVnZnIvNS03LjIyMikrMC40NTEwKihNYXRoLmxvZyhhY3IpLTUuMTM3KTsKICAgICAgICAgIGNvbnN0IHIyPSgxLU1hdGgucG93KDAuOTgzMixNYXRoLmV4cChscCkpKSoxMDAsIHI1PSgxLU1hdGgucG93KDAuOTM2NSxNYXRoLmV4cChscCkpKSoxMDA7CiAgICAgICAgICByZXR1cm4ge3ZhbDpyMi50b0ZpeGVkKDEpLHVuaXQ6IiUgMnlyIHJpc2siLHNlYzpgNXlyOiAke3I1LnRvRml4ZWQoMSl9JWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDMpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgMnlyIHJpc2sgJHtyLnZhbH0lIOKAlCBMb3cuIE9wdGltaXNlIG1vZGlmaWFibGUgcmlzayBmYWN0b3JzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjwxMCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmAyeXIgcmlzayAke3IudmFsfSUg4oCUIE1vZGVyYXRlLiBOZXBocm9sb2d5IHJlZmVycmFsLiBCZWdpbiBSUlQgZWR1Y2F0aW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjwyNSkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmAyeXIgcmlzayAke3IudmFsfSUg4oCUIEhpZ2guIEFjdGl2ZSBSUlQgcHJlcGFyYXRpb24uIEFjY2VzcyBwbGFubmluZyBhbmQgdHJhbnNwbGFudCByZWZlcnJhbC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgMnlyIHJpc2sgJHtyLnZhbH0lIOKAlCBWZXJ5IGhpZ2guIFVyZ2VudCBNRFQgaW5wdXQuIFByaW9yaXRpc2UgYWNjZXNzIGFuZCB0cmFuc3BsYW50IGxpc3RpbmcuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIC8vIFZJLiBDS0QtTUJELAogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHsKICAgIGlkOiJzNiIsIGxhYmVsOiJDS0QtTUJEIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJjb3JyY2EiLCBuYW1lOiJDb3JyZWN0ZWQgQ2FsY2l1bSIsIHJlZjoiUGF5bmUgZXQgYWwuLCBCTUogMTk3MyIsIHRhZzoiQWxidW1pbi1BZGp1c3RlZCBDYWxjaXVtIiwKICAgICAgICBmb3JtdWxhOiJDb3JyZWN0ZWQgQ2EgPSBNZWFzdXJlZCBDYSArIDAuOCDDlyAoNC4wIOKIkiBBbGJ1bWluKSIsCiAgICAgICAgbm90ZToiSW9uaXNlZCBjYWxjaXVtIHByZWZlcnJlZCBpbiBjcml0aWNhbCBpbGxuZXNzLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiY2EiLGxhYmVsOiJNZWFzdXJlZCBUb3RhbCBDYWxjaXVtIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiNy44In0sCiAgICAgICAgICB7aWQ6ImFsYiIsbGFiZWw6IkFsYnVtaW4iLHVuaXQ6ImcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuNSJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGNhPSt2LmNhLGFsYj0rdi5hbGI7IGlmKCFjYXx8IWFsYikgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooY2ErMC44Kig0LWFsYikpLnRvRml4ZWQoMiksdW5pdDoibWcvZEwifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodjw4LjUpIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgQ29ycmVjdGVkIENhICR7ci52YWx9IOKAlCBIeXBvY2FsY2FlbWlhLiBDaGVjayBQVEgsIHZpdGFtaW4gRCwgcGhvc3BoYXRlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj4xMC41KSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YENvcnJlY3RlZCBDYSAke3IudmFsfSDigJQgSHlwZXJjYWxjYWVtaWEuIFJldmlldyBjYWxjaXVtIGJpbmRlcnMgYW5kIHZpdGFtaW4gRC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQ29ycmVjdGVkIENhICR7ci52YWx9IOKAlCBOb3JtYWwgKDguNeKAkzEwLjUpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJjYXBob3MiLCBuYW1lOiJDYWxjaXVt4oCTUGhvc3BoYXRlIFByb2R1Y3QiLCByZWY6IktESUdPIENLRC1NQkQgMjAxNyIsIHRhZzoiVmFzY3VsYXIgQ2FsY2lmaWNhdGlvbiBSaXNrIiwKICAgICAgICBmb3JtdWxhOiJDYSDDlyBQaG9zcGhhdGUgKGJvdGggbWcvZEwpIiwKICAgICAgICBub3RlOiI+NTUgbWfCsi9kTMKyIGFzc29jaWF0ZWQgd2l0aCBlbGV2YXRlZCBDViBtb3J0YWxpdHkgaW4gZGlhbHlzaXMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJjYSIsbGFiZWw6IkNvcnJlY3RlZCBDYWxjaXVtIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiOS41In0sCiAgICAgICAgICB7aWQ6InBob3MiLGxhYmVsOiJQaG9zcGhhdGUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI1LjUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBjYT0rdi5jYSxwPSt2LnBob3M7IGlmKCFjYXx8IXApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KGNhKnApLnRvRml4ZWQoMSksdW5pdDoibWfCsi9kTMKyIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8NTUpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQ2HDl1Bob3MgJHtyLnZhbH0g4oCUIEJlbG93IDU1LiBDb250aW51ZSBtaW5lcmFsIG1hbmFnZW1lbnQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YENhw5dQaG9zICR7ci52YWx9IOKAlCBFbGV2YXRlZCAoPjU1KS4gU2lnbmlmaWNhbnQgY2FsY2lmaWNhdGlvbiByaXNrLiBSZXN0cmljdCBkaWV0YXJ5IHBob3NwaGF0ZSwgbm9uLWNhbGNpdW0gYmluZGVycyBwcmVmZXJyZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIC8vIFZJSS4gSEVQQVRPLVJFTkFMICYgQVNDSVRFUywKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICB7CiAgICBpZDoiczciLCBsYWJlbDoiSGVwYXRvLVJlbmFsICYgQXNjaXRlcyIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoibWVsZCIsIG5hbWU6Ik1FTEQgU2NvcmUiLCByZWY6IkthbWF0aCBldCBhbC4sIEhlcGF0b2xvZ3kgMjAwMSIsIHRhZzoiTGl2ZXIgRGlzZWFzZSBTZXZlcml0eSIsCiAgICAgICAgZm9ybXVsYToiTUVMRCA9IDMuNzjDl2xuKEJpbGkpICsgMTEuMsOXbG4oSU5SKSArIDkuNTfDl2xuKENyKSArIDYuNDMiLAogICAgICAgIG5vdGU6IkxpdmVyIHRyYW5zcGxhbnQgYWxsb2NhdGlvbi4gQ3IgY2FwcGVkIGF0IDQuMC4gSWYgZGlhbHlzaXMg4omlMsOXL3dlZWsgc2V0IENyID0gNC4wLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYmlsaSIsbGFiZWw6IkJpbGlydWJpbiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuNSJ9LAogICAgICAgICAge2lkOiJpbnIiLGxhYmVsOiJJTlIiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiMS44In0sCiAgICAgICAgICB7aWQ6ImNyIixsYWJlbDoiQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjEuNSJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGJpPSt2LmJpbGksaXI9K3YuaW5yLGNyPSt2LmNyOyBpZighYml8fCFpcnx8IWNyKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IEI9TWF0aC5tYXgoYmksMSksST1NYXRoLm1heChpciwxKSxDPU1hdGgubWluKE1hdGgubWF4KGNyLDEpLDQpOwogICAgICAgICAgcmV0dXJuIHt2YWw6TWF0aC5yb3VuZCgzLjc4Kk1hdGgubG9nKEIpKzExLjIqTWF0aC5sb2coSSkrOS41NypNYXRoLmxvZyhDKSs2LjQzKSx1bml0OiJwb2ludHMifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9ci52YWw7CiAgICAgICAgICBpZih2PDEwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YE1FTEQgJHt2fSDigJQgOTAtZGF5IG1vcnRhbGl0eSB+MiUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PDIwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YE1FTEQgJHt2fSDigJQgOTAtZGF5IG1vcnRhbGl0eSB+NiUuIENvbnNpZGVyIHRyYW5zcGxhbnQgZXZhbHVhdGlvbi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8MzApIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgTUVMRCAke3Z9IOKAlCA5MC1kYXkgbW9ydGFsaXR5IH4yMCUuIEhpZ2ggdHJhbnNwbGFudCBwcmlvcml0eS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgTUVMRCAke3Z9IOKAlCA5MC1kYXkgbW9ydGFsaXR5ID41MCUuIFVyZ2VudCB0cmFuc3BsYW50LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJzYWFnIiwgbmFtZToiU0FBRyIsIHJlZjoiUnVueW9uIGV0IGFsLiwgQW5uIEludGVybiBNZWQgMTk5MiIsIHRhZzoiUG9ydGFsIHZzIE5vbi1Qb3J0YWwgQXNjaXRlcyIsCiAgICAgICAgZm9ybXVsYToiU0FBRyA9IFNlcnVtIEFsYnVtaW4g4oiSIEFzY2l0ZXMgQWxidW1pblxu4omlMS4xID0gcG9ydGFsIGh5cGVydGVuc2lvbiAoOTclIGFjY3VyYWN5KSIsCiAgICAgICAgbm90ZToiU2ltdWx0YW5lb3VzIHNhbXBsZXMgcmVxdWlyZWQuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJzYWxiIixsYWJlbDoiU2VydW0gQWxidW1pbiIsdW5pdDoiZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMy44In0sCiAgICAgICAgICB7aWQ6ImFhbGIiLGxhYmVsOiJBc2NpdGVzIEFsYnVtaW4iLHVuaXQ6ImcvZEwiLHR5cGU6Im51bWJlciIscGg6IjEuMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHM9K3Yuc2FsYixhPSt2LmFhbGI7IGlmKCFzfHwhYSkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDoocy1hKS50b0ZpeGVkKDIpLHVuaXQ6ImcvZEwifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49MS4xKSByZXR1cm4ge2M6IiM3YzNhZWQiLHQ6YFNBQUcgJHtyLnZhbH0g4omlMS4xIOKAlCBQb3J0YWwgaHlwZXJ0ZW5zaW9uICg5NyUgYWNjdXJhY3kpLiBDaXJyaG9zaXMsIGNhcmRpYWMgYXNjaXRlcywgQnVkZC1DaGlhcmkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YFNBQUcgJHtyLnZhbH0gPDEuMSDigJQgTm9uLXBvcnRhbC4gRXh1ZGF0aXZlOiBwZXJpdG9uZWFsIG1hbGlnbmFuY3ksIFRCLCBwYW5jcmVhdGl0aXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIC8vIFZJSUkuIE5FUEhST1RJQyBTWU5EUk9NRSwKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICB7CiAgICBpZDoiczgiLCBsYWJlbDoiTmVwaHJvdGljIFN5bmRyb21lIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJ1cGNyX3N0YWdpbmciLCBuYW1lOiJVUENSICYgUHJvdGVpbnVyaWEgU3RhZ2luZyIsIHJlZjoiS0RJR08gQ0tEIDIwMTI7IEtESUdPIEdsb21lcnVsYXIgRGlzZWFzZXMgMjAyMSIsIHRhZzoiUHJvdGVpbnVyaWEgU3RhZ2luZyIsCiAgICAgICAgZm9ybXVsYToiVVBDUiAobWcvZykgPSBbVSBQcm90ZWluIC8gVSBDcmVhdGluaW5lXSDDlyAxMDAiLAogICAgICAgIG5vdGU6Ik5lcGhyb3RpYy1yYW5nZTogVVBDUiDiiaUzNTAwIG1nL2cgKOKJpTMuNSBnLzI0aCkuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ1X3Byb3QiLGxhYmVsOiJVcmluZSBUb3RhbCBQcm90ZWluIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMzUwIn0sCiAgICAgICAgICB7aWQ6InVfY3IiLGxhYmVsOiJVcmluZSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMTAwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgdXA9K3YudV9wcm90LCB1Yz0rdi51X2NyOwogICAgICAgICAgaWYoIXVwfHwhdWN8fHVjPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigodXAvdWMpKjEwMCkudG9GaXhlZCgwKSx1bml0OiJtZy9nIixzZWM6YH4keygodXAvdWMpKjEwMC8xMDAwKS50b0ZpeGVkKDIpfSBnL2RheWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDE1MCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBVUENSICR7ci52YWx9IOKAlCBOb3JtYWwgKDwxNTApLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjwxMDAwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YFVQQ1IgJHtyLnZhbH0g4oCUIFNpZ25pZmljYW50IHByb3RlaW51cmlhLiBSQUFTIGJsb2NrYWRlIGFuZCBTR0xUMmkgY29uc2lkZXJhdGlvbiByZWNvbW1lbmRlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8MzUwMCkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBVUENSICR7ci52YWx9IOKAlCBIZWF2eSBzdWItbmVwaHJvdGljIHByb3RlaW51cmlhLiBOZXBocm9sb2d5IHJlZmVycmFsLiBDb25zaWRlciBiaW9wc3kuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFVQQ1IgJHtyLnZhbH0g4oCUIE5lcGhyb3RpYy1yYW5nZSAoPj0zNTAwKS4gUmVuYWwgYmlvcHN5IHN0cm9uZ2x5IHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJzZWxlY3Rpdml0eSIsIG5hbWU6IlNlbGVjdGl2aXR5IEluZGV4IiwgcmVmOiJDYW1lcm9uICYgQmxhbmRmb3JkLCBMYW5jZXQgMTk2NiIsIHRhZzoiU2VsZWN0aXZlIHZzIE5vbi1TZWxlY3RpdmUiLAogICAgICAgIGZvcm11bGE6IlNJID0gKFVJZ0cvUElnRykgLyAoVVRyYW5zZmVycmluL1BUcmFuc2ZlcnJpbilcbjwwLjEgc2VsZWN0aXZlIChNQ0QpLiA+MC4yIG5vbi1zZWxlY3RpdmUiLAogICAgICAgIG5vdGU6IlJldGFpbnMgdXRpbGl0eSBpbiBwYWVkaWF0cmljIG5lcGhyb3RpYyBzeW5kcm9tZS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVpZ2ciLGxhYmVsOiJVcmluZSBJZ0ciLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI1In0sCiAgICAgICAgICB7aWQ6InBpZ2ciLGxhYmVsOiJQbGFzbWEgSWdHIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMTIwMCJ9LAogICAgICAgICAge2lkOiJ1dGYiLGxhYmVsOiJVcmluZSBUcmFuc2ZlcnJpbiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjMwIn0sCiAgICAgICAgICB7aWQ6InB0ZiIsbGFiZWw6IlBsYXNtYSBUcmFuc2ZlcnJpbiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjI1MCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVpPSt2LnVpZ2cscGk9K3YucGlnZyx1dD0rdi51dGYscHQ9K3YucHRmOwogICAgICAgICAgaWYoIXVpfHwhcGl8fCF1dHx8IXB0fHxwaTw9MHx8cHQ8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KCh1aS9waSkvKHV0L3B0KSkudG9GaXhlZCgzKSx1bml0OiJyYXRpbyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDAuMSkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBTSSAke3IudmFsfSDigJQgSGlnaGx5IHNlbGVjdGl2ZS4gRmF2b3VycyBNQ0QuIFN0cm9uZyBzdGVyb2lkIHJlc3BvbnNlIGV4cGVjdGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjwwLjIpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgU0kgJHtyLnZhbH0g4oCUIEludGVybWVkaWF0ZS4gTUNEIG9yIGVhcmx5IEZTR1MuIEJpb3BzeSBpbmRpY2F0ZWQgaW4gYWR1bHRzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBTSSAke3IudmFsfSDigJQgTm9uLXNlbGVjdGl2ZS4gRmF2b3VycyBGU0dTLCBtZW1icmFub3VzLCBvciBzZWNvbmRhcnkgR04uIEJpb3BzeSBpbmRpY2F0ZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIC8vIElYLiBSQUFTICYgSFlQRVJURU5TSU9OLAogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHsKICAgIGlkOiJzOSIsIGxhYmVsOiJSQUFTICYgSHlwZXJ0ZW5zaW9uIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJhcnIiLCBuYW1lOiJBbGRvc3Rlcm9uZS1SZW5pbiBSYXRpbyAoQVJSKSIsIHJlZjoiRnVuZGVyIGV0IGFsLiwgSkNFTSAyMDE2IiwgdGFnOiJQcmltYXJ5IEFsZG9zdGVyb25pc20gU2NyZWVuIiwKICAgICAgICBmb3JtdWxhOiJBUlIgPSBQQUMgKG5nL2RMKSAvIFBSQSAobmcvbUwvaClcblBvc2l0aXZlOiBBUlIgPj0yMCBBTkQgUEFDID49MTUgbmcvZEwiLAogICAgICAgIG5vdGU6IkNvbGxlY3Qgb2ZmIHNwaXJvbm9sYWN0b25lID49NiB3ZWVrcy4gTm9ybWFsaXNlIEsrIGZpcnN0LiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYWxkbyIsbGFiZWw6IlBsYXNtYSBBbGRvc3Rlcm9uZSAoUEFDKSIsdW5pdDoibmcvZEwiLHR5cGU6Im51bWJlciIscGg6IjE4In0sCiAgICAgICAgICB7aWQ6InByYSIsbGFiZWw6IlBsYXNtYSBSZW5pbiBBY3Rpdml0eSAoUFJBKSIsdW5pdDoibmcvbUwvaCIsdHlwZToibnVtYmVyIixwaDoiMC40NSJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGE9K3YuYWxkbyxwPSt2LnByYTsKICAgICAgICAgIGlmKCFhfHwhcHx8cDw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooYS9wKS50b0ZpeGVkKDEpLHVuaXQ6IkFSUiIsc2VjOmBQQUM6ICR7YX0gbmcvZEwgfCBQUkE6ICR7cH0gbmcvbUwvaGB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBhcnI9K3IudmFsLGFsZG89K3YuYWxkbzsKICAgICAgICAgIGlmKGFycj49MjAmJmFsZG8+PTE1KSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEFSUiAke3IudmFsfSB3aXRoIFBBQyAke2FsZG99IOKAlCBQb3NpdGl2ZSBzY3JlZW4uIENvbmZpcm1hdG9yeSB0ZXN0aW5nIGluZGljYXRlZCAob3JhbCBzb2RpdW0gbG9hZGluZyBvciBJViBzYWxpbmUgaW5mdXNpb24pLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoYXJyPj0yMCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBBUlIgJHtyLnZhbH0g4oCUIFJhdGlvIGVsZXZhdGVkIGJ1dCBQQUMgJHthbGRvfSBiZWxvdyAxNS4gQm9yZGVybGluZS4gTG93IFBSQSBjYW4gYXJ0ZWZhY3R1YWxseSBlbGV2YXRlIEFSUi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQVJSICR7ci52YWx9IOKAlCBOZWdhdGl2ZSBzY3JlZW4uIFByaW1hcnkgYWxkb3N0ZXJvbmlzbSBsZXNzIGxpa2VseS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoicmVuaW5fcGhlbm8iLCBuYW1lOiJbUkVGXSBSZW5pbiBQaGVub3R5cGUgJiBEcnVnIFNlbGVjdGlvbiIsIHJlZjoiV2lsbGlhbXMgZXQgYWwuLCBCTUogMjAwNDsgTGFyYWdoLCBBbSBKIE1lZCAxOTc4IiwgdGFnOiJQUkEtR3VpZGVkIFRoZXJhcHkiLAogICAgICAgIGZvcm11bGE6IkxvdyBSZW5pbjogUFJBIDwwLjY1IC0+IFYtZHJ1Z3MgKFZvbHVtZSlcbkhpZ2ggUmVuaW46IFBSQSA+PTAuNjUgLT4gUi1kcnVncyAoUkFBUykiLAogICAgICAgIG5vdGU6IlJFRkVSRU5DRSBQQU5FTCDigJQgVGhpcyBpcyBub3QgYSB2YWxpZGF0ZWQgc2NvcmluZyB0b29sLiBQdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhIGFyZSBwcmVzZW50ZWQgZm9yIGNsaW5pY2FsIHJlZmVyZW5jZSBvbmx5LiBJbnRlcnByZXRhdGlvbiByZXF1aXJlcyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuXG5cblBSQS1ndWlkZWQgZHJ1ZyBzZWxlY3Rpb24gcGFpcnMgd2VsbCB3aXRoIHRoZSBBQkNEIHRyZWF0bWVudCBydWxlLiIsCiAgICAgICAgaW5wdXRzOltdLAogICAgICAgIGNvbXB1dGUoKXsgcmV0dXJuIHt2YWw6IlJlZmVyZW5jZSBQYW5lbCIsdW5pdDoiU2VlIGd1aWRlbGluZSBjcml0ZXJpYSBhYm92ZSJ9OyB9LAogICAgICAgIGludGVycHJldCgpeyByZXR1cm4ge2M6IiM2MzY2ZjEiLHQ6YFRoaXMgaXMgYSByZWZlcmVuY2UgcGFuZWwgc3VtbWFyaXNpbmcgcHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYS4gTm8gY29tcG9zaXRlIHNjb3JlIGlzIGNvbXB1dGVkLiBBcHBseSB0aGVzZSBjcml0ZXJpYSB1c2luZyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgd2l0aGluIHlvdXIgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJyZXNfaHRuIiwgbmFtZToiUmVzaXN0YW50IEh5cGVydGVuc2lvbiIsIHJlZjoiQ2FyZXkgZXQgYWwuLCBIeXBlcnRlbnNpb24gMjAxOCIsIHRhZzoiUmVzaXN0YW50IEhUTiIsCiAgICAgICAgZm9ybXVsYToiQlAgPnRhcmdldCBBTkQgPj0zIGRydWdzIGF0IG9wdGltYWwgZG9zZXMgQU5EIGluY2x1ZGVzIGRpdXJldGljIiwKICAgICAgICBub3RlOiJHVUlERUxJTkUtQkFTRUQgVE9PTCDigJQgVGhpcyBjYWxjdWxhdG9yIGFwcGxpZXMgcHVibGlzaGVkIGNsaW5pY2FsIHRocmVzaG9sZHMgYnV0IGlzIG5vdCBpdHNlbGYgYSB2YWxpZGF0ZWQgY29tcG9zaXRlIHNjb3JpbmcgaW5zdHJ1bWVudC4gSW50ZXJwcmV0IHdpdGhpbiBjbGluaWNhbCBjb250ZXh0LlxuXG5Db25maXJtIHRydWUgcmVzaXN0YW5jZTogYWRoZXJlbmNlIHZlcmlmaWVkLCB3aGl0ZS1jb2F0IGV4Y2x1ZGVkLCBzZWNvbmRhcnkgY2F1c2VzIHNjcmVlbmVkLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYnBfdGFyZ2V0IixsYWJlbDoiQlAgYWJvdmUgdGFyZ2V0IGRlc3BpdGUgdHJlYXRtZW50Iix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJkcnVnczMiLGxhYmVsOiJPbiA+PTMgZHJ1ZyBjbGFzc2VzIGF0IG9wdGltYWwgZG9zZXMiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImRpdXJldGljIixsYWJlbDoiUmVnaW1lbiBpbmNsdWRlcyBhIGRpdXJldGljIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJhZGhlcmVuY2UiLGxhYmVsOiJBZGhlcmVuY2UgY29uZmlybWVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJzZWNvbmRhcnkiLGxhYmVsOiJTZWNvbmRhcnkgY2F1c2VzIGV4Y2x1ZGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHBvc3M9di5icF90YXJnZXQmJnYuZHJ1Z3MzJiZ2LmRpdXJldGljOwogICAgICAgICAgY29uc3QgY29uZmlybWVkPXBvc3MmJnYuYWRoZXJlbmNlJiZ2LnNlY29uZGFyeTsKICAgICAgICAgIHJldHVybiB7dmFsOmNvbmZpcm1lZD8iVFJVRSBSRVNJU1RBTlQgSFROIjpwb3NzPyJQT1NTSUJMRSAoVU5DT05GSVJNRUQpIjoiRE9FUyBOT1QgTUVFVCBDUklURVJJQSIsdW5pdDoiIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBpZihyLnZhbD09PSJUUlVFIFJFU0lTVEFOVCBIVE4iKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFRydWUgcmVzaXN0YW50IEhUTiBjb25maXJtZWQuIENvbnNpZGVyIHNwaXJvbm9sYWN0b25lIGFzIDR0aCBhZ2VudC4gUkROIGVsaWdpYmlsaXR5IGFzc2Vzc21lbnQgaWYgZUdGUiA+NDAuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihyLnZhbC5pbmNsdWRlcygiVU5DT05GSVJNRUQiKSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBQb3NzaWJseSByZXNpc3RhbnQuIENvbmZpcm0gYWRoZXJlbmNlLCBwZXJmb3JtIEFCUE0sIHNjcmVlbiBzZWNvbmRhcnkgY2F1c2VzIGJlZm9yZSBsYWJlbGxpbmcuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YERvZXMgbm90IG1lZXQgcmVzaXN0YW50IEhUTiBjcml0ZXJpYS4gT3B0aW1pc2UgY3VycmVudCByZWdpbWVuLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAvLyBYLiBDQVJESU9SRU5BTCBTWU5EUk9NRSwKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICB7CiAgICBpZDoiczEwIiwgbGFiZWw6IkNhcmRpb3JlbmFsIFN5bmRyb21lIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJjcnMxIiwgbmFtZToiW1JFRl0gQ1JTIFR5cGUgMSAoQWN1dGUgSEYgLT4gQUtJKSIsIHJlZjoiUm9uY28gZXQgYWwuLCBKQUNDIDIwMDgiLCB0YWc6IkFjdXRlIENSUyIsCiAgICAgICAgZm9ybXVsYToiUmVuYWwgUGVyZnVzaW9uIFByZXNzdXJlID0gTUFQIC0gQ1ZQIiwKICAgICAgICBub3RlOiJSRUZFUkVOQ0UgUEFORUwg4oCUIFRoaXMgaXMgbm90IGEgdmFsaWRhdGVkIHNjb3JpbmcgdG9vbC4gUHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYSBhcmUgcHJlc2VudGVkIGZvciBjbGluaWNhbCByZWZlcmVuY2Ugb25seS4gSW50ZXJwcmV0YXRpb24gcmVxdWlyZXMgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50LlxuXG5WZW5vdXMgY29uZ2VzdGlvbiBjb250cmlidXRlcyB0byBBS0kgYXMgbXVjaCBhcyByZWR1Y2VkIGNhcmRpYWMgb3V0cHV0LiIsCiAgICAgICAgaW5wdXRzOltdLAogICAgICAgIGNvbXB1dGUoKXsgcmV0dXJuIHt2YWw6IlJlZmVyZW5jZSBQYW5lbCIsdW5pdDoiU2VlIGd1aWRlbGluZSBjcml0ZXJpYSBhYm92ZSJ9OyB9LAogICAgICAgIGludGVycHJldCgpeyByZXR1cm4ge2M6IiM2MzY2ZjEiLHQ6YFRoaXMgaXMgYSByZWZlcmVuY2UgcGFuZWwgc3VtbWFyaXNpbmcgcHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYS4gTm8gY29tcG9zaXRlIHNjb3JlIGlzIGNvbXB1dGVkLiBBcHBseSB0aGVzZSBjcml0ZXJpYSB1c2luZyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgd2l0aGluIHlvdXIgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJmZW5hX2NhcmRpbyIsIG5hbWU6IkZFTmEgaW4gQ2FyZGlvcmVuYWwiLCByZWY6Ik11bGxlbnMgZXQgYWwuLCBKQUNDIDIwMDkiLCB0YWc6IkZFTmEgaW4gVm9sdW1lIE92ZXJsb2FkIiwKICAgICAgICBmb3JtdWxhOiJGRU5hIDwxJSB3aXRoIHZvbHVtZSBvdmVybG9hZCA9IGVmZmVjdGl2ZSBhcnRlcmlhbCB1bmRlcmZpbGxpbmciLAogICAgICAgIG5vdGU6IkdVSURFTElORS1CQVNFRCBUT09MIOKAlCBUaGlzIGNhbGN1bGF0b3IgYXBwbGllcyBwdWJsaXNoZWQgY2xpbmljYWwgdGhyZXNob2xkcyBidXQgaXMgbm90IGl0c2VsZiBhIHZhbGlkYXRlZCBjb21wb3NpdGUgc2NvcmluZyBpbnN0cnVtZW50LiBJbnRlcnByZXQgd2l0aGluIGNsaW5pY2FsIGNvbnRleHQuXG5cblBhcmFkb3ggb2YgQ1JTOiBGRU5hIDwxJSBkZXNwaXRlIGZsdWlkIG92ZXJsb2FkLiBMb3cgRUFCViB0cmlnZ2VycyBhdmlkIE5hIHJldGVudGlvbi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVuYSIsbGFiZWw6IlVyaW5lIFNvZGl1bSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjEyIn0sCiAgICAgICAgICB7aWQ6InBuYSIsbGFiZWw6IlBsYXNtYSBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIxNDAifSwKICAgICAgICAgIHtpZDoidWNyIixsYWJlbDoiVXJpbmUgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjYwIn0sCiAgICAgICAgICB7aWQ6InBjciIsbGFiZWw6IlBsYXNtYSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi41In0sCiAgICAgICAgICB7aWQ6InZvbCIsbGFiZWw6IlZvbHVtZSBzdGF0dXMiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIlZvbHVtZSBvdmVybG9hZGVkIiwiVm9sdW1lIGRlcGxldGUiLCJFdXZvbGFlbWljIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVuPSt2LnVuYSxwbj0rdi5wbmEsdWM9K3YudWNyLHBjPSt2LnBjcjsKICAgICAgICAgIGlmKCF1bnx8IXBufHwhdWN8fCFwY3x8cG48PTB8fHVjPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigodW4vcG4pLyh1Yy9wYykqMTAwKS50b0ZpeGVkKDIpLHVuaXQ6IiUifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgZmVuYT0rci52YWw7CiAgICAgICAgICBpZihmZW5hPDEmJnYudm9sPT09IlZvbHVtZSBvdmVybG9hZGVkIikgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBGRU5hICR7ci52YWx9JSB3aXRoIG92ZXJsb2FkIOKAlCBDbGFzc2ljIENSUy4gQXZpZCBOYSByZXRlbnRpb24gZGVzcGl0ZSBmbHVpZCBleGNlc3MuIE9wdGltaXNlIENPLCBhZ2dyZXNzaXZlIGRpdXJlc2lzIG9yIFVGLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoZmVuYTwxKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEZFTmEgJHtyLnZhbH0lIOKAlCBQcmUtcmVuYWwuIEFkZHJlc3MgZWZmZWN0aXZlIGNpcmN1bGF0aW5nIHZvbHVtZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgRkVOYSAke3IudmFsfSUgKD49MSUpIOKAlCBJbnRyaW5zaWMgY29tcG9uZW50LiBSZXZpZXcgZm9yIGNvbmN1cnJlbnQgQVROLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAvLyBYSS4gR0xPTUVSVUxBUiBESVNFQVNFUywKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICB7CiAgICBpZDoiczExIiwgbGFiZWw6Ikdsb21lcnVsYXIgRGlzZWFzZXMiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6ImFudGlfZ2JtIiwgbmFtZToiW1JFRl0gQW50aS1HQk0gRGlzZWFzZSIsIHJlZjoiUHVzZXkgQ0QsIEtpZG5leSBJbnQgMjAwMyIsIHRhZzoiR29vZHBhc3R1cmUgLyBBbnRpLUdCTSIsCiAgICAgICAgZm9ybXVsYToiQW50aS1HQk0gdGl0cmUgcG9zaXRpdmUgKyBSUEdOICsvLSBwdWxtb25hcnkgaGFlbW9ycmhhZ2UiLAogICAgICAgIG5vdGU6IlJFRkVSRU5DRSBQQU5FTCDigJQgVGhpcyBpcyBub3QgYSB2YWxpZGF0ZWQgc2NvcmluZyB0b29sLiBQdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhIGFyZSBwcmVzZW50ZWQgZm9yIGNsaW5pY2FsIHJlZmVyZW5jZSBvbmx5LiBJbnRlcnByZXRhdGlvbiByZXF1aXJlcyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuXG5cbk1FRElDQUwgRU1FUkdFTkNZLiBUcmVhdCB3aXRob3V0IGF3YWl0aW5nIGJpb3BzeSBpZiBjbGluaWNhbCBwaWN0dXJlIGNsZWFyLiIsCiAgICAgICAgaW5wdXRzOltdLAogICAgICAgIGNvbXB1dGUoKXsgcmV0dXJuIHt2YWw6IlJlZmVyZW5jZSBQYW5lbCIsdW5pdDoiU2VlIGd1aWRlbGluZSBjcml0ZXJpYSBhYm92ZSJ9OyB9LAogICAgICAgIGludGVycHJldCgpeyByZXR1cm4ge2M6IiM2MzY2ZjEiLHQ6YFRoaXMgaXMgYSByZWZlcmVuY2UgcGFuZWwgc3VtbWFyaXNpbmcgcHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYS4gTm8gY29tcG9zaXRlIHNjb3JlIGlzIGNvbXB1dGVkLiBBcHBseSB0aGVzZSBjcml0ZXJpYSB1c2luZyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgd2l0aGluIHlvdXIgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJhbmNhIiwgbmFtZToiW1JFRl0gQU5DQS1Bc3NvY2lhdGVkIFZhc2N1bGl0aXMiLCByZWY6Ikplbm5ldHRlIGV0IGFsLiwgQXJ0aHJpdGlzIFJoZXVtIDIwMTMiLCB0YWc6IkFBViDigJQgR1BBL01QQSIsCiAgICAgICAgZm9ybXVsYToiQU5DQSAoUFIzIG9yIE1QTykgcG9zaXRpdmUgKyBSUEdOIG9yIHN5c3RlbWljIHZhc2N1bGl0aXMiLAogICAgICAgIG5vdGU6IlJFRkVSRU5DRSBQQU5FTCDigJQgVGhpcyBpcyBub3QgYSB2YWxpZGF0ZWQgc2NvcmluZyB0b29sLiBQdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhIGFyZSBwcmVzZW50ZWQgZm9yIGNsaW5pY2FsIHJlZmVyZW5jZSBvbmx5LiBJbnRlcnByZXRhdGlvbiByZXF1aXJlcyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuXG5cblJQR04gaXMgYSBuZXBocm9sb2d5IGVtZXJnZW5jeSByZXF1aXJpbmcgc2FtZS1kYXkgZXZhbHVhdGlvbi4iLAogICAgICAgIGlucHV0czpbXSwKICAgICAgICBjb21wdXRlKCl7IHJldHVybiB7dmFsOiJSZWZlcmVuY2UgUGFuZWwiLHVuaXQ6IlNlZSBndWlkZWxpbmUgY3JpdGVyaWEgYWJvdmUifTsgfSwKICAgICAgICBpbnRlcnByZXQoKXsgcmV0dXJuIHtjOiIjNjM2NmYxIix0OmBUaGlzIGlzIGEgcmVmZXJlbmNlIHBhbmVsIHN1bW1hcmlzaW5nIHB1Ymxpc2hlZCBndWlkZWxpbmUgY3JpdGVyaWEuIE5vIGNvbXBvc2l0ZSBzY29yZSBpcyBjb21wdXRlZC4gQXBwbHkgdGhlc2UgY3JpdGVyaWEgdXNpbmcgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50IHdpdGhpbiB5b3VyIGluc3RpdHV0aW9uYWwgcHJvdG9jb2xzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiY29tcGxlbWVudF9hY3QiLCBuYW1lOiJbUkVGXSBDb21wbGVtZW50IFBhdHRlcm4iLCByZWY6IlNldGhpICYgRmVydmVuemEsIE5FSk0gMjAxMiIsIHRhZzoiQzMvQzQgRGlmZmVyZW50aWF0aW9uIiwKICAgICAgICBmb3JtdWxhOiJDMyBMb3cgKyBDNCBMb3cgPSBDbGFzc2ljYWwgKFNMRSwgSUMtTVBHTilcbkMzIExvdyArIEM0IE5vcm1hbCA9IEFsdGVybmF0aXZlIChDM0csIFBTR04sIGFIVVMpIiwKICAgICAgICBub3RlOiJSRUZFUkVOQ0UgUEFORUwg4oCUIFRoaXMgaXMgbm90IGEgdmFsaWRhdGVkIHNjb3JpbmcgdG9vbC4gUHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYSBhcmUgcHJlc2VudGVkIGZvciBjbGluaWNhbCByZWZlcmVuY2Ugb25seS4gSW50ZXJwcmV0YXRpb24gcmVxdWlyZXMgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50LlxuXG5Fc3NlbnRpYWwgaW4gR04gd29ya3VwLiBQYXR0ZXJuIG5hcnJvd3MgZGlmZmVyZW50aWFsIGJlZm9yZSBiaW9wc3kuIiwKICAgICAgICBpbnB1dHM6W10sCiAgICAgICAgY29tcHV0ZSgpeyByZXR1cm4ge3ZhbDoiUmVmZXJlbmNlIFBhbmVsIix1bml0OiJTZWUgZ3VpZGVsaW5lIGNyaXRlcmlhIGFib3ZlIn07IH0sCiAgICAgICAgaW50ZXJwcmV0KCl7IHJldHVybiB7YzoiIzYzNjZmMSIsdDpgVGhpcyBpcyBhIHJlZmVyZW5jZSBwYW5lbCBzdW1tYXJpc2luZyBwdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhLiBObyBjb21wb3NpdGUgc2NvcmUgaXMgY29tcHV0ZWQuIEFwcGx5IHRoZXNlIGNyaXRlcmlhIHVzaW5nIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudCB3aXRoaW4geW91ciBpbnN0aXR1dGlvbmFsIHByb3RvY29scy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIC8vIFhJSS4gVkFTQ1VMQVIgTkVQSFJPTE9HWSwKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICB7CiAgICBpZDoiczEyIiwgbGFiZWw6IlZhc2N1bGFyIE5lcGhyb2xvZ3kiLAogICAgY2FsY3M6WwogICAgXQogIH0sCgogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIC8vIFhJSUkuIEhBRU1BVE9MT0dJQyDigJQgVE1BLAogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHsKICAgIGlkOiJzMTMiLCBsYWJlbDoiSGFlbWF0b2xvZ2ljIOKAlCBUTUEiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6InRtYSIsIG5hbWU6IltSRUZdIFRNQSBEaWFnbm9zdGljIFBhdHRlcm4iLCByZWY6Ikdlb3JnZSBKTiwgTkVKTSAyMDA2IiwgdGFnOiJUaHJvbWJvdGljIE1pY3JvYW5naW9wYXRoeSIsCiAgICAgICAgZm9ybXVsYToiVE1BID0gQUtJICsgTUFIQSAoc2NoaXN0b2N5dGVzICsgbmVnIENvb21icykgKyBUaHJvbWJvY3l0b3BlbmlhICsgRWxldmF0ZWQgTERIIiwKICAgICAgICBub3RlOiJSRUZFUkVOQ0UgUEFORUwg4oCUIFRoaXMgaXMgbm90IGEgdmFsaWRhdGVkIHNjb3JpbmcgdG9vbC4gUHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYSBhcmUgcHJlc2VudGVkIGZvciBjbGluaWNhbCByZWZlcmVuY2Ugb25seS4gSW50ZXJwcmV0YXRpb24gcmVxdWlyZXMgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50LlxuXG5BREFNVFMxMyBpcyB0aGUga2V5IHRlc3QgZGlmZmVyZW50aWF0aW5nIFRUUCBmcm9tIG90aGVyIFRNQXMuIiwKICAgICAgICBpbnB1dHM6W10sCiAgICAgICAgY29tcHV0ZSgpeyByZXR1cm4ge3ZhbDoiUmVmZXJlbmNlIFBhbmVsIix1bml0OiJTZWUgZ3VpZGVsaW5lIGNyaXRlcmlhIGFib3ZlIn07IH0sCiAgICAgICAgaW50ZXJwcmV0KCl7IHJldHVybiB7YzoiIzYzNjZmMSIsdDpgVGhpcyBpcyBhIHJlZmVyZW5jZSBwYW5lbCBzdW1tYXJpc2luZyBwdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhLiBObyBjb21wb3NpdGUgc2NvcmUgaXMgY29tcHV0ZWQuIEFwcGx5IHRoZXNlIGNyaXRlcmlhIHVzaW5nIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudCB3aXRoaW4geW91ciBpbnN0aXR1dGlvbmFsIHByb3RvY29scy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImFkYW10czEzIiwgbmFtZToiQURBTVRTMTMgSW50ZXJwcmV0YXRpb24iLCByZWY6IlNhZGxlciBKRSwgTkVKTSAyMDA0IiwgdGFnOiJUVFAgdnMgYUhVUyIsCiAgICAgICAgZm9ybXVsYToiPDEwJSA9IFRUUCB8IDEwLTUwJSA9IEluZGV0ZXJtaW5hdGUgfCA+NTAlID0gVFRQIGV4Y2x1ZGVkIiwKICAgICAgICBub3RlOiJHVUlERUxJTkUtQkFTRUQgVE9PTCDigJQgVGhpcyBjYWxjdWxhdG9yIGFwcGxpZXMgcHVibGlzaGVkIGNsaW5pY2FsIHRocmVzaG9sZHMgYnV0IGlzIG5vdCBpdHNlbGYgYSB2YWxpZGF0ZWQgY29tcG9zaXRlIHNjb3JpbmcgaW5zdHJ1bWVudC4gSW50ZXJwcmV0IHdpdGhpbiBjbGluaWNhbCBjb250ZXh0LlxuXG5BREFNVFMxMyBjbGVhdmVzIHVsdHJhLWxhcmdlIFZXRiBtdWx0aW1lcnMuIENhbiBiZSBkZXBsZXRlZCBpbiBzZXBzaXMg4oCUIGludGVycHJldCBjYXV0aW91c2x5LiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYWRhbXRzMTMiLGxhYmVsOiJBREFNVFMxMyBBY3Rpdml0eSIsdW5pdDoiJSIsdHlwZToibnVtYmVyIixwaDoiOCJ9LAogICAgICAgICAge2lkOiJpbmhpYml0b3IiLGxhYmVsOiJBbnRpLUFEQU1UUzEzIGFudGlib2R5IHBvc2l0aXZlIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGE9K3YuYWRhbXRzMTM7IGlmKCFhJiZhIT09MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBjYXQ9YTwxMD8iVFRQIjphPD01MD8iSW5kZXRlcm1pbmF0ZSI6IlRUUCBFeGNsdWRlZCI7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjYXQsdW5pdDpgQURBTVRTMTM6ICR7YX0lYH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGE9K3YuYWRhbXRzMTM7CiAgICAgICAgICBpZihhPDEwKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEFEQU1UUzEzICR7YX0lIOKAlCBUVFAuICR7di5pbmhpYml0b3I/IkFjcXVpcmVkIChhbnRpYm9keSspIjoiQ29uZ2VuaXRhbCBpZiBhbnRpYm9keS0ifS4gUGxhc21hIGV4Y2hhbmdlICsgc3Rlcm9pZHMgKyByaXR1eGltYWIuIENhcGxhY2l6dW1hYiBpZiBhdmFpbGFibGUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihhPD01MCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBBREFNVFMxMyAke2F9JSDigJQgSW5kZXRlcm1pbmF0ZS4gTm90IGNsYXNzaWMgVFRQLiBDbGluaWNhbCBqdWRnZW1lbnQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEFEQU1UUzEzICR7YX0lIOKAlCBUVFAgZXhjbHVkZWQuIENvbnNpZGVyOiBhSFVTIChlY3VsaXp1bWFiKSwgU1RFQy1IVVMgKHN1cHBvcnRpdmUpLCBkcnVnLWluZHVjZWQsIEhFTExQLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAvLyBYSVYuIE9CU1RFVFJJQyBORVBIUk9MT0dZLAogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHsKICAgIGlkOiJzMTQiLCBsYWJlbDoiT2JzdGV0cmljIE5lcGhyb2xvZ3kiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6InBlX3VwY3IiLCBuYW1lOiJQcmVlY2xhbXBzaWEgUHJvdGVpbnVyaWEiLCByZWY6IkFDT0cgUHJhY3RpY2UgQnVsbGV0aW4gMjIyLCAyMDIwIiwgdGFnOiJQcm90ZWludXJpYSBpbiBQcmVnbmFuY3kiLAogICAgICAgIGZvcm11bGE6IlVQQ1IgPj0wLjMgbWcvbWcgPSBzaWduaWZpY2FudCBwcm90ZWludXJpYSBpbiBwcmVnbmFuY3kiLAogICAgICAgIG5vdGU6IkdVSURFTElORS1CQVNFRCBUT09MIOKAlCBUaGlzIGNhbGN1bGF0b3IgYXBwbGllcyBwdWJsaXNoZWQgY2xpbmljYWwgdGhyZXNob2xkcyBidXQgaXMgbm90IGl0c2VsZiBhIHZhbGlkYXRlZCBjb21wb3NpdGUgc2NvcmluZyBpbnN0cnVtZW50LiBJbnRlcnByZXQgd2l0aGluIGNsaW5pY2FsIGNvbnRleHQuXG5cblJlcXVpcmVzIG5ldy1vbnNldCBIVE4gPj0xNDAvOTAgYWZ0ZXIgMjAgd2Vla3MgZm9yIHByZWVjbGFtcHNpYSBkaWFnbm9zaXMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ1cGNyIixsYWJlbDoiU3BvdCBVcmluZSBQQ1IiLHVuaXQ6Im1nL21nIix0eXBlOiJudW1iZXIiLHBoOiIwLjQ1In0sCiAgICAgICAgICB7aWQ6InNicCIsbGFiZWw6IlN5c3RvbGljIEJQIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiIxNTAifSwKICAgICAgICAgIHtpZDoiZGJwIixsYWJlbDoiRGlhc3RvbGljIEJQIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiI5OCJ9LAogICAgICAgICAge2lkOiJnYSIsbGFiZWw6Ikdlc3RhdGlvbmFsIEFnZSIsdW5pdDoid2Vla3MiLHR5cGU6Im51bWJlciIscGg6IjMyIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgdXBjcj0rdi51cGNyLGdhPSt2LmdhOyBpZighdXBjcnx8IWdhKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOnVwY3IudG9GaXhlZCgyKSx1bml0OiJtZy9tZyBVUENSIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IHVwY3I9K3IudmFsLHNicD0rdi5zYnAsZGJwPSt2LmRicCxnYT0rdi5nYTsKICAgICAgICAgIGNvbnN0IGh0bj1zYnA+PTE0MHx8ZGJwPj05MDsKICAgICAgICAgIGlmKHVwY3I+PTAuMyYmaHRuKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFVQQ1IgJHtyLnZhbH0gd2l0aCBIVE4gYXQgJHtnYX13ayDigJQgUHJlZWNsYW1wc2lhIGNyaXRlcmlhIG1ldC4gTUZNIHJlZmVycmFsLiBBbnRpaHlwZXJ0ZW5zaXZlcy4gRm9ldGFsIHN1cnZlaWxsYW5jZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHVwY3I+PTAuMykgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBVUENSICR7ci52YWx9IOKAlCBTaWduaWZpY2FudCBwcm90ZWludXJpYSBhdCAke2dhfXdrIHdpdGhvdXQgSFROIHlldC4gTW9uaXRvciBjbG9zZWx5LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBVUENSICR7ci52YWx9IOKAlCBCZWxvdyB0aHJlc2hvbGQuIFJvdXRpbmUgbW9uaXRvcmluZy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoic2ZsdF9wbGdmIiwgbmFtZToic0ZsdC0xL1BsR0YgUmF0aW8iLCByZWY6IlZlcmxvaHJlbiBldCBhbC4sIEFtIEogT2JzdGV0IEd5bmVjb2wgMjAxMiIsIHRhZzoiUHJlZWNsYW1wc2lhIFByZWRpY3Rpb24iLAogICAgICAgIGZvcm11bGE6IjwzOCA9IGxvdyByaXNrIChydWxlIG91dCkgfCA+ODUgKDIwLTM0d2spIG9yID4xMTAgKD4zNHdrKSA9IGhpZ2ggcmlzayIsCiAgICAgICAgbm90ZToiUmF0aW8gPDM4IGhhcyA5OSUgTlBWIGZvciBwcmVlY2xhbXBzaWEgd2l0aGluIDEgd2VlayAoUFJPR05PU0lTIHRyaWFsKS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InNmbHQiLGxhYmVsOiJzRmx0LTEiLHVuaXQ6InBnL21MIix0eXBlOiJudW1iZXIiLHBoOiI1MjAwIn0sCiAgICAgICAgICB7aWQ6InBsZ2YiLGxhYmVsOiJQbEdGIix1bml0OiJwZy9tTCIsdHlwZToibnVtYmVyIixwaDoiNDUifSwKICAgICAgICAgIHtpZDoiZ2EiLGxhYmVsOiJHZXN0YXRpb25hbCBBZ2UiLHVuaXQ6IndlZWtzIix0eXBlOiJudW1iZXIiLHBoOiIzMCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHM9K3Yuc2ZsdCxwPSt2LnBsZ2YsZz0rdi5nYTsKICAgICAgICAgIGlmKCFzfHwhcHx8IWd8fHA8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KHMvcCkudG9GaXhlZCgxKSx1bml0OiJzRmx0LTEvUGxHRiByYXRpbyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCByYXRpbz0rci52YWwsZ2E9K3YuZ2E7CiAgICAgICAgICBjb25zdCB0aHJlc2hvbGQ9Z2E8PTM0Pzg1OjExMDsKICAgICAgICAgIGlmKHJhdGlvPDM4KSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YFJhdGlvICR7ci52YWx9ICg8MzgpIOKAlCBMT1cgUklTSy4gUHJlZWNsYW1wc2lhIHJ1bGVkIG91dCBmb3IgMSB3ZWVrIChOUFYgOTklKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHJhdGlvPHRocmVzaG9sZCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBSYXRpbyAke3IudmFsfSDigJQgSW50ZXJtZWRpYXRlLiBJbmNyZWFzZWQgc3VydmVpbGxhbmNlLiBNRk0gcmV2aWV3LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBSYXRpbyAke3IudmFsfSAoPj0ke3RocmVzaG9sZH0pIOKAlCBISUdIIFJJU0suIFByZWVjbGFtcHNpYSBpbW1pbmVudC4gVXJnZW50IE1GTS9vYnN0ZXRyaWMgcmV2aWV3LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAvLyBYVi4gUkNDICYgT05DT0xPR1ksCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgewogICAgaWQ6InMxNSIsIGxhYmVsOiJSQ0MgJiBPbmNvbG9neSIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoiaW1kYyIsIG5hbWU6IklNREMgQ3JpdGVyaWEgKEhlbmcpIiwgcmVmOiJIZW5nIGV0IGFsLiwgTGFuY2V0IE9uY29sIDIwMDkiLCB0YWc6Im1SQ0MgUHJvZ25vc2lzIiwKICAgICAgICBmb3JtdWxhOiIwID0gRmF2b3VyYWJsZSB8IDEtMiA9IEludGVybWVkaWF0ZSB8ID49MyA9IFBvb3IiLAogICAgICAgIG5vdGU6IlZhbGlkYXRlZCBpbiB0YXJnZXRlZCB0aGVyYXB5IGVyYS4gR3VpZGVzIGltbXVub3RoZXJhcHkgc2VsZWN0aW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoia3BzIixsYWJlbDoiS1BTIDw4MCUiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6InRpbWUxeXIiLGxhYmVsOiJEeCB0byBzeXN0ZW1pYyBUeCA8MSB5ZWFyIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJoYl9sb3ciLGxhYmVsOiJIYiBiZWxvdyBMTE4iLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNhX2hpZ2giLGxhYmVsOiJDb3JyZWN0ZWQgQ2EgYWJvdmUgVUxOIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJuZXV0IixsYWJlbDoiTmV1dHJvcGhpbHMgYWJvdmUgVUxOIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJwbHQiLGxhYmVsOiJQbGF0ZWxldHMgYWJvdmUgVUxOIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIHJldHVybiB7dmFsOlt2Lmtwcyx2LnRpbWUxeXIsdi5oYl9sb3csdi5jYV9oaWdoLHYubmV1dCx2LnBsdF0uZmlsdGVyKEJvb2xlYW4pLmxlbmd0aCx1bml0OiJyaXNrIGZhY3RvcnMifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9ci52YWw7CiAgICAgICAgICBpZih2PT09MCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmAke3Z9IGZhY3RvcnMg4oCUIEZhdm91cmFibGUuIE1lZGlhbiBPUyB+NDNtby4gSU8gY29tYmluYXRpb25zIG9yIHN1bml0aW5pYi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8PTIpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgJHt2fSBmYWN0b3Iocykg4oCUIEludGVybWVkaWF0ZS4gTWVkaWFuIE9TIH4yM21vLiBOaXZvK2lwaSBvciBwZW1icm8rYXhpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAke3Z9IGZhY3RvcnMg4oCUIFBvb3IuIE1lZGlhbiBPUyB+OG1vLiBOaXZvK2lwaSBvciBjYWJvK25pdm8uIEVhcmx5IHBhbGxpYXRpdmUgY2FyZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoicmVuYWxfbmVwaCIsIG5hbWU6IlJFTkFMIE5lcGhyb21ldHJ5IFNjb3JlIiwgcmVmOiJLdXRpa292ICYgVXp6bywgSiBVcm9sIDIwMDkiLCB0YWc6IlN1cmdpY2FsIENvbXBsZXhpdHkiLAogICAgICAgIGZvcm11bGE6IlNjb3JlID0gUiArIEUgKyBOICsgQSArIExcbkxvdyA0LTYgfCBNb2RlcmF0ZSA3LTkgfCBIaWdoIDEwLTEyIiwKICAgICAgICBub3RlOiJHdWlkZXMgcGFydGlhbCB2cyByYWRpY2FsIG5lcGhyZWN0b215IGRlY2lzaW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiciIsbGFiZWw6IlIgKFJhZGl1cykiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIjw9NGNtICgxKSIsIjQtN2NtICgyKSIsIj43Y20gKDMpIl19LAogICAgICAgICAge2lkOiJlIixsYWJlbDoiRSAoRXhvcGh5dGljKSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiPj01MCUgKDEpIiwiPDUwJSAoMikiLCJFbmRvcGh5dGljICgzKSJdfSwKICAgICAgICAgIHtpZDoibiIsbGFiZWw6Ik4gKE5lYXJuZXNzIHRvIHNpbnVzKSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiPj03bW0gKDEpIiwiNC02bW0gKDIpIiwiPDRtbSAoMykiXX0sCiAgICAgICAgICB7aWQ6ImwiLGxhYmVsOiJMIChMb2NhdGlvbikiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIkFib3ZlL2JlbG93IHBvbGFyICgxKSIsIkNyb3NzZXMgcG9sYXIgKDIpIiwiQmV0d2VlbiBwb2xhciAoMykiXX0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgcHRzPXM9PnBhcnNlSW50KHMubWF0Y2goL1woKFxkKylcKS8pPy5bMV18fCIwIik7CiAgICAgICAgICByZXR1cm4ge3ZhbDpbdi5yLHYuZSx2Lm4sdi5sXS5yZWR1Y2UoKGEseCk9PmErcHRzKHgpLDApLHVuaXQ6InBvaW50cyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj1yLnZhbDsKICAgICAgICAgIGlmKHY8PTYpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgUkVOQUwgJHt2fSDigJQgTG93IGNvbXBsZXhpdHkuIFBhcnRpYWwgbmVwaHJlY3RvbXkgcHJlZmVycmVkIGFuZCBmZWFzaWJsZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8PTkpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgUkVOQUwgJHt2fSDigJQgTW9kZXJhdGUgY29tcGxleGl0eS4gUGFydGlhbCBtYXkgYmUgZmVhc2libGUgd2l0aCBleHBlcmllbmNlZCBzdXJnZW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBSRU5BTCAke3Z9IOKAlCBIaWdoIGNvbXBsZXhpdHkuIFJhZGljYWwgbmVwaHJlY3RvbXkgb2Z0ZW4gcmVxdWlyZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InN0b25lIiwgbmFtZToiU1RPTkUgU2NvcmUiLCByZWY6Ik1vb3JlIGV0IGFsLiwgQW5uIEVtZXJnIE1lZCAyMDE0IiwgdGFnOiJVcmV0ZXJhbCBTdG9uZSBQcm9iYWJpbGl0eSIsCiAgICAgICAgZm9ybXVsYToiU2NvcmUgPSBTZXggKyBUaW1pbmcgKyBPcmlnaW4gKyBOYXVzZWEgKyBFcnl0aHJvY3l0ZXMiLAogICAgICAgIG5vdGU6IlByZWRpY3RzIHVyZXRlcmFsIHN0b25lIHByb2JhYmlsaXR5IGJlZm9yZSBDVCBLVUIuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJzZXgiLGxhYmVsOiJTZXgiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIkZlbWFsZSAoMCkiLCJNYWxlICgzKSJdfSwKICAgICAgICAgIHtpZDoidGltaW5nIixsYWJlbDoiU3VkZGVuIG9uc2V0Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJObyAoMCkiLCJZZXMgKDMpIl19LAogICAgICAgICAge2lkOiJvcmlnaW4iLGxhYmVsOiJGbGFuay9ncm9pbiBwYWluIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJObyAoMCkiLCJZZXMgKDMpIl19LAogICAgICAgICAge2lkOiJuYXVzZWEiLGxhYmVsOiJOYXVzZWEvdm9taXRpbmciLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vICgwKSIsIlllcyAoMSkiXX0sCiAgICAgICAgICB7aWQ6ImVyeXRoIixsYWJlbDoiSGFlbWF0dXJpYSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTm8gKDApIiwiWWVzICgzKSJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBwdHM9cz0+cGFyc2VJbnQocy5tYXRjaCgvXCgoXGQrKVwpLyk/LlsxXXx8IjAiKTsKICAgICAgICAgIHJldHVybiB7dmFsOlt2LnNleCx2LnRpbWluZyx2Lm9yaWdpbix2Lm5hdXNlYSx2LmVyeXRoXS5yZWR1Y2UoKGEseCk9PmErcHRzKHgpLDApLHVuaXQ6InBvaW50cyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj1yLnZhbDsKICAgICAgICAgIGlmKHY8PTUpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgU2NvcmUgJHt2fSDigJQgTG93IHByb2JhYmlsaXR5ICh+OSUpLiBDb25zaWRlciBhbHRlcm5hdGl2ZXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PD05KSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YFNjb3JlICR7dn0g4oCUIE1vZGVyYXRlICh+NTElKS4gQ1QgS1VCIHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBTY29yZSAke3Z9IOKAlCBIaWdoICh+ODklKS4gQ1QgS1VCLiBVcm9sb2d5IGlmID41bW0sIG9ic3RydWN0aW9uLCBvciBmZXZlci4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiaXJhZV9yZW5hbCIsIG5hbWU6ImlyQUUgUmVuYWwgVG94aWNpdHkg4oCUIE5lcGhyaXRpcyAoQVNDTyAyMDE4KSIsIHJlZjoiQnJhaG1lciBKUiwgTGFjY2hldHRpIEMsIFNjaG5laWRlciBCSiBldCBhbC4sIEpDTyAyMDE4OzM2KDE3KToxNzE0LTE3NjggKEFTQ08gR3VpZGVsaW5lIMKnNi4wLTYuMikiLCB0YWc6IkltbXVuZSBDaGVja3BvaW50IEluaGliaXRvciBOZXBocm90b3hpY2l0eSIsCiAgICAgICAgZm9ybXVsYToiQVNDTyDCpzYuMSBOZXBocml0aXMgR3JhZGluZyAoRXhwZXJ0IENvbnNlbnN1cyk6XG4gIEcxOiBDcmVhdGluaW5lIGxldmVsIGluY3JlYXNlIG9mID4wLjMgbWcvZEw7IGNyZWF0aW5pbmUgMS414oCTMi4ww5cgb3ZlciBiYXNlbGluZVxuICBHMjogQ3JlYXRpbmluZSAy4oCTM8OXIGFib3ZlIGJhc2VsaW5lXG4gIEczOiBDcmVhdGluaW5lID4zw5cgYmFzZWxpbmUgb3IgPjQuMCBtZy9kTDsgaG9zcGl0YWxpc2F0aW9uIGluZGljYXRlZFxuICBHNDogTGlmZS10aHJlYXRlbmluZyBjb25zZXF1ZW5jZXM7IGRpYWx5c2lzIGluZGljYXRlZCIsCiAgICAgICAgbm90ZToiwqc2LjAgRGlhZ25vc2lzICYgTW9uaXRvcmluZzogTW9uaXRvciBDciBwcmlvciB0byBldmVyeSBkb3NlLiBSb3V0aW5lIHVyaW5hbHlzaXMgaXMgbm90IG5lY2Vzc2FyeSBvdGhlciB0aGFuIHRvIHJ1bGUgb3V0IFVUSXMuIElmIG5vIHBvdGVudGlhbCBhbHRlcm5hdGl2ZSBjYXVzZSBvZiBBS0kgaWRlbnRpZmllZCwgZm9yZWdvIGJpb3BzeSBhbmQgcHJvY2VlZCBkaXJlY3RseSB3aXRoIGltbXVub3N1cHByZXNzaXZlIHRoZXJhcHkg4oCUIHN3aWZ0IHRyZWF0bWVudCBvZiB0aGUgYXV0b2ltbXVuZSBjb21wb25lbnQgaXMgaW1wb3J0YW50LiBSZWZsZXgga2lkbmV5IGJpb3BzeSBzaG91bGQgYmUgRElTQ09VUkFHRUQgdW50aWwgY29ydGljb3N0ZXJvaWQgdHJlYXRtZW50IGhhcyBiZWVuIGF0dGVtcHRlZC5cblxuwqc2LjEgTWFuYWdlbWVudDpcbiAgRzEg4oCUIENvbnNpZGVyIHRlbXBvcmFyaWx5IGhvbGRpbmcgSUNQaSBwZW5kaW5nIGV2YWx1YXRpb24gb2YgYWx0ZXJuYXRpdmUgYWV0aW9sb2dpZXMgKHJlY2VudCBJViBjb250cmFzdCwgbWVkaWNhdGlvbnMsIGZsdWlkIHN0YXR1cykuIEEgY2hhbmdlIHN0aWxsIDwxLjXDlyBVTE4gY291bGQgYmUgbWVhbmluZ2Z1bC5cbiAgRzIg4oCUIEhvbGQgSUNQaSB0ZW1wb3JhcmlseS4gTmVwaHJvbG9neSBjb25zdWx0LiBSdWxlIG91dCBvdGhlciBjYXVzZXM7IGlmIGV4Y2x1ZGVkLCBwcmVkbmlzb25lIDAuNeKAkzEgbWcva2cvZC4gSWYgd29yc2VuaW5nIG9yIG5vIGltcHJvdmVtZW50OiAx4oCTMiBtZy9rZy9kIGFuZCBwZXJtYW5lbnRseSBkaXNjb250aW51ZS4gSWYgaW1wcm92ZWQgdG8g4omkRzEsIHRhcGVyIHN0ZXJvaWRzIG92ZXIgNOKAkzYgd2Vla3MuIERpc2N1c3MgcmVzdW1wdGlvbiB3aXRoIHBhdGllbnQgKHJpc2tzIHZzIGJlbmVmaXRzKS5cbiAgRzMg4oCUIFBlcm1hbmVudGx5IGRpc2NvbnRpbnVlIElDUGkuIE5lcGhyb2xvZ3kgY29uc3VsdC4gU3Rlcm9pZHMgMeKAkzIgbWcva2cvZC4gTW9uaXRvciBDciB3ZWVrbHkuXG4gIEc0IOKAlCBBcyBHMyArIHVyZ2VudCBkaWFseXNpcy5cblxuwqc2LjIgRm9sbG93LXVwOlxuICBHMSDigJQgSWYgaW1wcm92ZWQgdG8gYmFzZWxpbmUsIHJlc3VtZSByb3V0aW5lIG1vbml0b3JpbmcuXG4gIEcyIOKAlCBUYXBlciBzdGVyb2lkcyBvdmVyIOKJpTMgd2Vla3M7IGlmIHBlcnNpc3RlbnQgPjcgZGF5cywgdHJlYXQgYXMgRzMuXG4gIEczIOKAlCBUYXBlciBvdmVyIOKJpTQgd2Vla3M7IGlmIHBlcnNpc3RlbnQgPjPigJM1IGRheXMsIGNvbnNpZGVyIG15Y29waGVub2xhdGUuXG4gIEc0IOKAlCBUYXBlciBvdmVyIOKJpTQgd2Vla3M7IGlmIHBlcnNpc3RlbnQgPjLigJMzIGRheXMsIGNvbnNpZGVyIG15Y29waGVub2xhdGUuXG5cbkFsbCByZWNvbW1lbmRhdGlvbnMgYXJlIGV4cGVydCBjb25zZW5zdXMgYmFzZWQsIHdpdGggYmVuZWZpdHMgb3V0d2VpZ2hpbmcgaGFybXMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJjcl9iYXNlIixsYWJlbDoiQmFzZWxpbmUgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjAuOSJ9LAogICAgICAgICAge2lkOiJjcl9ub3ciLGxhYmVsOiJDdXJyZW50IENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIyLjQifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBiYXNlPSt2LmNyX2Jhc2UsIG5vdz0rdi5jcl9ub3c7CiAgICAgICAgICBpZighYmFzZXx8IW5vd3x8YmFzZTw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCByYXRpbz1ub3cvYmFzZSwgcmlzZT1ub3ctYmFzZTsKICAgICAgICAgIGxldCBncmFkZT0wOwogICAgICAgICAgaWYobm93PjQuMHx8cmF0aW8+My4wKSBncmFkZT0zOwogICAgICAgICAgaWYocmF0aW8+PTIuMCYmZ3JhZGU8MykgZ3JhZGU9MjsKICAgICAgICAgIGlmKChyYXRpbz49MS41fHxyaXNlPjAuMykmJmdyYWRlPDIpIGdyYWRlPTE7CiAgICAgICAgICByZXR1cm4ge3ZhbDoiR3JhZGUgIitncmFkZSx1bml0OiIoQ3IgIityYXRpby50b0ZpeGVkKDIpKyLDlyBiYXNlbGluZTsgcmlzZSAiK3Jpc2UudG9GaXhlZCgyKSsiIG1nL2RMKSJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBiYXNlPSt2LmNyX2Jhc2UsIG5vdz0rdi5jcl9ub3c7CiAgICAgICAgICBjb25zdCByYXRpbz1ub3cvYmFzZSwgcmlzZT1ub3ctYmFzZTsKICAgICAgICAgIGlmKG5vdz40LjB8fHJhdGlvPjMuMCkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBHUkFERSAzIOKAlCBDcmVhdGluaW5lICR7cmF0aW8udG9GaXhlZCgxKX3DlyBiYXNlbGluZSR7bm93PjQuMD8iICg+NC4wIG1nL2RMKSI6IiJ9LiBIb3NwaXRhbGlzYXRpb24gaW5kaWNhdGVkLiBQRVJNQU5FTlRMWSBESVNDT05USU5VRSBJQ1BpLiBOZXBocm9sb2d5IGNvbnN1bHQuIEV2YWx1YXRlIGZvciBvdGhlciBjYXVzZXMgKElWIGNvbnRyYXN0LCBtZWRpY2F0aW9ucywgZmx1aWQgc3RhdHVzKS4gQ29ydGljb3N0ZXJvaWRzIDHigJMyIG1nL2tnL2QgcHJlZG5pc29uZSBlcXVpdmFsZW50LiBSZWZsZXggYmlvcHN5IGRpc2NvdXJhZ2VkIHVudGlsIHN0ZXJvaWRzIGF0dGVtcHRlZC4gTW9uaXRvciBDciB3ZWVrbHkuIElmIGltcHJvdmVkIHRvIOKJpEcxLCB0YXBlciBvdmVyIOKJpTQgd2Vla3MuIElmIHBlcnNpc3RlbnQgPjPigJM1IGRheXMgb3Igd29yc2VuaW5nLCBjb25zaWRlciBteWNvcGhlbm9sYXRlLiBOb3RlOiBhbHNvIGV2YWx1YXRlIGZvciBHNCBpZiBkaWFseXNpcyBpcyBpbmRpY2F0ZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihyYXRpbz49Mi4wKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YEdSQURFIDIg4oCUIENyZWF0aW5pbmUgJHtyYXRpby50b0ZpeGVkKDEpfcOXIGJhc2VsaW5lLiBIT0xEIElDUGkgdGVtcG9yYXJpbHkuIE5lcGhyb2xvZ3kgY29uc3VsdC4gRXZhbHVhdGUgZm9yIG90aGVyIGNhdXNlcyAoSVYgY29udHJhc3QsIG1lZGljYXRpb25zLCBmbHVpZCBzdGF0dXMpLiBJZiBvdGhlciBhZXRpb2xvZ2llcyBydWxlZCBvdXQ6IHByZWRuaXNvbmUgMC414oCTMSBtZy9rZy9kLiBJZiB3b3JzZW5pbmcgb3Igbm8gaW1wcm92ZW1lbnQ6IGVzY2FsYXRlIHRvIDHigJMyIG1nL2tnL2QgYW5kIHBlcm1hbmVudGx5IGRpc2NvbnRpbnVlIElDUGkuIElmIGltcHJvdmVkIHRvIOKJpEcxLCB0YXBlciBzdGVyb2lkcyBvdmVyIDTigJM2IHdlZWtzLiBJZiBubyByZWN1cnJlbmNlLCBkaXNjdXNzIHJlc3VtcHRpb24gd2l0aCBwYXRpZW50IChyaXNrcyB2cyBiZW5lZml0cykuIElmIHBlcnNpc3RlbnQgPjcgZGF5cyBvciB3b3JzZW5pbmcsIHRyZWF0IGFzIEczLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYocmF0aW8+PTEuNXx8cmlzZT4wLjMpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgR1JBREUgMSDigJQgQ3JlYXRpbmluZSAke3JhdGlvLnRvRml4ZWQoMil9w5cgYmFzZWxpbmUgKHJpc2UgJHtyaXNlLnRvRml4ZWQoMil9IG1nL2RMKS4gQ29uc2lkZXIgdGVtcG9yYXJpbHkgaG9sZGluZyBJQ1BpIHBlbmRpbmcgZXZhbHVhdGlvbiBvZiBhbHRlcm5hdGl2ZSBhZXRpb2xvZ2llcyAocmVjZW50IElWIGNvbnRyYXN0LCBtZWRpY2F0aW9ucywgZmx1aWQgc3RhdHVzLCBiYXNlbGluZSByZW5hbCBmdW5jdGlvbikuIE5vdGU6IGEgY2hhbmdlIHN0aWxsIDwxLjXDlyBVTE4gY291bGQgYmUgbWVhbmluZ2Z1bC4gSWYgaW1wcm92ZWQgdG8gYmFzZWxpbmUsIHJlc3VtZSByb3V0aW5lIGNyZWF0aW5pbmUgbW9uaXRvcmluZy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgTm8gc2lnbmlmaWNhbnQgY3JlYXRpbmluZSByaXNlICgke3JhdGlvLnRvRml4ZWQoMil9w5cgYmFzZWxpbmUpLiBDb250aW51ZSBJQ1BpIHdpdGggcm91dGluZSBtb25pdG9yaW5nIOKAlCBjaGVjayBjcmVhdGluaW5lIHByaW9yIHRvIGV2ZXJ5IGRvc2UgcGVyIEFTQ08gwqc2LjAuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAoKICAgICAgewogICAgICAgIGlkOiJjcF9ha2kiLCBuYW1lOiJDaXNwbGF0aW4tQXNzb2NpYXRlZCBBS0kgKENQLUFLSSkgUmlzayBDYWxjdWxhdG9yIiwgcmVmOiJHdXB0YSBTLCBHbGV6ZXJtYW4gSUcsIEhpcnNjaCBKUyBldCBhbC4sIEJNSiAyMDI0OzM4NDplMDc3MTY5OyBuPTI0NzE3OyBDLXN0YXRpc3RpYyAwLjc1IiwgdGFnOiJDaXNwbGF0aW4gTmVwaHJvdG94aWNpdHkg4oCUIFZhbGlkYXRlZCBSaXNrIFByZWRpY3Rpb24iLAogICAgICAgIGZvcm11bGE6IlJpc2sgJSA9IDEwMCAvICgxICsgZV4o4oiSeCkpLCB3aGVyZSB4ID0g4oiSMy42ODY2NTkgKyBmKEFnZSkg4oiSIGYoTWcpIOKIkiBmKEhnYikgKyBmKFdCQykg4oiSIGYoQWxiKSArIGYoQ2lzcGxhdGluKSArIGYoUGx0KSDiiJIgZihTQ3IpICsgMC4yNzM5OTUyw5dIVE4gKyAwLjI1Mjg1NTHDl0RNXG5cbkVhY2ggY29udGludW91cyB2YXJpYWJsZSB1c2VzIHJlc3RyaWN0ZWQgY3ViaWMgc3BsaW5lcyAoUkNTKS4gRnVsbCBjb2VmZmljaWVudHMgcHVibGlzaGVkIGluIHRoZSBCTUogc3VwcGxlbWVudC5cblxuQ1AtQUtJIGRlZmluZWQgYXM6IOKJpTItZm9sZCByaXNlIGluIHNlcnVtIGNyZWF0aW5pbmUgT1Iga2lkbmV5IHJlcGxhY2VtZW50IHRoZXJhcHkgd2l0aGluIDE0IGRheXMgb2YgZmlyc3QgSVYgY2lzcGxhdGluIGRvc2UuIiwKICAgICAgICBub3RlOiJVc2UgdGhlIG1vc3QgcmVjZW50IGxhYiB2YWx1ZXMgb2J0YWluZWQgcHJpb3IgdG8gcmVjZWl2aW5nIGNpc3BsYXRpbi4gVmFsaWRhdGVkIGFjcm9zcyA2IFVTIGFjYWRlbWljIGNhbmNlciBjZW50cmVzIChuPTI0LDcxNzsgZGVyaXZhdGlvbiAxMSw3NjYsIHZhbGlkYXRpb24gMTIsOTUxKS4gQ1AtQUtJIGluY2lkZW5jZTogNS4yJSAoZGVyaXZhdGlvbiksIDMuMyUgKHZhbGlkYXRpb24pLiBDLXN0YXRpc3RpYyAwLjc1IOKAlCBzdXBlcmlvciB0byBhbGwgcHJpb3IgbW9kZWxzIChDIDAuNjDigJMwLjY4KS4gU3RhZ2UgMyBDUC1BS0kgYXNzb2NpYXRlZCB3aXRoIDQuNjPDlyBoYXphcmQgb2YgOTAtZGF5IG1vcnRhbGl0eS4gVW5pdCBjb252ZXJzaW9uczogU2NyIGlucHV0IGluIMK1bW9sL0wg4oaSIGNvbnZlcnRlZCB0byBtZy9kTCAow7c4OC40KTsgQWxiIGlucHV0IGluIGcvTCDihpIgZy9kTCAow7cxMCk7IE1nIGlucHV0IGluIG1tb2wvTCDihpIgbWcvZEwgKMOXMi40Myk7IEhnYiBpbnB1dCBpbiBnL0wg4oaSIGcvZEwgKMO3MTApLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYWdlIixsYWJlbDoiQWdlIix1bml0OiJ5ZWFycyIsdHlwZToibnVtYmVyIixwaDoiNjIifSwKICAgICAgICAgIHtpZDoiaHRuIixsYWJlbDoiSGlzdG9yeSBvZiBoeXBlcnRlbnNpb24iLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vIiwiWWVzIl19LAogICAgICAgICAge2lkOiJkbSIsbGFiZWw6Ikhpc3Rvcnkgb2YgZGlhYmV0ZXMgbWVsbGl0dXMiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vIiwiWWVzIl19LAogICAgICAgICAge2lkOiJkb3NlIixsYWJlbDoiQ2lzcGxhdGluIGRvc2UiLHVuaXQ6Im1nIix0eXBlOiJudW1iZXIiLHBoOiIxNDAifSwKICAgICAgICAgIHtpZDoic2NyIixsYWJlbDoiU2VydW0gY3JlYXRpbmluZSIsdW5pdDoiwrVtb2wvTCIsdHlwZToibnVtYmVyIixwaDoiODUifSwKICAgICAgICAgIHtpZDoiYWxiIixsYWJlbDoiQWxidW1pbiIsdW5pdDoiZy9MIix0eXBlOiJudW1iZXIiLHBoOiIzOCJ9LAogICAgICAgICAge2lkOiJtZ192YWwiLGxhYmVsOiJNYWduZXNpdW0iLHVuaXQ6Im1tb2wvTCIsdHlwZToibnVtYmVyIixwaDoiMC44MiJ9LAogICAgICAgICAge2lkOiJoZ2IiLGxhYmVsOiJIYWVtb2dsb2JpbiIsdW5pdDoiZy9MIix0eXBlOiJudW1iZXIiLHBoOiIxMjUifSwKICAgICAgICAgIHtpZDoid2JjIixsYWJlbDoiV2hpdGUgYmxvb2QgY2VsbCBjb3VudCIsdW5pdDoiw5cgMTDigbkgY2VsbHMvTCIsdHlwZToibnVtYmVyIixwaDoiNy41In0sCiAgICAgICAgICB7aWQ6InBsdCIsbGFiZWw6IlBsYXRlbGV0IGNvdW50Iix1bml0OiLDlyAxMOKBuS9MIix0eXBlOiJudW1iZXIiLHBoOiIyNTAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBhZ2U9K3YuYWdlLCBkb3NlPSt2LmRvc2UsIHNjclNJPSt2LnNjciwgYWxiU0k9K3YuYWxiLCBtZ1NJPSt2Lm1nX3ZhbCwgaGdiU0k9K3YuaGdiLCB3YmNSYXc9K3Yud2JjLCBwbHRSYXc9K3YucGx0OwogICAgICAgICAgaWYoIWFnZXx8IWRvc2V8fCFzY3JTSXx8IWFsYlNJfHwhbWdTSXx8IWhnYlNJfHwhd2JjUmF3fHwhcGx0UmF3KSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGh0bj12Lmh0bj09PSJZZXMiPzE6MCwgZG09di5kbT09PSJZZXMiPzE6MDsKICAgICAgICAgIC8qIENvbnZlcnQgU0kg4oaSIG1vZGVsIHVuaXRzIChtZy9kTCwgZy9kTCwgw5cxMMKzL8K1TCkgKi8KICAgICAgICAgIGNvbnN0IHNjcj1zY3JTSS84OC40OyAgIC8qIMK1bW9sL0wg4oaSIG1nL2RMICovCiAgICAgICAgICBjb25zdCBhbGI9YWxiU0kvMTA7ICAgICAvKiBnL0wg4oaSIGcvZEwgKi8KICAgICAgICAgIGNvbnN0IG1nPW1nU0kqMi40MzsgICAgIC8qIG1tb2wvTCDihpIgbWcvZEwgKi8KICAgICAgICAgIGNvbnN0IGhnYj1oZ2JTSS8xMDsgICAgIC8qIGcvTCDihpIgZy9kTCAqLwogICAgICAgICAgY29uc3Qgd2JjPXdiY1JhdzsgICAgICAgLyogw5cxMOKBuS9MID0gw5cxMMKzL8K1TCAqLwogICAgICAgICAgY29uc3QgcGx0PXBsdFJhdzsgICAgICAgLyogw5cxMOKBuS9MID0gw5cxMMKzL8K1TCAqLwogICAgICAgICAgLyogSGVscGVyOiAodmFsIC0ga25vdCkrIF4zICovCiAgICAgICAgICBjb25zdCBwMz0odmFsLGtub3QpPT57Y29uc3QgZD12YWwta25vdDsgcmV0dXJuIGQ+MD9kKmQqZDowO307CiAgICAgICAgICAvKiBBZ2UgUkNTICovCiAgICAgICAgICBjb25zdCBmQWdlPTAuMDQ0MjE0MjUqYWdlKzAuMDAwMDE4MzQ4NSpwMyhhZ2UsMzApLTAuMDAwMjE2MzIyNypwMyhhZ2UsNTEpKzAuMDAwNDM5NDkwOSpwMyhhZ2UsNTkpLTAuMDAwMjkwNzMwNypwMyhhZ2UsNjYpKzAuMDAwMDQ5MjE0MSpwMyhhZ2UsNzYpOwogICAgICAgICAgLyogTWFnbmVzaXVtIFJDUyAoc3VidHJhY3QpICovCiAgICAgICAgICBjb25zdCBmTWc9MC4yNTI1MTE1Km1nLTUuODAxOTY5KnAzKG1nLDEuNykrMjkuODk1MjEqcDMobWcsMS45NDU2KS00My43NTA1NCpwMyhtZywyLjEpKzE4LjIzNzg4KnAzKG1nLDIuMikrMS40MTk0MTQqcDMobWcsMi40MzIpOwogICAgICAgICAgLyogSGVtb2dsb2JpbiBSQ1MgKHN1YnRyYWN0KSAqLwogICAgICAgICAgY29uc3QgZkhnYj0wLjA0NDcxMTE4KmhnYi0wLjAwOTk4NDY0MipwMyhoZ2IsOS4xKSswLjA3NDk5NTY2KnAzKGhnYiwxMS42KS0wLjEzNTU5NTMqcDMoaGdiLDEyLjgpKzAuMDg1OTUzNjkqcDMoaGdiLDEzLjkpLTAuMDE1MzY5NDIqcDMoaGdiLDE1LjUpOwogICAgICAgICAgLyogV0JDIFJDUyAoYWRkKSAqLwogICAgICAgICAgY29uc3QgZldiYz0wLjAxOTkzNzM2KndiYy0wLjAwMzIzNzEyNipwMyh3YmMsMy44KSswLjAyMTc2OTk4KnAzKHdiYyw1LjgpLTAuMDMxNzg0MTMqcDMod2JjLDcuMSkrMC4wMTQxMTI0NipwMyh3YmMsOC44KS0wLjAwMDg2MTE3ODcqcDMod2JjLDE0LjUpOwogICAgICAgICAgLyogQWxidW1pbiBSQ1MgKHN1YnRyYWN0KSAqLwogICAgICAgICAgY29uc3QgZkFsYj0wLjQ5OTA2MTcqYWxiLTAuMDI2ODE1NDgqcDMoYWxiLDMpKzQuMzEyOTUzKnAzKGFsYiwzLjgpLTEzLjUwNDk1KnAzKGFsYiw0LjEpKzEwLjY2NzI0KnAzKGFsYiw0LjMpLTEuNDQ4NDMyKnAzKGFsYiw0LjcpOwogICAgICAgICAgLyogQ2lzcGxhdGluIGRvc2UgUkNTIChhZGQpICovCiAgICAgICAgICBjb25zdCBmQ2lzPTAuMDQ3MDgxODUqZG9zZS0wLjAwMDAxMDI4Mzk3KnAzKGRvc2UsMzgpKzAuMDAwMDIzOTE2NDQqcDMoZG9zZSw2NSktMC4wMDAwMTUyMTYxNCpwMyhkb3NlLDkwKSswLjAwMDAwMjAzOTA0MipwMyhkb3NlLDE1MCktMC4wMDAwMDA0NTUzNjk1KnAzKGRvc2UsMjIwKTsKICAgICAgICAgIC8qIFBsYXRlbGV0IFJDUyAoYWRkKSAqLwogICAgICAgICAgY29uc3QgZlBsdD0wLjAwMzk3NTY2KnBsdC0wLjAwMDAwMDUxNDUwMDQqcDMocGx0LDEzNykrMC4wMDAwMDIyMjc0NSpwMyhwbHQsMjEwKS0wLjAwMDAwMjQ1OTAwNSpwMyhwbHQsMjU1KSswLjAwMDAwMDc2MzEwNTUqcDMocGx0LDMxMiktMC4wMDAwMDAwMTcwNTA2MypwMyhwbHQsNDg4KTsKICAgICAgICAgIC8qIEJhc2VsaW5lIFNDciBSQ1MgKHN1YnRyYWN0KSAqLwogICAgICAgICAgY29uc3QgZlNjcj00LjYyNjgwMipzY3IrOTQuMDA2OTYqcDMoc2NyLDAuNiktMTg3Ljk1NjEqcDMoc2NyLDAuNykrMjMyLjc1NjcqcDMoc2NyLDAuOSktMTUzLjc3OTYqcDMoc2NyLDEuMCkrMTQuOTcyMDYqcDMoc2NyLDEuMyk7CiAgICAgICAgICBjb25zdCB4PS0zLjY4NjY1OStmQWdlLWZNZy1mSGdiK2ZXYmMtZkFsYitmQ2lzK2ZQbHQtZlNjciswLjI3Mzk5NTIqaHRuKzAuMjUyODU1MSpkbTsKICAgICAgICAgIGNvbnN0IHJpc2s9MTAwLygxK01hdGguZXhwKC14KSk7CiAgICAgICAgICByZXR1cm4ge3ZhbDpyaXNrLnRvRml4ZWQoMSksdW5pdDoiJSByaXNrIG9mIENQLUFLSSIsc2VjOmBTY3IgJHtzY3IudG9GaXhlZCgyKX0gbWcvZEwgfCBBbGIgJHthbGIudG9GaXhlZCgxKX0gZy9kTCB8IE1nICR7bWcudG9GaXhlZCgyKX0gbWcvZEwgfCBIZ2IgJHtoZ2IudG9GaXhlZCgxKX0gZy9kTCB8IEhUTjoke2h0bn0gRE06JHtkbX1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3Qgcmlzaz0rci52YWw7CiAgICAgICAgICBpZihyaXNrPDMpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQ1AtQUtJIHJpc2s6ICR7ci52YWx9JSDigJQgTE9XLiBTdGFuZGFyZCBjaXNwbGF0aW4gaHlkcmF0aW9uIHByb3RvY29sICgx4oCTMkwgTlMgcHJlL3Bvc3QpLiBJViBNZyBzdXBwbGVtZW50YXRpb24gcmVjb21tZW5kZWQuIE1vbml0b3IgU2NyIGRheXMgMywgNywgMTQgYWZ0ZXIgY2lzcGxhdGluLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYocmlzazw4KSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YENQLUFLSSByaXNrOiAke3IudmFsfSUg4oCUIE1PREVSQVRFLiBFbnN1cmUgYWdncmVzc2l2ZSBoeWRyYXRpb24uIElWIE1nIHN1cHBsZW1lbnRhdGlvbiAoOOKAkzE2IG1FcSkuIEF2b2lkIGNvbmN1cnJlbnQgbmVwaHJvdG94aW5zIChOU0FJRHMsIGFtaW5vZ2x5Y29zaWRlcykuIE1vbml0b3IgU2NyIGNsb3NlbHkgKGRheXMgMywgNywgMTQpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYocmlzazwxNSkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBDUC1BS0kgcmlzazogJHtyLnZhbH0lIOKAlCBISUdILiBDb25zaWRlciBlbmhhbmNlZCBoeWRyYXRpb24uIElWIE1nIG1hbmRhdG9yeS4gTWluaW1pc2UgYWxsIGNvbmN1cnJlbnQgbmVwaHJvdG94aW5zLiBDb25zaWRlciB3aGV0aGVyIGNhcmJvcGxhdGluIHN1YnN0aXR1dGlvbiBpcyBvbmNvbG9naWNhbGx5IGFwcHJvcHJpYXRlLiBDbG9zZSByZW5hbCBtb25pdG9yaW5nIChTY3IgZXZlcnkgMuKAkzMgZGF5cyBmb3IgMTQgZGF5cykuIE5lcGhyb2xvZ3kgaW5wdXQgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YENQLUFLSSByaXNrOiAke3IudmFsfSUg4oCUIFZFUlkgSElHSC4gU3Ryb25nbHkgY29uc2lkZXIgY2FyYm9wbGF0aW4gc3Vic3RpdHV0aW9uIG9yIGRvc2UgcmVkdWN0aW9uIGlmIG9uY29sb2dpY2FsbHkgZmVhc2libGUuIElmIGNpc3BsYXRpbiBlc3NlbnRpYWw6IG1heGltaXNlIGh5ZHJhdGlvbiwgSVYgTWcsIHN0cmljdCBuZXBocm90b3hpbiBhdm9pZGFuY2UsIGRhaWx5IFNjciBtb25pdG9yaW5nIGZvciAxNCBkYXlzLiBQcmUtdHJlYXRtZW50IG5lcGhyb2xvZ3kgY29uc3VsdGF0aW9uIHJlY29tbWVuZGVkLiBTdGFnZSAzIENQLUFLSSBhc3NvY2lhdGVkIHdpdGggNC42M8OXIGhhemFyZCBvZiA5MC1kYXkgbW9ydGFsaXR5IChHdXB0YSBCTUogMjAyNCkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAoKICAgIF0KICB9LAoKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAvLyBYVkkuIFNQRUNJQUxJU1QgSU5ESUNFUywKICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICB7CiAgICBpZDoiczE2IiwgbGFiZWw6IlNwZWNpYWxpc3QgSW5kaWNlcyIsCiAgICBjYWxjczpbCiAgICBdCiAgfSwKCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgLy8gWFZJSS4gRElBTFlTSVMgJiBWQVNDVUxBUiBBQ0NFU1MsCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgewogICAgaWQ6InMxNyIsIGxhYmVsOiAiVHJhbnNwbGFudCBOZXBocm9sb2d5IiwKICAgIGNhbGNzOiBbCiAgICAgIHsKICAgICAgICBpZDoidHhfY3Zfc2NyZWVuIiwgbmFtZToiW1JFRl0gQ2FyZGlvdmFzY3VsYXIgU2NyZWVuaW5nIFRyaWdnZXIiLCByZWY6IktESUdPIFRyYW5zcGxhbnQgQ2FuZGlkYWN5IDIwMjAgwqcxMy4zOyBLRE9RSSBDb21tZW50YXJ5IDIwMjE7IEFDQy9BSEEgUGVyaW9wZXJhdGl2ZSBHdWlkZWxpbmVzIiwgdGFnOiJQcmUtVHJhbnNwbGFudCBDViBSaXNrIOKAlCBNYW5kYXRvcnkgV29ya3VwIENyaXRlcmlhIiwKICAgICAgICBmb3JtdWxhOiJNYW5kYXRvcnkgcHJlLXRyYW5zcGxhbnQgY2FyZGlhYyB3b3JrdXAgdHJpZ2dlcmVkIGlmIEFOWSBvZjpcbiAg4oCiIERpYWJldGVzIG1lbGxpdHVzIChUeXBlIDEgb3IgVHlwZSAyKVxuICDigKIgUHJpb3IgY29yb25hcnkgYXJ0ZXJ5IGRpc2Vhc2UgKENBRClcbiAg4oCiIEZ1bmN0aW9uYWwgY2FwYWNpdHkgPDQgTUVUc1xuICDigKIgQWdlIOKJpTYwIHllYXJzIChzb21lIGNlbnRyZXMg4omlNTApXG4gIOKAoiBQZXJpcGhlcmFsIHZhc2N1bGFyIGRpc2Vhc2UgKFBWRClcbiAg4oCiIENlcmVicm92YXNjdWxhciBkaXNlYXNlIChDVkEvVElBKVxuICDigKIgQ3VycmVudCBvciBmb3JtZXIgc21va2VyICg+MTAgcGFjay15ZWFycylcbiAg4oCiIEhlYXJ0IGZhaWx1cmUgKGFueSBOWUhBIGNsYXNzKVxuICDigKIg4omlMyB0cmFkaXRpb25hbCBjYXJkaW92YXNjdWxhciByaXNrIGZhY3RvcnMiLAogICAgICAgIG5vdGU6IlJFRkVSRU5DRSBQQU5FTCDigJQgVGhpcyBpcyBub3QgYSB2YWxpZGF0ZWQgc2NvcmluZyB0b29sLiBQdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhIGFyZSBwcmVzZW50ZWQgZm9yIGNsaW5pY2FsIHJlZmVyZW5jZSBvbmx5LiBJbnRlcnByZXRhdGlvbiByZXF1aXJlcyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuXG5cbktESUdPIDIwMjAgU3RhdGVtZW50IDEzLjMgcmVjb21tZW5kcyBjYXJkaW92YXNjdWxhciBldmFsdWF0aW9uIG9mIGFsbCB0cmFuc3BsYW50IGNhbmRpZGF0ZXMuIFRoZSBleHRlbnQgb2Ygd29ya3VwIGRlcGVuZHMgb24gcmlzayBmYWN0b3IgYnVyZGVuLiBIaWdoLXJpc2sgcGF0aWVudHMgcmVxdWlyZSBub24taW52YXNpdmUgY2FyZGlhYyBzdHJlc3MgdGVzdGluZyAoZXhlcmNpc2Ugb3IgcGhhcm1hY29sb2dpY2FsIHN0cmVzcyBlY2hvY2FyZGlvZ3JhcGh5LCBvciBteW9jYXJkaWFsIHBlcmZ1c2lvbiBpbWFnaW5nKSBhbmQsIGlmIHBvc2l0aXZlLCBjb3JvbmFyeSBhbmdpb2dyYXBoeS4gTG93LXJpc2sgcGF0aWVudHMgbWF5IHByb2NlZWQgd2l0aCByZXN0aW5nIGVjaG9jYXJkaW9ncmFwaHkgYW5kIEVDRyBhbG9uZS4gVGhpcyBjYWxjdWxhdG9yIGlkZW50aWZpZXMgd2hldGhlciBtYW5kYXRvcnkgZXh0ZW5kZWQgY2FyZGlhYyB3b3JrdXAgaXMgdHJpZ2dlcmVkLiIsCiAgICAgICAgaW5wdXRzOltdLAogICAgICAgIGNvbXB1dGUoKXsgcmV0dXJuIHt2YWw6IlJlZmVyZW5jZSBQYW5lbCIsdW5pdDoiU2VlIGd1aWRlbGluZSBjcml0ZXJpYSBhYm92ZSJ9OyB9LAogICAgICAgIGludGVycHJldCgpeyByZXR1cm4ge2M6IiM2MzY2ZjEiLHQ6YFRoaXMgaXMgYSByZWZlcmVuY2UgcGFuZWwgc3VtbWFyaXNpbmcgcHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYS4gTm8gY29tcG9zaXRlIHNjb3JlIGlzIGNvbXB1dGVkLiBBcHBseSB0aGVzZSBjcml0ZXJpYSB1c2luZyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgd2l0aGluIHlvdXIgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9tYWxpZ193YWl0IiwgbmFtZToiW1JFRl0gTWFsaWduYW5jeSBXYWl0aW5nIFBlcmlvZCBBZHZpc29yIiwgcmVmOiJBU1QgQ29uc2Vuc3VzIChTYXdpbnNraSBldCBhbC4sIEFtIEogVHJhbnNwbGFudCAyMDIwKTsgS0RJR08gMjAyMCDCpzExOyBJc3JhZWwgUGVubiBJVFRSIiwgdGFnOiJQcmUtVHJhbnNwbGFudCBDYW5jZXIgUmVtaXNzaW9uIOKAlCBNaW5pbXVtIFdhaXQgQmVmb3JlIExpc3RpbmciLAogICAgICAgIGZvcm11bGE6Ik1pbmltdW0gcmVjb21tZW5kZWQgd2FpdGluZyBwZXJpb2QgZnJvbSBjdXJhdGl2ZSB0cmVhdG1lbnQgdG8gdHJhbnNwbGFudCBsaXN0aW5nOlxuICBObyBtYW5kYXRvcnkgd2FpdDogTm9uLW1lbGFub21hIHNraW4gY2FuY2VyIChCQ0MvU0NDKSwgaW5jaWRlbnRhbCByZW5hbCBtYXNzIOKJpDFjbSwgR2xlYXNvbiDiiaQ2IHByb3N0YXRlIChsb3ctcmlzayksIGluIHNpdHUgY2VydmljYWwgKENJTiksIHN1cGVyZmljaWFsIGJsYWRkZXIgKFRhIGxvdy1ncmFkZSlcbiAgMiB5ZWFyczogTW9zdCBzb2xpZCBvcmdhbiB0dW1vdXJzIGFmdGVyIGN1cmF0aXZlIHJlc2VjdGlvbiAoYnJlYXN0LCBjb2xvbiwgbHVuZywgZXRjLilcbiAgMiB5ZWFyczogSGFlbWF0b2xvZ2ljYWwgbWFsaWduYW5jaWVzIChseW1waG9tYSwgbGV1a2FlbWlhKSBhZnRlciBjb21wbGV0ZSByZW1pc3Npb25cbiAgNSB5ZWFyczogTWVsYW5vbWEgKHN0YWdlIEkvSUkpLCBpbnZhc2l2ZSBicmVhc3QgKHN0YWdlIElJKyksIHN5bXB0b21hdGljIFJDQyA+VDFcbiAgQ2FzZS1ieS1jYXNlOiBNZWxhbm9tYSBzdGFnZSBJSUkrLCBtUkNDLCBhY3RpdmUgaGFlbWF0b2xvZ2ljYWwgbWFsaWduYW5jeSIsCiAgICAgICAgbm90ZToiUkVGRVJFTkNFIFBBTkVMIOKAlCBUaGlzIGlzIG5vdCBhIHZhbGlkYXRlZCBzY29yaW5nIHRvb2wuIFB1Ymxpc2hlZCBndWlkZWxpbmUgY3JpdGVyaWEgYXJlIHByZXNlbnRlZCBmb3IgY2xpbmljYWwgcmVmZXJlbmNlIG9ubHkuIEludGVycHJldGF0aW9uIHJlcXVpcmVzIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudC5cblxuVGhlIEFTVCBjb25zZW5zdXMgKFNhd2luc2tpIGV0IGFsLiwgMjAyMCkgYW5kIEtESUdPIDIwMjAgwqcxMSBwcm92aWRlIGV2aWRlbmNlLWJhc2VkIHdhaXRpbmcgcGVyaW9kIHJlY29tbWVuZGF0aW9ucy4gVGhlIElzcmFlbCBQZW5uIEludGVybmF0aW9uYWwgVHJhbnNwbGFudCBUdW1vdXIgUmVnaXN0cnkgKElUVFIpIHByb3ZpZGVzIHRoZSBsYXJnZXN0IGRhdGFzZXQgb24gcG9zdC10cmFuc3BsYW50IGNhbmNlciByZWN1cnJlbmNlLiBLZXkgcHJpbmNpcGxlOiBpbW11bm9zdXBwcmVzc2lvbiBhY2NlbGVyYXRlcyByZWN1cnJlbmNlIG9mIG9jY3VsdCBtYWxpZ25hbmN5LiBUaGVzZSBhcmUgbWluaW11bSByZWNvbW1lbmRlZCB3YWl0IHRpbWVzOyBpbmRpdmlkdWFsIGFzc2Vzc21lbnQgd2l0aCBvbmNvbG9neSBpcyBlc3NlbnRpYWwuIFNvbWUgY2VudHJlcyBhcHBseSBsb25nZXIgd2FpdGluZyBwZXJpb2RzIGZvciBhZ2dyZXNzaXZlIGhpc3RvbG9naWVzLiIsCiAgICAgICAgaW5wdXRzOltdLAogICAgICAgIGNvbXB1dGUoKXsgcmV0dXJuIHt2YWw6IlJlZmVyZW5jZSBQYW5lbCIsdW5pdDoiU2VlIGd1aWRlbGluZSBjcml0ZXJpYSBhYm92ZSJ9OyB9LAogICAgICAgIGludGVycHJldCgpeyByZXR1cm4ge2M6IiM2MzY2ZjEiLHQ6YFRoaXMgaXMgYSByZWZlcmVuY2UgcGFuZWwgc3VtbWFyaXNpbmcgcHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYS4gTm8gY29tcG9zaXRlIHNjb3JlIGlzIGNvbXB1dGVkLiBBcHBseSB0aGVzZSBjcml0ZXJpYSB1c2luZyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgd2l0aGluIHlvdXIgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9ibWkiLCBuYW1lOiJCTUkgJiBPYmVzaXR5IENhbmRpZGFjeSBBc3Nlc3NtZW50IiwgcmVmOiJLRElHTyBUcmFuc3BsYW50IENhbmRpZGFjeSAyMDIwIMKnNjsgS0RPUUkgQ29tbWVudGFyeSAyMDIxIiwgdGFnOiJQcmUtVHJhbnNwbGFudCBCTUkg4oCUIExpc3RpbmcgRWxpZ2liaWxpdHkiLAogICAgICAgIGZvcm11bGE6IkJNSSA9IFdlaWdodCAoa2cpIC8gSGVpZ2h0IChtKcKyXG5LRElHTyAyMDIwIGd1aWRhbmNlOlxuICBCTUkgPDE4LjU6IFVuZGVyd2VpZ2h0IOKAlCBudXRyaXRpb25hbCBhc3Nlc3NtZW50XG4gIEJNSSAxOC414oCTMjkuOTogR2VuZXJhbGx5IGFjY2VwdGFibGUgZm9yIGxpc3RpbmdcbiAgQk1JIDMw4oCTMzQuOTogQWNjZXB0YWJsZSDigJQgbGlmZXN0eWxlIG9wdGltaXNhdGlvbiByZWNvbW1lbmRlZFxuICBCTUkgMzXigJMzOS45OiBTdHJvbmcgY29uc2lkZXJhdGlvbiBmb3Igd2VpZ2h0IHJlZHVjdGlvbiBiZWZvcmUgbGlzdGluZ1xuICBCTUkg4omlNDA6IE1vc3QgY2VudHJlcyByZXF1aXJlIHdlaWdodCByZWR1Y3Rpb24gcHJvZ3JhbW1lIChiYXJpYXRyaWMvbGlmZXN0eWxlKSBiZWZvcmUgbGlzdGluZyIsCiAgICAgICAgbm90ZToiR1VJREVMSU5FLUJBU0VEIFRPT0wg4oCUIFRoaXMgY2FsY3VsYXRvciBhcHBsaWVzIHB1Ymxpc2hlZCBjbGluaWNhbCB0aHJlc2hvbGRzIGJ1dCBpcyBub3QgaXRzZWxmIGEgdmFsaWRhdGVkIGNvbXBvc2l0ZSBzY29yaW5nIGluc3RydW1lbnQuIEludGVycHJldCB3aXRoaW4gY2xpbmljYWwgY29udGV4dC5cblxuT2Jlc2l0eSBpbmNyZWFzZXMgcGVyaW9wZXJhdGl2ZSByaXNrICh3b3VuZCBjb21wbGljYXRpb25zLCBkZWxheWVkIGdyYWZ0IGZ1bmN0aW9uLCBjYXJkaW92YXNjdWxhciBldmVudHMpIGFuZCByZWR1Y2VzIGdyYWZ0IHN1cnZpdmFsLiBLRElHTyAyMDIwIMKnNiByZWNvbW1lbmRzIHdlaWdodCBtYW5hZ2VtZW50IGZvciBjYW5kaWRhdGVzIHdpdGggQk1JIOKJpTM1IGFuZCBzdHJvbmdseSByZWNvbW1lbmRzIGl0IGZvciBCTUkg4omlNDAuIFRoZXJlIGlzIG5vIGFic29sdXRlIEJNSSBjb250cmFpbmRpY2F0aW9uIGluIEtESUdPLCBidXQgbWFueSB0cmFuc3BsYW50IGNlbnRyZXMgYXBwbHkgYSBCTUkg4omlNDAgKHNvbWUg4omlMzUpIGFzIGEgcmVsYXRpdmUgY29udHJhaW5kaWNhdGlvbiB0byBsaXN0aW5nIHVudGlsIHdlaWdodCByZWR1Y3Rpb24gaXMgYWNoaWV2ZWQuIFVuZGVyd2VpZ2h0IChCTUkgPDE4LjUpIHdhcnJhbnRzIG51dHJpdGlvbmFsIGFzc2Vzc21lbnQgYXMgc2FyY29wZW5pYSBhbmQgZnJhaWx0eSBpbmRlcGVuZGVudGx5IHByZWRpY3QgcG9vciB0cmFuc3BsYW50IG91dGNvbWVzLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoid3QiLGxhYmVsOiJXZWlnaHQiLHVuaXQ6ImtnIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDk1In0sCiAgICAgICAgICB7aWQ6Imh0IixsYWJlbDoiSGVpZ2h0Iix1bml0OiJjbSIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxNzAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCB3dD0rdi53dCwgaHQ9K3YuaHQ7CiAgICAgICAgICBpZighd3R8fCFodHx8d3Q8PTB8fGh0PD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGh0bSA9IGh0LzEwMDsKICAgICAgICAgIGNvbnN0IGJtaSA9IHd0LyhodG0qaHRtKTsKICAgICAgICAgIGxldCBjYXQgPSAiIjsKICAgICAgICAgIGlmKGJtaTwxOC41KSBjYXQ9IlVuZGVyd2VpZ2h0IjsKICAgICAgICAgIGVsc2UgaWYoYm1pPDI1KSBjYXQ9Ik5vcm1hbCB3ZWlnaHQiOwogICAgICAgICAgZWxzZSBpZihibWk8MzApIGNhdD0iT3ZlcndlaWdodCI7CiAgICAgICAgICBlbHNlIGlmKGJtaTwzNSkgY2F0PSJPYmVzZSBjbGFzcyBJIjsKICAgICAgICAgIGVsc2UgaWYoYm1pPDQwKSBjYXQ9Ik9iZXNlIGNsYXNzIElJIjsKICAgICAgICAgIGVsc2UgY2F0PSJPYmVzZSBjbGFzcyBJSUkgKG1vcmJpZCkiOwogICAgICAgICAgcmV0dXJuIHt2YWw6Ym1pLnRvRml4ZWQoMSksdW5pdDoia2cvbcKyIixzZWM6YENhdGVnb3J5OiAke2NhdH0gfCBXdDogJHt3dH0ga2cgfCBIdDogJHtodH0gY21gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IGJtaT0rci52YWw7CiAgICAgICAgICBpZihibWk8MTguNSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBCTUkgJHtyLnZhbH0g4oCUIFVuZGVyd2VpZ2h0LiBOdXRyaXRpb25hbCBhc3Nlc3NtZW50IGFuZCBkaWV0ZXRpYyBpbnB1dCBhcmUgcmVjb21tZW5kZWQuIFNhcmNvcGVuaWEgYW5kIGZyYWlsdHkgc2NyZWVuaW5nIChGcmllZCBjcml0ZXJpYSkgc2hvdWxkIGJlIHBlcmZvcm1lZCBhcyBib3RoIGluZGVwZW5kZW50bHkgcHJlZGljdCBwb29yIHRyYW5zcGxhbnQgb3V0Y29tZXMuIEludmVzdGlnYXRlIGZvciBtYWxudXRyaXRpb24sIGNocm9uaWMgaW5mbGFtbWF0aW9uLCBvciBvY2N1bHQgbWFsaWduYW5jeSBhcyBhcHByb3ByaWF0ZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKGJtaTwzMCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBCTUkgJHtyLnZhbH0g4oCUIFdpdGhpbiB0aGUgZ2VuZXJhbGx5IGFjY2VwdGFibGUgcmFuZ2UgZm9yIHRyYW5zcGxhbnQgbGlzdGluZy4gU3RhbmRhcmQgcGVyaW9wZXJhdGl2ZSByaXNrIGFwcGxpZXMuIENhcmRpb3Zhc2N1bGFyIHJpc2sgZmFjdG9yIG9wdGltaXNhdGlvbiBhbmQgbWFpbnRlbmFuY2Ugb2YgaGVhbHRoeSB3ZWlnaHQgYXJlIHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoYm1pPDM1KSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEJNSSAke3IudmFsfSDigJQgT2Jlc2UgY2xhc3MgSS4gTGlzdGluZyBpcyBnZW5lcmFsbHkgYWNjZXB0YWJsZSBhdCBtb3N0IGNlbnRyZXMsIGJ1dCBsaWZlc3R5bGUgb3B0aW1pc2F0aW9uIGlzIHJlY29tbWVuZGVkIHRvIHJlZHVjZSBwZXJpb3BlcmF0aXZlIHJpc2sgKHdvdW5kIGNvbXBsaWNhdGlvbnMsIGRlbGF5ZWQgZ3JhZnQgZnVuY3Rpb24sIGNhcmRpb3Zhc2N1bGFyIGV2ZW50cykuIFN0cnVjdHVyZWQgZGlldGFyeSBjb3Vuc2VsbGluZyBhbmQgZXhlcmNpc2UgcHJvZ3JhbW1lIGFyZSBhZHZpc2FibGUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihibWk8NDApIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgQk1JICR7ci52YWx9IOKAlCBPYmVzZSBjbGFzcyBJSS4gU3Ryb25nIGNvbnNpZGVyYXRpb24gZm9yIGEgc3VwZXJ2aXNlZCB3ZWlnaHQgcmVkdWN0aW9uIHByb2dyYW1tZSBiZWZvcmUgdHJhbnNwbGFudCBsaXN0aW5nIGlzIHJlY29tbWVuZGVkLiBTb21lIGNlbnRyZXMgYXBwbHkgQk1JIOKJpTM1IGFzIGEgcmVsYXRpdmUgY29udHJhaW5kaWNhdGlvbiB1bnRpbCB3ZWlnaHQgbG9zcyBpcyBhY2hpZXZlZC4gQmFyaWF0cmljIHN1cmdlcnkgcmVmZXJyYWwgbWF5IGJlIGFwcHJvcHJpYXRlIGluIHNlbGVjdGVkIHBhdGllbnRzLiBQZXJpb3BlcmF0aXZlIHJpc2sgaXMgc2lnbmlmaWNhbnRseSBpbmNyZWFzZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEJNSSAke3IudmFsfSDigJQgT2Jlc2UgY2xhc3MgSUlJLiBNb3N0IHRyYW5zcGxhbnQgY2VudHJlcyByZXF1aXJlIGEgc3VwZXJ2aXNlZCB3ZWlnaHQgcmVkdWN0aW9uIHByb2dyYW1tZSBvciBiYXJpYXRyaWMgc3VyZ2VyeSBiZWZvcmUgbGlzdGluZyBjYW4gcHJvY2VlZC4gUGVyaW9wZXJhdGl2ZSByaXNrICh3b3VuZCBpbmZlY3Rpb24sIGRlaGlzY2VuY2UsIHRocm9tYm9lbWJvbGlzbSwgZGVsYXllZCBncmFmdCBmdW5jdGlvbiwgY2FyZGlvdmFzY3VsYXIgZXZlbnRzKSBpcyBzdWJzdGFudGlhbGx5IGVsZXZhdGVkLiBBIHN0cnVjdHVyZWQgbXVsdGlkaXNjaXBsaW5hcnkgYXBwcm9hY2ggaW5jbHVkaW5nIGJhcmlhdHJpYyBtZWRpY2luZSwgZGlldGV0aWNzLCBhbmQgZXhlcmNpc2UgcGh5c2lvbG9neSBpcyByZWNvbW1lbmRlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoidHhfY3ByYSIsIG5hbWU6IkhMQSBTZW5zaXRpc2F0aW9uICYgY1BSQSBJbnRlcnByZXRhdGlvbiIsIHJlZjoiS0RJR08gVHJhbnNwbGFudCBDYW5kaWRhY3kgMjAyMCDCpzE5OyBVTk9TIGNQUkEgRGVmaW5pdGlvbiIsIHRhZzoiUHJlLVRyYW5zcGxhbnQg4oCUIENhbGN1bGF0ZWQgUGFuZWwgUmVhY3RpdmUgQW50aWJvZHkiLAogICAgICAgIGZvcm11bGE6IlNlbnNpdGlzYXRpb24gY2F0ZWdvcmllcyBiYXNlZCBvbiBjUFJBOlxuICA8MTAlID0gTm9uLXNlbnNpdGlzZWRcbiAgMTDigJM3OSUgPSBNb2RlcmF0ZWx5IHNlbnNpdGlzZWRcbiAgODDigJM5NyUgPSBIaWdobHkgc2Vuc2l0aXNlZFxuICDiiaU5OCUgPSBWZXJ5IGhpZ2hseSBzZW5zaXRpc2VkXG5jUFJBIHJlcHJlc2VudHMgdGhlICUgb2YgZG9ub3JzIGFnYWluc3Qgd2hvbSB0aGUgcGF0aWVudCBoYXMgcHJlLWZvcm1lZCBhbnRpLUhMQSBhbnRpYm9kaWVzIiwKICAgICAgICBub3RlOiJjUFJBIChjYWxjdWxhdGVkIFBhbmVsIFJlYWN0aXZlIEFudGlib2R5KSBpcyBkZXRlcm1pbmVkIGJ5IHNvbGlkLXBoYXNlIEhMQSBhbnRpYm9keSB0ZXN0aW5nIChMdW1pbmV4IHNpbmdsZS1hbnRpZ2VuIGJlYWQgYXNzYXkpIGFuZCByZXByZXNlbnRzIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBkb25vciBwb3B1bGF0aW9uIHRvIHdob20gdGhlIGNhbmRpZGF0ZSBoYXMgdW5hY2NlcHRhYmxlIGFudGlnZW5zLiBIaWdoZXIgY1BSQSA9IHNtYWxsZXIgY29tcGF0aWJsZSBkb25vciBwb29sID0gbG9uZ2VyIGV4cGVjdGVkIHdhaXRpbmcgdGltZS4gVU5PUyBwcm92aWRlcyBwcmlvcml0eSBwb2ludHMgZm9yIGNQUkEg4omlOTglIGNhbmRpZGF0ZXMuIERlc2Vuc2l0aXNhdGlvbiBwcm90b2NvbHMgKElWSUcsIHJpdHV4aW1hYiwgcGxhc21hcGhlcmVzaXMsIGltbGlmaWRhc2UpIG1heSBiZSBjb25zaWRlcmVkIGZvciBoaWdobHkgc2Vuc2l0aXNlZCBjYW5kaWRhdGVzIGluIHNlbGVjdGVkIGNlbnRyZXMuIEtESUdPIDIwMjAgwqcxOSByZWNvbW1lbmRzIHJlZ3VsYXIgYW50aWJvZHkgbW9uaXRvcmluZyAoZXZlcnkgMyBtb250aHMgd2hpbGUgb24gd2FpdGxpc3QgYW5kIGFmdGVyIHNlbnNpdGlzaW5nIGV2ZW50cykuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJjcHJhIixsYWJlbDoiY1BSQSAoQ2FsY3VsYXRlZCBQYW5lbCBSZWFjdGl2ZSBBbnRpYm9keSkiLHVuaXQ6IiUiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gODUifSwKICAgICAgICAgIHtpZDoic2Vuc2l0aXNpbmciLGxhYmVsOiJQcmlvciBzZW5zaXRpc2luZyBldmVudHMiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbCiAgICAgICAgICAgICJOb25lIGtub3duIiwKICAgICAgICAgICAgIlByaW9yIHRyYW5zcGxhbnQocykiLAogICAgICAgICAgICAiQmxvb2QgdHJhbnNmdXNpb24ocykiLAogICAgICAgICAgICAiUHJlZ25hbmN5IC8gcHJlZ25hbmNpZXMiLAogICAgICAgICAgICAiTXVsdGlwbGUgc2Vuc2l0aXNpbmcgZXZlbnRzIgogICAgICAgICAgXX0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgY3ByYT0rdi5jcHJhOwogICAgICAgICAgaWYoY3ByYTwwfHxjcHJhPjEwMHx8IWNwcmEmJmNwcmEhPT0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGxldCBjYXQ9IiI7CiAgICAgICAgICBpZihjcHJhPDEwKSBjYXQ9Ik5vbi1zZW5zaXRpc2VkIjsKICAgICAgICAgIGVsc2UgaWYoY3ByYTw4MCkgY2F0PSJNb2RlcmF0ZWx5IHNlbnNpdGlzZWQiOwogICAgICAgICAgZWxzZSBpZihjcHJhPDk4KSBjYXQ9IkhpZ2hseSBzZW5zaXRpc2VkIjsKICAgICAgICAgIGVsc2UgY2F0PSJWZXJ5IGhpZ2hseSBzZW5zaXRpc2VkIjsKICAgICAgICAgIHJldHVybiB7dmFsOmNwcmEudG9GaXhlZCgwKSx1bml0OmAlIGNQUkEg4oCUICR7Y2F0fWAsc2VjOmBTZW5zaXRpc2luZyBoaXN0b3J5OiAke3Yuc2Vuc2l0aXNpbmd8fCJub3Qgc3BlY2lmaWVkIn1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgY3ByYT0rci52YWw7CiAgICAgICAgICBpZihjcHJhPDEwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YGNQUkEgJHtyLnZhbH0lIOKAlCBOb24tc2Vuc2l0aXNlZC4gQ29tcGF0aWJsZSBkb25vciBwb29sIGlzIGxhcmdlLiBTdGFuZGFyZCBjcm9zc21hdGNoIGFuZCBhbGxvY2F0aW9uIHByb2NlZHVyZXMgYXBwbHkuIE1vbml0b3IgYW50aWJvZGllcyBldmVyeSAzIG1vbnRocyBvbiB0aGUgd2FpdGxpc3QgYW5kIGFmdGVyIGFueSBzZW5zaXRpc2luZyBldmVudCAodHJhbnNmdXNpb24sIGZhaWxlZCB0cmFuc3BsYW50LCBwcmVnbmFuY3kpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoY3ByYTw4MCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBjUFJBICR7ci52YWx9JSDigJQgTW9kZXJhdGVseSBzZW5zaXRpc2VkLiBDb21wYXRpYmxlIGRvbm9yIHBvb2wgaXMgcmVkdWNlZC4gSWRlbnRpZnkgdW5hY2NlcHRhYmxlIGFudGlnZW5zIHZpYSBzaW5nbGUtYW50aWdlbiBiZWFkIGFzc2F5LiBDb25zaWRlciBsaXN0aW5nIGF0IG11bHRpcGxlIGNlbnRyZXMgd2hlcmUgcGVybWl0dGVkLiBBdm9pZCB1bm5lY2Vzc2FyeSBibG9vZCB0cmFuc2Z1c2lvbnMgKHVzZSBlcnl0aHJvcG9pZXNpcy1zdGltdWxhdGluZyBhZ2VudHMgcHJlZmVyZW50aWFsbHkpLiBNb25pdG9yIGFudGlib2RpZXMgZXZlcnkgMyBtb250aHMuIExpdmluZyBkb25vciBldmFsdWF0aW9uIGlzIGVuY291cmFnZWQgdG8gZXhwYW5kIG9wdGlvbnMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihjcHJhPDk4KSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YGNQUkEgJHtyLnZhbH0lIOKAlCBIaWdobHkgc2Vuc2l0aXNlZC4gQ29tcGF0aWJsZSBkb25vciBwb29sIGlzIHNpZ25pZmljYW50bHkgcmVkdWNlZC4gSW1tdW5vbG9neS9oaXN0b2NvbXBhdGliaWxpdHkgbGFib3JhdG9yeSBpbnB1dCBpcyBlc3NlbnRpYWwuIERlc2Vuc2l0aXNhdGlvbiBwcm90b2NvbHMgKElWSUcgwrEgcml0dXhpbWFiIMKxIHBsYXNtYXBoZXJlc2lzKSBtYXkgYmUgY29uc2lkZXJlZCBhdCBleHBlcmllbmNlZCBjZW50cmVzLiBQYWlyZWQga2lkbmV5IGV4Y2hhbmdlIHByb2dyYW1tZXMgYW5kIGFjY2VwdGFibGUgbWlzbWF0Y2ggcHJvZ3JhbW1lcyBtYXkgZXhwYW5kIG9wdGlvbnMuIE1vbml0b3IgYW50aWJvZGllcyBmcmVxdWVudGx5IChldmVyeSAx4oCTMyBtb250aHMpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBjUFJBICR7ci52YWx9JSDigJQgVmVyeSBoaWdobHkgc2Vuc2l0aXNlZCAo4omlOTglKS4gQ29tcGF0aWJsZSBkb25vciBwb29sIGlzIGV4dHJlbWVseSBsaW1pdGVkLiBVTk9TIGFsbG9jYXRpb24gcHJvdmlkZXMgcHJpb3JpdHkgcG9pbnRzIGF0IHRoaXMgbGV2ZWwuIEludGVuc2l2ZSBkZXNlbnNpdGlzYXRpb24gKElWSUcsIHJpdHV4aW1hYiwgcGxhc21hcGhlcmVzaXMsIGltbGlmaWRhc2Ugd2hlcmUgYXZhaWxhYmxlKSBzaG91bGQgYmUgZGlzY3Vzc2VkIGF0IGEgaGlnaC12b2x1bWUgdHJhbnNwbGFudCBjZW50cmUuIFBhaXJlZCBraWRuZXkgZXhjaGFuZ2UgYW5kIG11bHRpLWxpc3Rpbmcgc3RyYXRlZ2llcyBhcmUgc3Ryb25nbHkgcmVjb21tZW5kZWQuIEhpc3RvY29tcGF0aWJpbGl0eSBsYWJvcmF0b3J5IGNvbGxhYm9yYXRpb24gZm9yIHZpcnR1YWwgY3Jvc3NtYXRjaCBvcHRpbWlzYXRpb24gaXMgZXNzZW50aWFsLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9mcmFpbHR5IiwgbmFtZToiRnJhaWx0eSBTY3JlZW4g4oCUIEZyaWVkIENyaXRlcmlhIiwgcmVmOiJGcmllZCBMUCBldCBhbC4sIEogR2Vyb250b2wgMjAwMTs1NjpNMTQ2LU0xNTY7IEtESUdPIFRyYW5zcGxhbnQgQ2FuZGlkYWN5IDIwMjAiLCB0YWc6IlByZS1UcmFuc3BsYW50IEZyYWlsdHkgQXNzZXNzbWVudCIsCiAgICAgICAgZm9ybXVsYToiRnJpZWQgRnJhaWx0eSBQaGVub3R5cGUg4oCUIHNjb3JlIDDigJM1OlxuICAxLiBVbmludGVudGlvbmFsIHdlaWdodCBsb3NzID40LjUga2cgKDEwIGxicykgaW4gcGFzdCB5ZWFyXG4gIDIuIFNlbGYtcmVwb3J0ZWQgZXhoYXVzdGlvbiAoQ0VTLUQgc2NhbGUpXG4gIDMuIExvdyBncmlwIHN0cmVuZ3RoIChiZWxvdyBzZXgvQk1JLWFkanVzdGVkIDIwdGggcGVyY2VudGlsZSlcbiAgNC4gU2xvdyBnYWl0IHNwZWVkICg1LW1ldHJlIHdhbGsgPjbigJM3IHNlY29uZHMsIHNleC9oZWlnaHQtYWRqdXN0ZWQpXG4gIDUuIExvdyBwaHlzaWNhbCBhY3Rpdml0eSAoYmVsb3cgc2V4LWFkanVzdGVkIDIwdGggcGVyY2VudGlsZSBrY2FsL3dlZWspXG5Sb2J1c3Q6IDAgfCBQcmUtZnJhaWw6IDHigJMyIHwgRnJhaWw6IOKJpTMiLAogICAgICAgIG5vdGU6IkZyYWlsdHkgaXMgaW5kZXBlbmRlbnRseSBhc3NvY2lhdGVkIHdpdGggaW5jcmVhc2VkIG1vcnRhbGl0eSwgZ3JhZnQgbG9zcywgZGVsYXllZCBncmFmdCBmdW5jdGlvbiwgYW5kIHByb2xvbmdlZCBob3NwaXRhbGlzYXRpb24gYWZ0ZXIga2lkbmV5IHRyYW5zcGxhbnRhdGlvbi4gS0RJR08gMjAyMCBhY2tub3dsZWRnZXMgZnJhaWx0eSBhc3Nlc3NtZW50IGFzIGVtZXJnaW5nIGJlc3QgcHJhY3RpY2UgZm9yIHRyYW5zcGxhbnQgY2FuZGlkYWN5IGV2YWx1YXRpb24uIFRoZSBGcmllZCBwaGVub3R5cGUgKDIwMDEpIGlzIHRoZSBtb3N0IHdpZGVseSB2YWxpZGF0ZWQgZnJhaWx0eSBpbnN0cnVtZW50LiBGcmFpbHR5IGlzIHBvdGVudGlhbGx5IG1vZGlmaWFibGUgdGhyb3VnaCBwcmVoYWJpbGl0YXRpb24gKGV4ZXJjaXNlLCBudXRyaXRpb25hbCBvcHRpbWlzYXRpb24pLiBGcmFpbHR5IGFsb25lIGlzIG5vdCBhbiBhYnNvbHV0ZSBjb250cmFpbmRpY2F0aW9uIHRvIHRyYW5zcGxhbnRhdGlvbiBidXQgc2hvdWxkIGluZm9ybSBzaGFyZWQgZGVjaXNpb24tbWFraW5nLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoid3RfbG9zcyIsbGFiZWw6IlVuaW50ZW50aW9uYWwgd2VpZ2h0IGxvc3MgPjQuNSBrZyAoMTAgbGJzKSBpbiBwYXN0IHllYXIiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImV4aGF1c3Rpb24iLGxhYmVsOiJTZWxmLXJlcG9ydGVkIGV4aGF1c3Rpb24gKGZlZWxpbmcgdGhhdCBldmVyeXRoaW5nIGlzIGFuIGVmZm9ydCwgb3IgY291bGQgbm90IGdldCBnb2luZywgbW9zdCBkYXlzKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiZ3JpcCIsbGFiZWw6IkxvdyBncmlwIHN0cmVuZ3RoIChiZWxvdyBzZXgtIGFuZCBCTUktYWRqdXN0ZWQgMjB0aCBwZXJjZW50aWxlKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiZ2FpdCIsbGFiZWw6IlNsb3cgZ2FpdCBzcGVlZCAoNS1tZXRyZSB3YWxrIHRpbWUgPjbigJM3IHNlY29uZHMsIGFkanVzdGVkIGZvciBzZXggYW5kIGhlaWdodCkiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImFjdGl2aXR5IixsYWJlbDoiTG93IHBoeXNpY2FsIGFjdGl2aXR5IChiZWxvdyBzZXgtYWRqdXN0ZWQgMjB0aCBwZXJjZW50aWxlIGZvciBrY2FsL3dlZWspIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHNjb3JlID0gW3Yud3RfbG9zcyx2LmV4aGF1c3Rpb24sdi5ncmlwLHYuZ2FpdCx2LmFjdGl2aXR5XS5maWx0ZXIoQm9vbGVhbikubGVuZ3RoOwogICAgICAgICAgbGV0IGNhdCA9ICJSb2J1c3QiOwogICAgICAgICAgaWYoc2NvcmU+PTMpIGNhdD0iRnJhaWwiOwogICAgICAgICAgZWxzZSBpZihzY29yZT49MSkgY2F0PSJQcmUtZnJhaWwiOwogICAgICAgICAgcmV0dXJuIHt2YWw6c2NvcmUsdW5pdDpgLzUg4oCUICR7Y2F0fWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgcz1yLnZhbDsKICAgICAgICAgIGlmKHM9PT0wKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEZyaWVkIHNjb3JlIDAvNSDigJQgUm9idXN0LiBObyBmcmFpbHR5IGNyaXRlcmlhIG1ldC4gU3RhbmRhcmQgdHJhbnNwbGFudCBjYW5kaWRhY3kgZXZhbHVhdGlvbiBtYXkgcHJvY2VlZC4gQ29udGludWVkIHBoeXNpY2FsIGFjdGl2aXR5IGFuZCBudXRyaXRpb25hbCBtYWludGVuYW5jZSBhcmUgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihzPD0yKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEZyaWVkIHNjb3JlICR7c30vNSDigJQgUHJlLWZyYWlsLiBUaGlzIGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBpbnRlcm1lZGlhdGUgcmlzayBvZiBhZHZlcnNlIHBvc3QtdHJhbnNwbGFudCBvdXRjb21lcy4gUHJlaGFiaWxpdGF0aW9uIChzdHJ1Y3R1cmVkIGV4ZXJjaXNlIHByb2dyYW1tZSwgbnV0cml0aW9uYWwgb3B0aW1pc2F0aW9uLCBwcm90ZWluIHN1cHBsZW1lbnRhdGlvbikgaXMgcmVjb21tZW5kZWQgYmVmb3JlIHRyYW5zcGxhbnQgbGlzdGluZyB3aGVyZSBmZWFzaWJsZS4gUmVhc3Nlc3NtZW50IGFmdGVyIDPigJM2IG1vbnRocyBvZiBwcmVoYWJpbGl0YXRpb24gbWF5IGRlbW9uc3RyYXRlIGltcHJvdmVtZW50LiBGcmFpbHR5IGFsb25lIHNob3VsZCBub3QgcHJlY2x1ZGUgdHJhbnNwbGFudCBsaXN0aW5nIGJ1dCBzaG91bGQgaW5mb3JtIHNoYXJlZCBkZWNpc2lvbi1tYWtpbmcgcmVnYXJkaW5nIHJpc2suICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEZyaWVkIHNjb3JlICR7c30vNSDigJQgRnJhaWwuIEZyYWlsdHkgaXMgaW5kZXBlbmRlbnRseSBhc3NvY2lhdGVkIHdpdGggaW5jcmVhc2VkIHBvc3QtdHJhbnNwbGFudCBtb3J0YWxpdHksIGdyYWZ0IGxvc3MsIGFuZCBwcm9sb25nZWQgaG9zcGl0YWxpc2F0aW9uLiBBIG11bHRpZGlzY2lwbGluYXJ5IHByZWhhYmlsaXRhdGlvbiBwcm9ncmFtbWUgKHBoeXNpb3RoZXJhcHksIGRpZXRldGljcywgZ2VyaWF0cmljIG1lZGljaW5lIGlucHV0KSBpcyBzdHJvbmdseSByZWNvbW1lbmRlZC4gVHJhbnNwbGFudCBsaXN0aW5nIGRlY2lzaW9ucyBzaG91bGQgaW52b2x2ZSBhIGNhcmVmdWwgcmlzay1iZW5lZml0IGRpc2N1c3Npb24gd2l0aCB0aGUgcGF0aWVudCwgaW5jb3Jwb3JhdGluZyBmcmFpbHR5IHN0YXR1cyBhbG9uZ3NpZGUgYWxsIG90aGVyIGNhbmRpZGFjeSBmYWN0b3JzLiBSZWFzc2Vzc21lbnQgYWZ0ZXIgYSBkZWZpbmVkIHByZWhhYmlsaXRhdGlvbiBwZXJpb2QgaXMgYWR2aXNhYmxlLiBGcmFpbHR5IG1heSBiZSBtb2RpZmlhYmxlIOKAlCBhIHRyaWFsIG9mIHByZWhhYmlsaXRhdGlvbiBiZWZvcmUgYSBmaW5hbCBsaXN0aW5nIGRlY2lzaW9uIGlzIGFwcHJvcHJpYXRlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8g4pSA4pSAIFJFRkVSRU5DRSBQQU5FTFMg4pSA4pSACiAgICAgIHsKICAgICAgICBpZDoidHhfY29udHJhaW5kaWNhdGlvbnMiLCBuYW1lOiJbUkVGXSBBYnNvbHV0ZSBDb250cmFpbmRpY2F0aW9ucyBQYW5lbCIsIHJlZjoiS0RJR08gVHJhbnNwbGFudCBDYW5kaWRhY3kgMjAyMDsgQVNUL0FTVFMgQ29uc2Vuc3VzIiwgdGFnOiJQcmUtVHJhbnNwbGFudCDigJQgQWJzb2x1dGUgQ29udHJhaW5kaWNhdGlvbnMiLAogICAgICAgIGZvcm11bGE6IkFic29sdXRlIGNvbnRyYWluZGljYXRpb25zIHRvIGtpZG5leSB0cmFuc3BsYW50YXRpb246XG4gIDEuIEFjdGl2ZSB1bnRyZWF0ZWQgbWFsaWduYW5jeSAoZXhjZXB0IG5vbi1tZWxhbm9tYSBza2luLCBpbmNpZGVudGFsIHNtYWxsIHJlbmFsKVxuICAyLiBBY3RpdmUgdW50cmVhdGVkIGluZmVjdGlvbiAoVEIsIEhJViB3aXRoIGRldGVjdGFibGUgdmlyYWwgbG9hZCwgYWN0aXZlIGhlcGF0aXRpcylcbiAgMy4gVW5jb250cm9sbGVkIHN1YnN0YW5jZSBkZXBlbmRlbmNlIChhY3RpdmUgd2l0aGluIDYgbW9udGhzKVxuICA0LiBTZXZlcmUgaXJyZXZlcnNpYmxlIG11bHRpLW9yZ2FuIGZhaWx1cmVcbiAgNS4gTGlmZSBleHBlY3RhbmN5IDwxIHllYXIgaW5kZXBlbmRlbnQgb2YgcmVuYWwgZGlzZWFzZVxuICA2LiBBY3RpdmUgbm9uLWFkaGVyZW5jZSB0byBtZWRpY2FsIHRoZXJhcHkgKGRvY3VtZW50ZWQgcGF0dGVybilcbiAgNy4gU2V2ZXJlIHVuY29ycmVjdGFibGUgY2FyZGlhYyBkaXNlYXNlIChpbm9wZXJhYmxlLCBFRiA8MjAlIHdpdGhvdXQgcmV2YXNjdWxhcmlzYXRpb24gb3B0aW9uKVxuICA4LiBBY3RpdmUgcHN5Y2hvc2lzIG9yIHNldmVyZSBjb2duaXRpdmUgaW1wYWlybWVudCBwcmVjbHVkaW5nIGluZm9ybWVkIGNvbnNlbnQiLAogICAgICAgIG5vdGU6IlRoZXNlIHJlcHJlc2VudCB3aWRlbHkgYWNjZXB0ZWQgYWJzb2x1dGUgY29udHJhaW5kaWNhdGlvbnMuIFJlbGF0aXZlIGNvbnRyYWluZGljYXRpb25zIChhZ2UgPjgwLCBCTUkgPjQwLCByZWN1cnJlbnQgb3hhbGF0ZSBuZXBocm9wYXRoeSwgYWN0aXZlIGx1cHVzLCBldGMuKSByZXF1aXJlIGluZGl2aWR1YWwgTURUIGFzc2Vzc21lbnQuIFNvbWUgY2VudHJlcyB0cmVhdCBISVYrIHBhdGllbnRzIHdpdGggdW5kZXRlY3RhYmxlIFZMIGFzIGVsaWdpYmxlIOKAlCBjb25zdWx0IGxvY2FsIHByb3RvY29sLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoibWFsaWciLGxhYmVsOiJBY3RpdmUgdW50cmVhdGVkIG1hbGlnbmFuY3kiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImluZmVjdCIsbGFiZWw6IkFjdGl2ZSB1bnRyZWF0ZWQgc3lzdGVtaWMgaW5mZWN0aW9uIChUQiwgSElWIFZMIGRldGVjdGFibGUpIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJzdWJzdGFuY2UiLGxhYmVsOiJBY3RpdmUgc3Vic3RhbmNlIGRlcGVuZGVuY2UgKDw2IG1vbnRocyBhYnN0aW5lbmNlKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoibW9mIixsYWJlbDoiU2V2ZXJlIGlycmV2ZXJzaWJsZSBtdWx0aS1vcmdhbiBmYWlsdXJlIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJsaWZlMXlyIixsYWJlbDoiTGlmZSBleHBlY3RhbmN5IDwxIHllYXIgaW5kZXBlbmRlbnQgb2Yga2lkbmV5IGRpc2Vhc2UiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6Im5vbmFkaGVyZSIsbGFiZWw6IkRvY3VtZW50ZWQgYWN0aXZlIG5vbi1hZGhlcmVuY2UgcGF0dGVybiIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiY2FyZGlhY19zZXYiLGxhYmVsOiJTZXZlcmUgdW5jb3JyZWN0YWJsZSBjYXJkaWFjIGRpc2Vhc2UiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNvZ25pdGl2ZSIsbGFiZWw6IlNldmVyZSBjb2duaXRpdmUgaW1wYWlybWVudC9hY3RpdmUgcHN5Y2hvc2lzIChubyBjYXBhY2l0eSkiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgaGl0cz1bdi5tYWxpZyx2LmluZmVjdCx2LnN1YnN0YW5jZSx2Lm1vZix2LmxpZmUxeXIsdi5ub25hZGhlcmUsdi5jYXJkaWFjX3Nldix2LmNvZ25pdGl2ZV0uZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgcmV0dXJuIHt2YWw6aGl0cy5sZW5ndGgsdW5pdDpoaXRzLmxlbmd0aD4wPyJBQlNPTFVURSBDT05UUkFJTkRJQ0FUSU9OKFMpIFBSRVNFTlQiOiJOTyBBQlNPTFVURSBDT05UUkFJTkRJQ0FUSU9OUyBJREVOVElGSUVEIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBpZihyLnZhbD09PTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgTm8gYWJzb2x1dGUgY29udHJhaW5kaWNhdGlvbnMgaWRlbnRpZmllZC4gUHJvY2VlZCB3aXRoIGZ1bGwgY2FuZGlkYWN5IGV2YWx1YXRpb24gaW5jbHVkaW5nIGNhcmRpb3Zhc2N1bGFyLCBtYWxpZ25hbmN5LCBpbmZlY3Rpb24gc2NyZWVuaW5nLCBhbmQgcHN5Y2hvc29jaWFsIGFzc2Vzc21lbnQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YCR7ci52YWx9IGFic29sdXRlIGNvbnRyYWluZGljYXRpb24ocykgcHJlc2VudC4gVHJhbnNwbGFudCBsaXN0aW5nIGNhbm5vdCBwcm9jZWVkIHVudGlsIGFsbCBhYnNvbHV0ZSBjb250cmFpbmRpY2F0aW9ucyBhcmUgcmVzb2x2ZWQuIE1EVCByZXZpZXcgaXMgcmVxdWlyZWQgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYW55IGlkZW50aWZpZWQgZmFjdG9yIGlzIHBvdGVudGlhbGx5IHJldmVyc2libGUgKGUuZy4sIGluZmVjdGlvbiB0cmVhdG1lbnQsIHN1YnN0YW5jZSByZWhhYmlsaXRhdGlvbiwgY2FyZGlhYyBpbnRlcnZlbnRpb24pLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9pbmZlY3Rpb25fc2NyZWVuIiwgbmFtZToiW1JFRl0gUHJlLVRyYW5zcGxhbnQgSW5mZWN0aW9uIFNjcmVlbmluZyIsIHJlZjoiS0RJR08gMjAyMDsgQVNUIEluZmVjdGlvdXMgRGlzZWFzZSBHdWlkZWxpbmVzOyBFUkEtRURUQSBCZXN0IFByYWN0aWNlIiwgdGFnOiJQcmUtVHJhbnNwbGFudCDigJQgSW5mZWN0aW9uIENoZWNrbGlzdCIsCiAgICAgICAgZm9ybXVsYToiUmVxdWlyZWQgc2NyZWVuaW5nOlxuICBUQjogSUdSQSAoUXVhbnRpRkVST04vVC1TUE9UKSArIENYUiAobWFuZGF0b3J5KVxuICBISVY6IDR0aC1nZW4gQWcvQWIgKG1hbmRhdG9yeSlcbiAgSEJWOiBIQnNBZywgYW50aS1IQnMsIGFudGktSEJjIChtYW5kYXRvcnkpXG4gIEhDVjogQW50aS1IQ1YgQWIgKyBOQVQgaWYgcG9zaXRpdmUgKG1hbmRhdG9yeSlcbiAgQ01WOiBJZ0cgc2Vyb2xvZ3kgKG1hbmRhdG9yeSDigJQgZGV0ZXJtaW5lcyBwcm9waHlsYXhpcylcbiAgRUJWOiBJZ0cgc2Vyb2xvZ3kgKG1hbmRhdG9yeSDigJQgUFRMRCByaXNrIHN0cmF0aWZpY2F0aW9uKVxuICBWWlY6IElnRyBzZXJvbG9neSAodmFjY2luYXRlIGlmIG5lZ2F0aXZlKVxuICBTeXBoaWxpczogUlBSL1ZEUkwgKG1hbmRhdG9yeSlcbiAgU3Ryb25neWxvaWRlczogSWdHIGlmIGVuZGVtaWMgZXhwb3N1cmVcbiAgQ2hhZ2FzOiBJZ0cgaWYgZW5kZW1pYyBleHBvc3VyZSAoTGF0aW4gQW1lcmljYSkiLAogICAgICAgIG5vdGU6IklHUkEgcHJlZmVycmVkIG92ZXIgUFBEIGluIEVTUkQgKFBQRCB1bnJlbGlhYmxlIGR1ZSB0byBhbmVyZ3kpLiBBbGwgSEJWLXNlcm9uZWdhdGl2ZSBjYW5kaWRhdGVzIHNob3VsZCByZWNlaXZlIEhCViB2YWNjaW5hdGlvbiAoaGlnaC1kb3NlL2FkanV2YW50ZWQgcHJlZmVycmVkIGluIEVTUkQpLiBDTVYgRCsvUi0gaXMgaGlnaGVzdC1yaXNrIGNvbWJpbmF0aW9uIGZvciBwb3N0LXRyYW5zcGxhbnQgQ01WIGRpc2Vhc2UuIEVCViBSLSByZWNlaXZpbmcgRUJWIEQrIG9yZ2FuIGlzIGhpZ2hlc3QgcmlzayBmb3IgUFRMRC4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InRiIixsYWJlbDoiVEIgc2NyZWVuIChJR1JBICsgQ1hSKSBjb21wbGV0ZWQiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImhpdiIsbGFiZWw6IkhJViA0dGgtZ2VuIEFnL0FiIGNvbXBsZXRlZCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiaGJ2IixsYWJlbDoiSEJWIHBhbmVsIChIQnNBZywgYW50aS1IQnMsIGFudGktSEJjKSBjb21wbGV0ZWQiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImhjdiIsbGFiZWw6IkhDViBBYiAoKy8tIE5BVCkgY29tcGxldGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJjbXYiLGxhYmVsOiJDTVYgSWdHIGNvbXBsZXRlZCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiZWJ2IixsYWJlbDoiRUJWIElnRyBjb21wbGV0ZWQiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6InZ6diIsbGFiZWw6IlZaViBJZ0cgY29tcGxldGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJzeXBoaWxpcyIsbGFiZWw6IlN5cGhpbGlzIHNjcmVlbiAoUlBSL1ZEUkwpIGNvbXBsZXRlZCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBkb25lPVt2LnRiLHYuaGl2LHYuaGJ2LHYuaGN2LHYuY212LHYuZWJ2LHYudnp2LHYuc3lwaGlsaXNdLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7CiAgICAgICAgICByZXR1cm4ge3ZhbDpgJHtkb25lfS84YCx1bml0OiJtYW5kYXRvcnkgc2NyZWVucyBjb21wbGV0ZWQiLHNlYzpkb25lPT09OD8iQWxsIG1hbmRhdG9yeSBzY3JlZW5zIGNvbXBsZXRlIjoiSU5DT01QTEVURSDigJQgbGlzdGluZyBjYW5ub3QgcHJvY2VlZCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBkb25lPVt2LnRiLHYuaGl2LHYuaGJ2LHYuaGN2LHYuY212LHYuZWJ2LHYudnp2LHYuc3lwaGlsaXNdLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7CiAgICAgICAgICBjb25zdCBtaXNzaW5nPVtdOwogICAgICAgICAgaWYoIXYudGIpIG1pc3NpbmcucHVzaCgiVEIgKElHUkErQ1hSKSIpOwogICAgICAgICAgaWYoIXYuaGl2KSBtaXNzaW5nLnB1c2goIkhJViIpOwogICAgICAgICAgaWYoIXYuaGJ2KSBtaXNzaW5nLnB1c2goIkhCViBwYW5lbCIpOwogICAgICAgICAgaWYoIXYuaGN2KSBtaXNzaW5nLnB1c2goIkhDViIpOwogICAgICAgICAgaWYoIXYuY212KSBtaXNzaW5nLnB1c2goIkNNViBJZ0ciKTsKICAgICAgICAgIGlmKCF2LmVidikgbWlzc2luZy5wdXNoKCJFQlYgSWdHIik7CiAgICAgICAgICBpZighdi52enYpIG1pc3NpbmcucHVzaCgiVlpWIElnRyIpOwogICAgICAgICAgaWYoIXYuc3lwaGlsaXMpIG1pc3NpbmcucHVzaCgiU3lwaGlsaXMiKTsKICAgICAgICAgIGlmKGRvbmU9PT04KSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEFsbCA4IG1hbmRhdG9yeSBpbmZlY3Rpb24gc2NyZWVucyBjb21wbGV0ZWQuIFByb2NlZWQgd2l0aCByZXN1bHQgaW50ZXJwcmV0YXRpb24sIHZhY2NpbmF0aW9uIGFzIGluZGljYXRlZCAoSEJWIGlmIGFudGktSEJzIDwxMCwgVlpWIGlmIHNlcm9uZWdhdGl2ZSksIGFuZCBDTVYvRUJWIHJpc2sgc3RyYXRpZmljYXRpb24gZm9yIHBvc3QtdHJhbnNwbGFudCBwcm9waHlsYXhpcyBwbGFubmluZy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgJHtkb25lfS84IHNjcmVlbnMgY29tcGxldGVkLiBPdXRzdGFuZGluZzogJHttaXNzaW5nLmpvaW4oIiwgIil9LiBBbGwgbWFuZGF0b3J5IHNjcmVlbnMgbXVzdCBiZSBjb21wbGV0ZWQgYmVmb3JlIHRyYW5zcGxhbnQgbGlzdGluZyBjYW4gcHJvY2VlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIOKUgOKUgCBQT1NULVRSQU5TUExBTlQg4pSA4pSACiAgICAgIHsKICAgICAgICBpZDoidHhfZWdmcl9zdXJ2IiwgbmFtZToiUG9zdC1UcmFuc3BsYW50IGVHRlIgU3VydmVpbGxhbmNlIiwgcmVmOiJLRElHTyBUcmFuc3BsYW50IFJlY2lwaWVudCAyMDA5IENoLjE7IExvdXB5IGV0IGFsLiwgTkVKTSAyMDE4IiwgdGFnOiJQb3N0LVRyYW5zcGxhbnQg4oCUIGVHRlIgVHJhamVjdG9yeSAmIFJlamVjdGlvbiBSaXNrIiwKICAgICAgICBmb3JtdWxhOiJFeHBlY3RlZCBlR0ZSIHRyYWplY3RvcnkgYWZ0ZXIga2lkbmV5IHRyYW5zcGxhbnQ6XG4gIFdlZWsgMTogUmFwaWQgcmlzZSAoREdGIG1heSBkZWxheSlcbiAgTW9udGggMS0zOiBQbGF0ZWF1IGF0IG5hZGlyLWFkanVzdGVkIHBlYWtcbiAgTW9udGggMy0xMjogU3RhYmxlIG9yIHNsb3cgaW1wcm92ZW1lbnRcbiAgWWVhciAxKzogU3RhYmxlOyBkZWNsaW5lID41IG1ML21pbi95ciA9IGludmVzdGlnYXRlXG5cblJlamVjdGlvbiBmbGFnczpcbiAgLSBDciByaXNlID4yMCUgZnJvbSBuYWRpciA9IGludmVzdGlnYXRlXG4gIC0gTmV3IHByb3RlaW51cmlhIChVUENSID41MDApID0gaW52ZXN0aWdhdGVcbiAgLSBkZSBub3ZvIERTQSA9IGhpZ2ggcmlzayBmb3IgQU1SIiwKICAgICAgICBub3RlOiJHVUlERUxJTkUtQkFTRUQgVE9PTCDigJQgVGhpcyBjYWxjdWxhdG9yIGFwcGxpZXMgcHVibGlzaGVkIGNsaW5pY2FsIHRocmVzaG9sZHMgYnV0IGlzIG5vdCBpdHNlbGYgYSB2YWxpZGF0ZWQgY29tcG9zaXRlIHNjb3JpbmcgaW5zdHJ1bWVudC4gSW50ZXJwcmV0IHdpdGhpbiBjbGluaWNhbCBjb250ZXh0LlxuXG5Bbnkgc3VzdGFpbmVkIGVHRlIgZGVjbGluZSBzaG91bGQgcHJvbXB0IGludmVzdGlnYXRpb246IG5vbi1hZGhlcmVuY2Ugc2NyZWVuLCB0YWNyb2xpbXVzIGxldmVsLCB1cmluYWx5c2lzLCBEU0EgdGVzdGluZywgcmVuYWwgdWx0cmFzb3VuZCwgYW5kIGNvbnNpZGVyYXRpb24gb2YgdHJhbnNwbGFudCBiaW9wc3kuIERpZmZlcmVudGlhbCBpbmNsdWRlcyByZWplY3Rpb24gKFRDTVIvQU1SKSwgQksgbmVwaHJvcGF0aHksIHJlY3VycmVudCBkaXNlYXNlLCBDTkkgdG94aWNpdHksIGFuZCBvYnN0cnVjdGlvbi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImVnZnJfbmFkaXIiLGxhYmVsOiJCZXN0IChuYWRpci1hZGp1c3RlZCkgZUdGUiBwb3N0LXRyYW5zcGxhbnQiLHVuaXQ6Im1ML21pbi8xLjczbcKyIix0eXBlOiJudW1iZXIiLHBoOiI1NSJ9LAogICAgICAgICAge2lkOiJlZ2ZyX25vdyIsbGFiZWw6IkN1cnJlbnQgZUdGUiIsdW5pdDoibUwvbWluLzEuNzNtwrIiLHR5cGU6Im51bWJlciIscGg6IjQyIn0sCiAgICAgICAgICB7aWQ6Im1vbnRoc19wb3N0IixsYWJlbDoiTW9udGhzIHBvc3QtdHJhbnNwbGFudCIsdW5pdDoibW9udGhzIix0eXBlOiJudW1iZXIiLHBoOiIxOCJ9LAogICAgICAgICAge2lkOiJuZXdfcHJvdGVpbnVyaWEiLGxhYmVsOiJOZXcgcHJvdGVpbnVyaWEgKFVQQ1IgPjUwMCBtZy9nKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiZG5EU0EiLGxhYmVsOiJkZSBub3ZvIERTQSBkZXRlY3RlZCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoidGFjX2xvdyIsbGFiZWw6IlRhY3JvbGltdXMgdHJvdWdoIHN1Yi10aGVyYXBldXRpYyIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBiZXN0PSt2LmVnZnJfbmFkaXIsbm93PSt2LmVnZnJfbm93LG1vPSt2Lm1vbnRoc19wb3N0OwogICAgICAgICAgaWYoIWJlc3R8fCFub3d8fCFtbykgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBkZWNsaW5lPWJlc3Qtbm93OwogICAgICAgICAgY29uc3QgYW5udWFsUmF0ZT1tbz4wPyhkZWNsaW5lLyhtby8xMikpOjA7CiAgICAgICAgICByZXR1cm4ge3ZhbDpub3cudG9GaXhlZCgwKSx1bml0OiJtTC9taW4vMS43M23CsiIsc2VjOmBEZWNsaW5lIGZyb20gYmVzdDogJHtkZWNsaW5lLnRvRml4ZWQoMCl9IHwgQW5udWFsIHJhdGU6ICR7YW5udWFsUmF0ZS50b0ZpeGVkKDEpfSBtTC9taW4veXJgfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgYmVzdD0rdi5lZ2ZyX25hZGlyLG5vdz0rdi5lZ2ZyX25vdyxtbz0rdi5tb250aHNfcG9zdDsKICAgICAgICAgIGNvbnN0IGRlY2xpbmU9YmVzdC1ub3c7CiAgICAgICAgICBjb25zdCBwY3REcm9wPShkZWNsaW5lL2Jlc3QpKjEwMDsKICAgICAgICAgIGNvbnN0IGFubnVhbFJhdGU9bW8+MD8oZGVjbGluZS8obW8vMTIpKTowOwogICAgICAgICAgY29uc3QgZmxhZ3M9W3YubmV3X3Byb3RlaW51cmlhJiYibmV3IHByb3RlaW51cmlhIix2LmRuRFNBJiYiZGUgbm92byBEU0EiLHYudGFjX2xvdyYmInN1Yi10aGVyYXBldXRpYyB0YWNyb2xpbXVzIl0uZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgaWYocGN0RHJvcD4yMHx8YW5udWFsUmF0ZT41fHxmbGFncy5sZW5ndGg+MCl7CiAgICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgZUdGUiAke25vd30g4oCUIFNpZ25pZmljYW50IGRlY2xpbmUgKCR7cGN0RHJvcC50b0ZpeGVkKDApfSUgZnJvbSBiZXN0LCAke2FubnVhbFJhdGUudG9GaXhlZCgxKX0gbUwvbWluL3lyKS4ke2ZsYWdzLmxlbmd0aD4wPyIgRmxhZ3M6ICIrZmxhZ3Muam9pbigiLCAiKSsiLiI6IiJ9IFRyYW5zcGxhbnQgYmlvcHN5IGlzIHN0cm9uZ2x5IHJlY29tbWVuZGVkLiBEaWZmZXJlbnRpYWw6IGFjdXRlL2Nocm9uaWMgcmVqZWN0aW9uLCBCSyBuZXBocm9wYXRoeSwgQ05JIHRveGljaXR5LCByZWN1cnJlbnQgZGlzZWFzZSwgb2JzdHJ1Y3Rpb24uIENoZWNrIHRhY3JvbGltdXMgbGV2ZWwsIEJLIFBDUiwgRFNBLCB1cmluZSBtaWNyb3Njb3B5LCBhbmQgcmVuYWwgdWx0cmFzb3VuZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHBjdERyb3A+MTB8fGFubnVhbFJhdGU+Myl7CiAgICAgICAgICAgIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgZUdGUiAke25vd30g4oCUIE1vZGVyYXRlIGRlY2xpbmUgKCR7cGN0RHJvcC50b0ZpeGVkKDApfSUgZnJvbSBiZXN0KS4gRW5oYW5jZWQgc3VydmVpbGxhbmNlIHJlY29tbWVuZGVkOiB0YWNyb2xpbXVzIGxldmVsLCBEU0EsIEJLIFBDUiwgdXJpbmFseXNpcy4gQ29uc2lkZXIgcHJvdG9jb2wgYmlvcHN5IGlmIGRlY2xpbmUgcGVyc2lzdHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YGVHRlIgJHtub3d9IOKAlCBTdGFibGUgdHJhamVjdG9yeSAoJHtwY3REcm9wLnRvRml4ZWQoMCl9JSBmcm9tIGJlc3QsICR7YW5udWFsUmF0ZS50b0ZpeGVkKDEpfSBtTC9taW4veXIpLiBSb3V0aW5lIHN1cnZlaWxsYW5jZTogdGFjcm9saW11cyBsZXZlbCwgdXJpbmFseXNpcywgRFNBIHBlciBwcm90b2NvbC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoidHhfYmFuZmYiLCBuYW1lOiJCYW5mZiAyMDIyIFJlamVjdGlvbiBDbGFzc2lmaWVyIiwgcmVmOiJOYWVzZW5zIGV0IGFsLiwgQW0gSiBUcmFuc3BsYW50IDIwMjQ7MjQ6MzM4LTM0OTsgQmFuZmYgRm91bmRhdGlvbiAyMDIyIiwgdGFnOiJQb3N0LVRyYW5zcGxhbnQg4oCUIFRDTVIgKyBBTVIvTVZJIENsYXNzaWZpY2F0aW9uIiwKICAgICAgICBmb3JtdWxhOiJUQ01SIChULUNlbGwgTWVkaWF0ZWQgUmVqZWN0aW9uKTpcbiAgQm9yZGVybGluZTogaTErdDEgKHN1c3BpY2lvdXMpXG4gIEdyYWRlIElBOiBpMit0MiB8IEdyYWRlIElCOiBpMit0MyBvciBpMyt0Mi90M1xuICBHcmFkZSBJSUE6IHYxIChpbnRpbWFsIGFydGVyaXRpcykgfCBHcmFkZSBJSUI6IHYyXG4gIEdyYWRlIElJSTogdjMgKHRyYW5zbXVyYWwvZmlicmlub2lkIG5lY3Jvc2lzKVxuXG5BTVIvTVZJIChBbnRpYm9keS1NZWRpYXRlZCBSZWplY3Rpb24pOlxuICBSZXF1aXJlcyBBTEwgMyBjcml0ZXJpYTpcbiAgMS4gTVZJOiBbZytwdGNdIOKJpTIgKG9yIHZhbGlkYXRlZCB0cmFuc2NyaXB0KVxuICAyLiBFdmlkZW5jZSBvZiBhbnRpYm9keSBpbnRlcmFjdGlvbjogQzRk4omlMiAoSUYpIG9yIEM0ZD4wIChJSEMpIG9yIG1vbGVjdWxhclxuICAzLiBEU0EgcG9zaXRpdmUgKEhMQSBvciB2YWxpZGF0ZWQgbm9uLUhMQSlcblxuICBBY3RpdmUgQU1SOiBhY3RpdmUgZmVhdHVyZXMgb25seSAoY2c9MCwgcHRjbWw9MClcbiAgQ2hyb25pYyBhY3RpdmUgQU1SOiBhY3RpdmUgKyBjaHJvbmljIChjZz4wIG9yIHNldmVyZSBwdGNtbClcbiAgUHJvYmFibGUgQU1SOiBEU0ErIGJ1dCBNVkkgYmVsb3cgdGhyZXNob2xkXG4gIE1WSSBEU0EtL0M0ZC06IE1WSSBwcmVzZW50IGJ1dCBubyBEU0EsIG5vIEM0ZCIsCiAgICAgICAgbm90ZToiQmFuZmYgMjAyMiBpbnRyb2R1Y2VkIE1WSSBhcyBhIHN0YW5kYWxvbmUgY2F0ZWdvcnkgd2hlbiBEU0EgYW5kIEM0ZCBhcmUgbmVnYXRpdmUuIFRoaXMgaXMgYSBkZXNjcmlwdGl2ZSBwaGVub3R5cGUgcmVxdWlyaW5nIGZ1cnRoZXIgcmVzZWFyY2guIFRDTVIgYW5kIEFNUiBjYW4gY29leGlzdCAobWl4ZWQgcmVqZWN0aW9uKS4gQmlvcHN5LWJhc2VkIHRyYW5zY3JpcHQgZGlhZ25vc3RpY3MgKGUuZy4sIE1NRHgpIGNhbiBzdWJzdGl0dXRlIGZvciBoaXN0b2xvZ2ljIE1WSSBpZiB2YWxpZGF0ZWQuIEFsd2F5cyBjb3JyZWxhdGUgd2l0aCBjbGluaWNhbCBjb250ZXh0LCBEU0EgdHJhamVjdG9yeSwgYW5kIGdyYWZ0IGZ1bmN0aW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiaV9zY29yZSIsbGFiZWw6Imkgc2NvcmUgKGludGVyc3RpdGlhbCBpbmZsYW1tYXRpb24pIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJpMCIsImkxIiwiaTIiLCJpMyJdfSwKICAgICAgICAgIHtpZDoidF9zY29yZSIsbGFiZWw6InQgc2NvcmUgKHR1YnVsaXRpcykiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbInQwIiwidDEiLCJ0MiIsInQzIl19LAogICAgICAgICAge2lkOiJ2X3Njb3JlIixsYWJlbDoidiBzY29yZSAoaW50aW1hbCBhcnRlcml0aXMpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJ2MCIsInYxIiwidjIiLCJ2MyJdfSwKICAgICAgICAgIHtpZDoiZ19zY29yZSIsbGFiZWw6Imcgc2NvcmUgKGdsb21lcnVsaXRpcykiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbImcwIiwiZzEiLCJnMiIsImczIl19LAogICAgICAgICAge2lkOiJwdGNfc2NvcmUiLGxhYmVsOiJwdGMgc2NvcmUgKHBlcml0dWJ1bGFyIGNhcGlsbGFyaXRpcykiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbInB0YzAiLCJwdGMxIiwicHRjMiIsInB0YzMiXX0sCiAgICAgICAgICB7aWQ6ImM0ZCIsbGFiZWw6IkM0ZCBzdGFpbmluZyIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTmVnYXRpdmUgKEM0ZDApIiwiTWluaW1hbCAoQzRkMSkiLCJGb2NhbCAoQzRkMikiLCJEaWZmdXNlIChDNGQzKSJdfSwKICAgICAgICAgIHtpZDoiY2dfc2NvcmUiLGxhYmVsOiJjZyBzY29yZSAodHJhbnNwbGFudCBnbG9tZXJ1bG9wYXRoeSkiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbImNnMCIsImNnMWEiLCJjZzFiIiwiY2cyIiwiY2czIl19LAogICAgICAgICAge2lkOiJkc2Ffc3RhdHVzIixsYWJlbDoiRG9ub3ItU3BlY2lmaWMgQW50aWJvZHkgKERTQSkiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5lZ2F0aXZlIiwiUG9zaXRpdmUgKEhMQSBDbGFzcyBJKSIsIlBvc2l0aXZlIChITEEgQ2xhc3MgSUkpIiwiUG9zaXRpdmUgKEhMQSBDbGFzcyBJICsgSUkpIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGk9cGFyc2VJbnQodi5pX3Njb3JlPy5yZXBsYWNlKCJpIiwiIikpfHwwOwogICAgICAgICAgY29uc3QgdD1wYXJzZUludCh2LnRfc2NvcmU/LnJlcGxhY2UoInQiLCIiKSl8fDA7CiAgICAgICAgICBjb25zdCB2dj1wYXJzZUludCh2LnZfc2NvcmU/LnJlcGxhY2UoInYiLCIiKSl8fDA7CiAgICAgICAgICBjb25zdCBnPXBhcnNlSW50KHYuZ19zY29yZT8ucmVwbGFjZSgiZyIsIiIpKXx8MDsKICAgICAgICAgIGNvbnN0IHB0Yz1wYXJzZUludCh2LnB0Y19zY29yZT8ucmVwbGFjZSgicHRjIiwiIikpfHwwOwogICAgICAgICAgY29uc3QgY2c9KHYuY2dfc2NvcmV8fCJjZzAiKSE9PSJjZzAiPzE6MDsKICAgICAgICAgIGNvbnN0IGM0ZFBvcz12LmM0ZD8uaW5jbHVkZXMoIkZvY2FsIil8fHYuYzRkPy5pbmNsdWRlcygiRGlmZnVzZSIpOwogICAgICAgICAgY29uc3QgZHNhUG9zPXYuZHNhX3N0YXR1cyE9PSJOZWdhdGl2ZSI7CiAgICAgICAgICBjb25zdCBtdmk9ZytwdGM7CgogICAgICAgICAgbGV0IHRjbXI9Ik5vbmUiOwogICAgICAgICAgaWYodnY+PTMpIHRjbXI9IkdyYWRlIElJSSI7CiAgICAgICAgICBlbHNlIGlmKHZ2PT09MikgdGNtcj0iR3JhZGUgSUlCIjsKICAgICAgICAgIGVsc2UgaWYodnY9PT0xKSB0Y21yPSJHcmFkZSBJSUEiOwogICAgICAgICAgZWxzZSBpZigoaT49MiYmdD49Myl8fChpPj0zJiZ0Pj0yKSkgdGNtcj0iR3JhZGUgSUIiOwogICAgICAgICAgZWxzZSBpZihpPj0yJiZ0Pj0yKSB0Y21yPSJHcmFkZSBJQSI7CiAgICAgICAgICBlbHNlIGlmKGk+PTEmJnQ+PTEpIHRjbXI9IkJvcmRlcmxpbmUiOwoKICAgICAgICAgIGxldCBhbXI9Ik5vbmUiOwogICAgICAgICAgaWYobXZpPj0yJiYoYzRkUG9zKSYmZHNhUG9zKXsKICAgICAgICAgICAgYW1yPWNnPyJDaHJvbmljIEFjdGl2ZSBBTVIiOiJBY3RpdmUgQU1SIjsKICAgICAgICAgIH0gZWxzZSBpZihtdmk+PTImJmRzYVBvcyYmIWM0ZFBvcyl7CiAgICAgICAgICAgIGFtcj0iUHJvYmFibGUgQU1SIChEU0ErLCBDNGQtKSI7CiAgICAgICAgICB9IGVsc2UgaWYobXZpPj0yJiYhZHNhUG9zJiYhYzRkUG9zKXsKICAgICAgICAgICAgYW1yPSJNVkksIERTQS1uZWdhdGl2ZSwgQzRkLW5lZ2F0aXZlIjsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4ge3ZhbDpgVENNUjogJHt0Y21yfSB8IEFNUjogJHthbXJ9YCx1bml0OiIiLHNlYzpgTVZJIHNjb3JlOiBnJHtnfStwdGMke3B0Y309JHttdml9IHwgQzRkOiAke3YuYzRkfSB8IERTQTogJHt2LmRzYV9zdGF0dXN9IHwgY2c6ICR7di5jZ19zY29yZX1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgaGFzVENNUj0hci52YWwuaW5jbHVkZXMoIlRDTVI6IE5vbmUiKTsKICAgICAgICAgIGNvbnN0IGhhc0FNUj0hci52YWwuaW5jbHVkZXMoIkFNUjogTm9uZSIpOwogICAgICAgICAgaWYoaGFzVENNUiYmaGFzQU1SKSByZXR1cm4ge2M6IiM5OTFiMWIiLHQ6YE1JWEVEIFJFSkVDVElPTjogJHtyLnZhbH0uIFRoaXMgY2FycmllcyB0aGUgd29yc3QgcHJvZ25vc2lzLiBUcmVhdG1lbnQ6IGhpZ2gtZG9zZSBJViBtZXRoeWxwcmVkbmlzb2xvbmUgKFRDTVIpICsgYW50aS1yZWplY3Rpb24gdGhlcmFweSBmb3IgQU1SIChwbGFzbWFwaGVyZXNpcywgSVZJRywgcml0dXhpbWFiKSBhcyBpbmRpY2F0ZWQuIFVyZ2VudCB0cmFuc3BsYW50IG5lcGhyb2xvZ3kgYW5kIHBhdGhvbG9neSByZXZpZXcuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihyLnZhbC5pbmNsdWRlcygiR3JhZGUgSUlJIil8fHIudmFsLmluY2x1ZGVzKCJHcmFkZSBJSUIiKSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBTZXZlcmUgVENNUjogJHtyLnZhbH0uIElWIG1ldGh5bHByZWRuaXNvbG9uZSA1MDBtZyB4M2QuIElmIHN0ZXJvaWQtcmVzaXN0YW50OiBBVEcuIENvbnNpZGVyIGNvbmN1cnJlbnQgc3ViY2xpbmljYWwgQU1SLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoci52YWwuaW5jbHVkZXMoIkFjdGl2ZSBBTVIiKXx8ci52YWwuaW5jbHVkZXMoIkNocm9uaWMgQWN0aXZlIEFNUiIpKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YCR7ci52YWx9LiBUcmVhdG1lbnQ6IHBsYXNtYXBoZXJlc2lzICsgSVZJRyArLy0gcml0dXhpbWFiLiBPcHRpbWlzZSBiYXNlbGluZSBpbW11bm9zdXBwcmVzc2lvbi4gQ2hyb25pYyBhY3RpdmUgQU1SIGhhcyBsaW1pdGVkIHRyZWF0bWVudCBvcHRpb25zIGFuZCBjYXJyaWVzIHNpZ25pZmljYW50IGdyYWZ0IGxvc3Mgcmlzay4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKGhhc1RDTVIpIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgJHtyLnZhbH0uIElWIG1ldGh5bHByZWRuaXNvbG9uZSBwdWxzZS4gT3B0aW1pc2UgdGFjcm9saW11cyB0YXJnZXQuIFJlcGVhdCBiaW9wc3kgaWYgbm8gcmVzcG9uc2UgYXQgNy0xMCBkYXlzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoci52YWwuaW5jbHVkZXMoIlByb2JhYmxlIEFNUiIpKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YCR7ci52YWx9LiBFbmhhbmNlZCBzdXJ2ZWlsbGFuY2U6IHJlcGVhdCBEU0EsIHJlcGVhdCBiaW9wc3kgMy02IG1vbnRocy4gT3B0aW1pc2UgaW1tdW5vc3VwcHJlc3Npb24uIENvbnNpZGVyIG1vbGVjdWxhciBkaWFnbm9zdGljcyAoTU1EeCkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihyLnZhbC5pbmNsdWRlcygiTVZJLCBEU0EtbmVnYXRpdmUiKSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmAke3IudmFsfS4gVGhpcyBpcyBhIEJhbmZmIDIwMjIgZGVzY3JpcHRpdmUgY2F0ZWdvcnkgb2YgdW5jbGVhciBhZXRpb2xvZ3kuIENvbnNpZGVyIG5vbi1ITEEgYW50aWJvZGllcywgdmlyYWwgaW5mZWN0aW9uLCBkcnVnIHRveGljaXR5LiBFbmhhbmNlZCBzdXJ2ZWlsbGFuY2UuIFJlc2VhcmNoIGlzIG9uZ29pbmcuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YE5vIHJlamVjdGlvbiBjcml0ZXJpYSBtZXQgb24gY3VycmVudCBiaW9wc3kgc2NvcmVzLiBDb3JyZWxhdGUgd2l0aCBjbGluaWNhbCBjb250ZXh0LCBncmFmdCBmdW5jdGlvbiB0cmFqZWN0b3J5LCBhbmQgRFNBIHN0YXR1cy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIOKUgOKUgCBJTU1VTk9TVVBQUkVTU0lPTiBURE0g4pSA4pSACiAgICAgIHsKICAgICAgICBpZDoidHhfY3NhX3RkbSIsIG5hbWU6IkN5Y2xvc3BvcmluZSBURE0gKEMwICsgQzIpIiwgcmVmOiJLRElHTyBUcmFuc3BsYW50IFJlY2lwaWVudCAyMDA5OyBDT05DRVJUIEdyb3VwIENvbnNlbnN1czsgTGV2eSBldCBhbC4sIFRyYW5zcGxhbnRhdGlvbiAyMDAyIiwgdGFnOiJJbW11bm9zdXBwcmVzc2lvbiDigJQgQ3NBIFRoZXJhcGV1dGljIERydWcgTW9uaXRvcmluZyIsCiAgICAgICAgZm9ybXVsYToiQzAgKHRyb3VnaCkgdGFyZ2V0czpcbiAgTW9udGggMC0zOiAxNTAtMzAwIG5nL21MXG4gIE1vbnRoIDMtMTI6IDEwMC0yMDAgbmcvbUxcbiAgPjEyIG1vbnRoczogNzUtMTUwIG5nL21MXG5cbkMyICgyaCBwb3N0LWRvc2UpIHRhcmdldHM6XG4gIE1vbnRoIDAtMzogMTIwMC0xNTAwIG5nL21MIChkZSBub3ZvKVxuICBNb250aCAzLTEyOiA4MDAtMTAwMCBuZy9tTFxuICA+MTIgbW9udGhzOiA1MDAtNjAwIG5nL21MXG5cbkMyIGNvcnJlbGF0ZXMgYmV0dGVyIHdpdGggQVVDMC00IHRoYW4gQzAgKHLCsiB+MC44NiB2cyAwLjYxKS4iLAogICAgICAgIG5vdGU6IkMyIG1vbml0b3JpbmcgaXMgcHJlZmVycmVkIHdoZXJlIGF2YWlsYWJsZSBhcyBpdCBiZXR0ZXIgcmVmbGVjdHMgZHJ1ZyBleHBvc3VyZSAoQVVDMC00KS4gQ3NBIGFic29ycHRpb24gKEMyL0MwIHJhdGlvKSBpbmNyZWFzZXMgb3ZlciB0aW1lIHBvc3QtdHJhbnNwbGFudC4gQ1lQM0E0LzUgYW5kIFAtZ3AgaW50ZXJhY3Rpb25zIGFyZSBzaWduaWZpY2FudCAoZGlsdGlhemVtLCBrZXRvY29uYXpvbGUgaW5jcmVhc2UgbGV2ZWxzOyByaWZhbXBpY2luLCBwaGVueXRvaW4gZGVjcmVhc2UpLiBHaXZlIHNpcm9saW11cyA0aCBhZnRlciBDc0EgdG8gcmVkdWNlIGludGVyYWN0aW9uLiBOZW9yYWwgKG1pY3JvZW11bHNpb24pIGhhcyBtb3JlIHByZWRpY3RhYmxlIGFic29ycHRpb24gdGhhbiBTYW5kaW1tdW5lLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYzAiLGxhYmVsOiJDMCAoVHJvdWdoIExldmVsKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6IjE3NSJ9LAogICAgICAgICAge2lkOiJjMiIsbGFiZWw6IkMyICgyLUhvdXIgUG9zdC1Eb3NlIExldmVsKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6Ijk1MCJ9LAogICAgICAgICAge2lkOiJwZXJpb2QiLGxhYmVsOiJUaW1lIFBvc3QtVHJhbnNwbGFudCIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiMC0zIG1vbnRocyIsIjMtMTIgbW9udGhzIiwiPjEyIG1vbnRocyJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBjMD0rdi5jMCxjMj0rdi5jMixwPXYucGVyaW9kOwogICAgICAgICAgY29uc3QgdGFyZ2V0cz17CiAgICAgICAgICAgICIwLTMgbW9udGhzIjp7YzA6WzE1MCwzMDBdLGMyOlsxMjAwLDE1MDBdfSwKICAgICAgICAgICAgIjMtMTIgbW9udGhzIjp7YzA6WzEwMCwyMDBdLGMyOls4MDAsMTAwMF19LAogICAgICAgICAgICAiPjEyIG1vbnRocyI6e2MwOls3NSwxNTBdLGMyOls1MDAsNjAwXX0sCiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgdGd0PXRhcmdldHNbcF18fHRhcmdldHNbIjAtMyBtb250aHMiXTsKICAgICAgICAgIGNvbnN0IGMwU3RhdHVzPWMwP2MwPHRndC5jMFswXT8iU1VCLVRIRVJBUEVVVElDIjpjMD50Z3QuYzBbMV0/IlNVUFJBLVRIRVJBUEVVVElDIjoiV0lUSElOIFRBUkdFVCI6Im5vdCBtZWFzdXJlZCI7CiAgICAgICAgICBjb25zdCBjMlN0YXR1cz1jMj9jMjx0Z3QuYzJbMF0/IlNVQi1USEVSQVBFVVRJQyI6YzI+dGd0LmMyWzFdPyJTVVBSQS1USEVSQVBFVVRJQyI6IldJVEhJTiBUQVJHRVQiOiJub3QgbWVhc3VyZWQiOwogICAgICAgICAgY29uc3QgYWJzb3JwdGlvbj1jMCYmYzI/KGMyL2MwKS50b0ZpeGVkKDEpOiJOL0EiOwogICAgICAgICAgcmV0dXJuIHt2YWw6YEMwOiAke2MwU3RhdHVzfSB8IEMyOiAke2MyU3RhdHVzfWAsdW5pdDoiIixzZWM6YEMwOiAke2MwfHwiLSJ9ICh0YXJnZXQgJHt0Z3QuYzBbMF19LSR7dGd0LmMwWzFdfSkgfCBDMjogJHtjMnx8Ii0ifSAodGFyZ2V0ICR7dGd0LmMyWzBdfS0ke3RndC5jMlsxXX0pIHwgQWJzb3JwdGlvbiBDMi9DMDogJHthYnNvcnB0aW9ufWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBoYXNTdWI9ci52YWwuaW5jbHVkZXMoIlNVQiIpOwogICAgICAgICAgY29uc3QgaGFzU3VwcmE9ci52YWwuaW5jbHVkZXMoIlNVUFJBIik7CiAgICAgICAgICBpZihoYXNTdXByYSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAke3IudmFsfS4gTmVwaHJvdG94aWNpdHkgcmlzazogY2hlY2sgY3JlYXRpbmluZSB0cmVuZCwgbWFnbmVzaXVtLCB1cmljIGFjaWQuIENvbnNpZGVyIGRvc2UgcmVkdWN0aW9uLiBNb25pdG9yIGZvciB0cmVtb3IsIGdpbmdpdmFsIGh5cGVycGxhc2lhLCBoaXJzdXRpc20uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihoYXNTdWIpIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgJHtyLnZhbH0uIFJlamVjdGlvbiByaXNrIGVsZXZhdGVkLiBJbmNyZWFzZSBkb3NlIG9yIGNoZWNrIGFkaGVyZW5jZSwgZHJ1ZyBpbnRlcmFjdGlvbnMgKENZUDNBNCBpbmR1Y2VycyksIEdJIGFic29ycHRpb24uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YCR7ci52YWx9LiBDb250aW51ZSBjdXJyZW50IGRvc2luZy4gTW9uaXRvciBsZXZlbHMgcGVyIHByb3RvY29sLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF90YWNfdGRtIiwgbmFtZToiVGFjcm9saW11cyBURE0iLCByZWY6IktESUdPIDIwMDk7IEVMSVRFLVN5bXBob255IChFa2JlcmcgZXQgYWwuLCBORUpNIDIwMDcpOyBBZ3VyIGV0IGFsLiwgQ2xpbiBUcmFuc3BsYW50IDIwMjMiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uIOKAlCBUYWNyb2xpbXVzIFRyb3VnaCArIElQViIsCiAgICAgICAgZm9ybXVsYToiQzAgKHRyb3VnaCkgdGFyZ2V0cyAod2l0aCBNTUYgKyBzdGVyb2lkcyk6XG4gIE1vbnRoIDAtMTogOC0xMiBuZy9tTCAoc3RhbmRhcmQpIG9yIDYtMTAgKGxvdy1kb3NlIEVMSVRFLVN5bXBob255KVxuICBNb250aCAxLTM6IDYtMTAgbmcvbUxcbiAgTW9udGggMy0xMjogNS04IG5nL21MXG4gID4xMiBtb250aHM6IDUtNyBuZy9tTFxuXG5OZXBocm90b3hpY2l0eSBmbGFnOiBDMCBwZXJzaXN0ZW50bHkgPjEyXG5JUFYgKEludHJhLVBhdGllbnQgVmFyaWFiaWxpdHkpOiBDViUgPSAoU0QvbWVhbinDlzEwMFxuICBDViUgPjMwJSA9IGhpZ2ggSVBWIOKGkiBpbmNyZWFzZWQgZ3JhZnQgbG9zcyByaXNrIiwKICAgICAgICBub3RlOiJLRElHTyBzdWdnZXN0cyAzLTE1IG5nL21MIGluIG1vbnRocyAxLTQgKGxvdyBxdWFsaXR5IGV2aWRlbmNlKS4gUmVjZW50IGV2aWRlbmNlIChBZ3VyIDIwMjMsIG11bHRpY2VudGVyIG49MTE4NjgpIHN1cHBvcnRzIG9wdGltYWwgcmFuZ2Ugb2YgNS4wLTcuOSBuZy9tTCBhdCAyLTEyIG1vbnRocyBhbmQgNS4wLTYuOSBuZy9tTCBhdCAxMi03MiBtb250aHMgZm9yIGJlc3QgY29tcG9zaXRlIG91dGNvbWVzLiBIaWdoIElQViAoQ1YlID4zMCUpIGlzIGluZGVwZW5kZW50bHkgYXNzb2NpYXRlZCB3aXRoIGRuRFNBIGFuZCBncmFmdCBsb3NzLiBTdGFydGluZyBkb3NlOiAwLjA1LTAuMDc1IG1nL2tnIEJEIChFTElURS1TeW1waG9ueSBsb3ctZG9zZSkuIFByb2xvbmdlZC1yZWxlYXNlIChBZHZhZ3JhZi9FbnZhcnN1cykgbWF5IHJlZHVjZSBJUFYuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ0YWNfYzAiLGxhYmVsOiJUYWNyb2xpbXVzIEMwIChUcm91Z2gpIix1bml0OiJuZy9tTCIsdHlwZToibnVtYmVyIixwaDoiNy4yIn0sCiAgICAgICAgICB7aWQ6InBlcmlvZCIsbGFiZWw6IlRpbWUgUG9zdC1UcmFuc3BsYW50Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyIwLTEgbW9udGhzIiwiMS0zIG1vbnRocyIsIjMtMTIgbW9udGhzIiwiPjEyIG1vbnRocyJdfSwKICAgICAgICAgIHtpZDoiaXB2X21lYW4iLGxhYmVsOiJNZWFuIG9mIGxhc3QgNSB0cm91Z2ggbGV2ZWxzIChmb3IgSVBWKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6IjYuOCJ9LAogICAgICAgICAge2lkOiJpcHZfc2QiLGxhYmVsOiJTRCBvZiBsYXN0IDUgdHJvdWdoIGxldmVscyIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6IjIuMSJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGMwPSt2LnRhY19jMCxwPXYucGVyaW9kOwogICAgICAgICAgY29uc3QgdGFyZ2V0cz17CiAgICAgICAgICAgICIwLTEgbW9udGhzIjpbOCwxMl0sCiAgICAgICAgICAgICIxLTMgbW9udGhzIjpbNiwxMF0sCiAgICAgICAgICAgICIzLTEyIG1vbnRocyI6WzUsOF0sCiAgICAgICAgICAgICI+MTIgbW9udGhzIjpbNSw3XSwKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCB0Z3Q9dGFyZ2V0c1twXXx8WzUsOF07CiAgICAgICAgICBjb25zdCBzdGF0dXM9YzA/YzA8dGd0WzBdPyJTVUItVEhFUkFQRVVUSUMiOmMwPnRndFsxXT8iU1VQUkEtVEhFUkFQRVVUSUMiOiJXSVRISU4gVEFSR0VUIjoibm90IG1lYXN1cmVkIjsKICAgICAgICAgIGNvbnN0IG5lcGhyb3RveD1jMD4xMj8iTkVQSFJPVE9YSUNJVFkgRkxBRyI6IiI7CiAgICAgICAgICBjb25zdCBtZWFuPSt2Lmlwdl9tZWFuLHNkPSt2Lmlwdl9zZDsKICAgICAgICAgIGNvbnN0IGlwdj1tZWFuJiZzZD8oc2QvbWVhbioxMDApLnRvRml4ZWQoMSk6bnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOnN0YXR1cyx1bml0OmBDMDogJHtjMHx8Ii0ifSBuZy9tTCAodGFyZ2V0ICR7dGd0WzBdfS0ke3RndFsxXX0pYCxzZWM6YCR7bmVwaHJvdG94P25lcGhyb3RveCsiIHwgIjoiIn1JUFYgQ1YlOiAke2lwdnx8Ik4vQSJ9JHtpcHYmJitpcHY+MzA/IiDigJQgSElHSCAoPjMwJSkiOiIifWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBjMD0rdi50YWNfYzA7CiAgICAgICAgICBjb25zdCBtZWFuPSt2Lmlwdl9tZWFuLHNkPSt2Lmlwdl9zZDsKICAgICAgICAgIGNvbnN0IGlwdj1tZWFuJiZzZD8oc2QvbWVhbioxMDApOm51bGw7CiAgICAgICAgICBsZXQgbXNnPSIiOwogICAgICAgICAgaWYoci52YWw9PT0iU1VQUkEtVEhFUkFQRVVUSUMiKSBtc2c9YFRhY3JvbGltdXMgJHtjMH0gbmcvbUwg4oCUIGFib3ZlIHRhcmdldC4gTmVwaHJvdG94aWNpdHkgcmlzayAodHJlbW9yLCBoeXBlcnRlbnNpb24sIGh5cGVyZ2x5Y2FlbWlhLCBoeXBlcmthbGFlbWlhLCBoeXBvbWFnbmVzYWVtaWEpLiBSZWR1Y2UgZG9zZS4gQ2hlY2sgY3JlYXRpbmluZSB0cmVuZC5gOwogICAgICAgICAgZWxzZSBpZihjMD4xMikgbXNnPWBUYWNyb2xpbXVzICR7YzB9IG5nL21MIOKAlCBORVBIUk9UT1hJQ0lUWSBGTEFHICg+MTIpLiBVcmdlbnQgZG9zZSByZWR1Y3Rpb24uIENoZWNrIE1nLCBLLCBnbHVjb3NlLmA7CiAgICAgICAgICBlbHNlIGlmKHIudmFsPT09IlNVQi1USEVSQVBFVVRJQyIpIG1zZz1gVGFjcm9saW11cyAke2MwfSBuZy9tTCDigJQgYmVsb3cgdGFyZ2V0LiBSZWplY3Rpb24gcmlzay4gVmVyaWZ5IGFkaGVyZW5jZSwgY2hlY2sgQ1lQM0E1IGdlbm90eXBlIGlmIGF2YWlsYWJsZSwgcmV2aWV3IGRydWcgaW50ZXJhY3Rpb25zIChyaWZhbXBpY2luLCBwaGVueXRvaW4sIFN0IEpvaG7igJlzIHdvcnQpLmA7CiAgICAgICAgICBlbHNlIG1zZz1gVGFjcm9saW11cyAke2MwfSBuZy9tTCDigJQgd2l0aGluIHRhcmdldC4gQ29udGludWUgY3VycmVudCBkb3NpbmcuYDsKICAgICAgICAgIGlmKGlwdiYmaXB2PjMwKSBtc2crPWAgSElHSCBJUFYgKENWJSAke2lwdi50b0ZpeGVkKDEpfSUpIOKAlCBpbmRlcGVuZGVudGx5IGFzc29jaWF0ZWQgd2l0aCBkbkRTQSBhbmQgZ3JhZnQgbG9zcy4gQ29uc2lkZXIgY29udmVyc2lvbiB0byBwcm9sb25nZWQtcmVsZWFzZSBmb3JtdWxhdGlvbiwgYWRoZXJlbmNlIGludGVydmVudGlvbiwgb3IgcGhhcm1hY2lzdCByZXZpZXcuYDsKICAgICAgICAgIHJldHVybiB7YzpyLnZhbD09PSJTVVBSQS1USEVSQVBFVVRJQyJ8fGMwPjEyPyIjZGMyNjI2IjpyLnZhbD09PSJTVUItVEhFUkFQRVVUSUMiPyIjZWE1ODBjIjoiIzE2YTM0YSIsdDpgJHttc2d9ICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InR4X3Npcm9fdGRtIiwgbmFtZToiU2lyb2xpbXVzIFRETSIsIHJlZjoiS0RJR08gMjAwOTsgU3RyYXR0YSwgTWVkc2NhcGUgMjAwMzsgU2NpZW5jZURpcmVjdCBURE0gUmV2aWV3IDIwMTYiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uIOKAlCBTaXJvbGltdXMgVHJvdWdoIChXaXRoLUNOSSB2cyBDTkktRnJlZSkiLAogICAgICAgIGZvcm11bGE6IlNpcm9saW11cyBDMCB0YXJnZXRzOlxuICBXaXRoIENOSSAocmVkdWNlZC1kb3NlIENOSSk6XG4gICAgVGFyZ2V0IHNpcm9saW11czogNC04IG5nL21MXG4gICAgVGFyZ2V0IENOSTogVEFDIDQtNiwgQ3NBIDEwMC0xNTAgbmcvbUxcbiAgICBDb21iaW5lZCBsZXZlbCA8MjAgbmcvbUwgcHJlZmVycmVkXG4gIENOSS1mcmVlIChTUkwgKyBNTUYgKyBzdGVyb2lkcyk6XG4gICAgMC0xMiBtb250aHM6IDEwLTE1IG5nL21MXG4gICAgPjEyIG1vbnRoczogOC0xMiBuZy9tTCAoc29tZSBjZW50cmVzIDYtMTApXG4gIFRveGljaXR5OiBDMCA+MTUgbmcvbUwg4oaSIGR5c2xpcGlkYWVtaWEsIHRocm9tYm9jeXRvcGVuaWEsIGxldWtvcGVuaWFcblxuS0RJR086IEF2b2lkIFNSTCArIGZ1bGwtZG9zZSBDTkkgKHBvdGVudGlhdGVzIG5lcGhyb3RveGljaXR5KVxuRG8gbm90IHN0YXJ0IFNSTCB1bnRpbCBncmFmdCBmdW5jdGlvbiBlc3RhYmxpc2hlZCBhbmQgd291bmRzIGhlYWxlZCIsCiAgICAgICAgbm90ZToiU2lyb2xpbXVzIHTCvSB+NjBoIChhZHVsdHMpLiBDMCBjb3JyZWxhdGVzIHdlbGwgd2l0aCBBVUMuIEdpdmUgNGggYWZ0ZXIgQ3NBIChwaGFybWFjb2tpbmV0aWMgaW50ZXJhY3Rpb24pLiBObyBzaWduaWZpY2FudCBpbnRlcmFjdGlvbiB3aXRoIHRhY3JvbGltdXMuIENvbnRyYWluZGljYXRpb25zIHRvIENOSeKGklNSTCBjb252ZXJzaW9uOiBwcm90ZWludXJpYSA+ODAwIG1nL2QsIGVHRlIgPDQwLCByZWNlbnQgcmVqZWN0aW9uICg8M21vKSwgdW5jb250cm9sbGVkIGR5c2xpcGlkYWVtaWEuIEtESUdPIHJlY29tbWVuZHMgbW9uaXRvcmluZyBsZXZlbHMgKDJDKS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InNybF9jMCIsbGFiZWw6IlNpcm9saW11cyBDMCAoVHJvdWdoKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6IjguNSJ9LAogICAgICAgICAge2lkOiJyZWdpbWVuIixsYWJlbDoiUmVnaW1lbiIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiV2l0aCByZWR1Y2VkLWRvc2UgQ05JIiwiQ05JLWZyZWUgKFNSTCArIE1NRiArIHN0ZXJvaWRzKSJdfSwKICAgICAgICAgIHtpZDoibW9udGhzIixsYWJlbDoiTW9udGhzIHBvc3QtdHJhbnNwbGFudCIsdW5pdDoibW9udGhzIix0eXBlOiJudW1iZXIiLHBoOiIxMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGMwPSt2LnNybF9jMCxjbmk9di5yZWdpbWVuPy5pbmNsdWRlcygiV2l0aCIpOwogICAgICAgICAgaWYoIWMwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IG1vPSt2Lm1vbnRoc3x8NjsKICAgICAgICAgIGxldCBsbyxoaTsKICAgICAgICAgIGlmKGNuaSl7bG89NDtoaT04O30KICAgICAgICAgIGVsc2V7bG89bW88PTEyPzEwOjg7aGk9bW88PTEyPzE1OjEyO30KICAgICAgICAgIGNvbnN0IHN0YXR1cz1jMDxsbz8iU1VCLVRIRVJBUEVVVElDIjpjMD5oaT8iU1VQUkEtVEhFUkFQRVVUSUMiOiJXSVRISU4gVEFSR0VUIjsKICAgICAgICAgIHJldHVybiB7dmFsOnN0YXR1cyx1bml0OmBDMDogJHtjMH0gbmcvbUwgKHRhcmdldCAke2xvfS0ke2hpfSBmb3IgJHtjbmk/IndpdGgtQ05JIjoiQ05JLWZyZWUifSlgLHNlYzpjMD4xNT8iVE9YSUNJVFkgUklTSyAoPjE1KSI6IiJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBjMD0rdi5zcmxfYzA7CiAgICAgICAgICBpZihjMD4xNSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBTaXJvbGltdXMgJHtjMH0gbmcvbUwg4oCUIGFib3ZlIDE1LiBUb3hpY2l0eSByaXNrOiBjaGVjayBsaXBpZCBwcm9maWxlLCBGQkMgKHRocm9tYm9jeXRvcGVuaWEsIGxldWtvcGVuaWEpLCBwcm90ZWludXJpYS4gRG9zZSByZWR1Y3Rpb24gcmVxdWlyZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihyLnZhbD09PSJTVVBSQS1USEVSQVBFVVRJQyIpIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgU2lyb2xpbXVzICR7YzB9IG5nL21MIOKAlCBhYm92ZSB0YXJnZXQuIENoZWNrIGxpcGlkcywgRkJDLiBDb25zaWRlciBkb3NlIHJlZHVjdGlvbi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHIudmFsPT09IlNVQi1USEVSQVBFVVRJQyIpIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgU2lyb2xpbXVzICR7YzB9IG5nL21MIOKAlCBiZWxvdyB0YXJnZXQuIFJlamVjdGlvbiByaXNrLiBJbmNyZWFzZSBkb3NlLiBDaGVjayBkcnVnIGludGVyYWN0aW9ucyBhbmQgYWRoZXJlbmNlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBTaXJvbGltdXMgJHtjMH0gbmcvbUwg4oCUIHdpdGhpbiB0YXJnZXQuIENvbnRpbnVlLiBNb25pdG9yIGxpcGlkcyBhbmQgRkJDIGF0IGVhY2ggdmlzaXQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InR4X2V2ZXJvX3RkbSIsIG5hbWU6IkV2ZXJvbGltdXMgVERNICsgQ05J4oaSbVRPUiBDb252ZXJzaW9uIiwgcmVmOiJUUkFOU0ZPUk0gU3R1ZHk7IEJ1ZGRlIGV0IGFsLiwgQW0gSiBUcmFuc3BsYW50IDIwMTE7IEtESUdPIDIwMDkiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uIOKAlCBFdmVyb2xpbXVzIFRyb3VnaCArIENvbnZlcnNpb24gRWxpZ2liaWxpdHkiLAogICAgICAgIGZvcm11bGE6IkV2ZXJvbGltdXMgQzAgdGFyZ2V0cyAod2l0aCByZWR1Y2VkLWRvc2UgQ05JKTpcbiAgVGFyZ2V0OiAzLTggbmcvbUxcbiAgV2l0aCBUQUM6IHRhcmdldCBUQUMgNC02IG5nL21MXG4gIFdpdGggQ3NBOiB0YXJnZXQgQ3NBIEMyIDM1MC00NTAgbmcvbUxcblxuQ29udmVyc2lvbiBlbGlnaWJpbGl0eSAoQ05JIOKGkiBtVE9SKTpcbiAgZUdGUiA+NDAgbUwvbWluIHwgUHJvdGVpbnVyaWEgPDgwMCBtZy9kXG4gIE5vIHJlamVjdGlvbiBpbiBwYXN0IDMgbW9udGhzXG4gIFdvdW5kcyBmdWxseSBoZWFsZWQgfCBEeXNsaXBpZGFlbWlhIGNvbnRyb2xsZWQiLAogICAgICAgIG5vdGU6IkV2ZXJvbGltdXMgdMK9IH4yOC0zNWggKHNob3J0ZXIgdGhhbiBzaXJvbGltdXMpLiBEb2VzIG5vdCBwb3RlbnRpYXRlIENOSSBuZXBocm90b3hpY2l0eSB0byB0aGUgc2FtZSBkZWdyZWUgYXMgc2lyb2xpbXVzIHdoZW4gY29tYmluZWQgYXQgYXBwcm9wcmlhdGUgbGV2ZWxzLiBUUkFOU0ZPUk0gc3R1ZHk6IEVWUiAzLTggbmcvbUwgKyByZWR1Y2VkIFRBQyAoNS04IG5nL21MIHN0YW5kYXJkKSBub24taW5mZXJpb3IgdG8gc3RhbmRhcmQgVEFDICsgTU1GLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiZXZyX2MwIixsYWJlbDoiRXZlcm9saW11cyBDMCAoVHJvdWdoKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6IjUuNSJ9LAogICAgICAgICAge2lkOiJlZ2ZyX2NvbnYiLGxhYmVsOiJlR0ZSIChmb3IgY29udmVyc2lvbiBlbGlnaWJpbGl0eSkiLHVuaXQ6Im1ML21pbi8xLjczbcKyIix0eXBlOiJudW1iZXIiLHBoOiI0OCJ9LAogICAgICAgICAge2lkOiJwcm90ZWludXJpYSIsbGFiZWw6IlByb3RlaW51cmlhIix1bml0OiJtZy9kYXkiLHR5cGU6Im51bWJlciIscGg6IjIwMCJ9LAogICAgICAgICAge2lkOiJyZWNlbnRfcmVqIixsYWJlbDoiUmVqZWN0aW9uIGluIHBhc3QgMyBtb250aHMiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6IndvdW5kc19oZWFsZWQiLGxhYmVsOiJTdXJnaWNhbCB3b3VuZHMgZnVsbHkgaGVhbGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGMwPSt2LmV2cl9jMDsKICAgICAgICAgIGlmKCFjMCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBzdGF0dXM9YzA8Mz8iU1VCLVRIRVJBUEVVVElDIjpjMD44PyJTVVBSQS1USEVSQVBFVVRJQyI6IldJVEhJTiBUQVJHRVQiOwogICAgICAgICAgY29uc3QgZWxpZ2libGU9K3YuZWdmcl9jb252Pj00MCYmK3YucHJvdGVpbnVyaWE8ODAwJiYhdi5yZWNlbnRfcmVqJiZ2LndvdW5kc19oZWFsZWQ7CiAgICAgICAgICByZXR1cm4ge3ZhbDpzdGF0dXMsdW5pdDpgQzA6ICR7YzB9IG5nL21MICh0YXJnZXQgMy04KWAsc2VjOmBDb252ZXJzaW9uIGVsaWdpYmlsaXR5OiAke2VsaWdpYmxlPyJFTElHSUJMRSI6Ik5PVCBFTElHSUJMRSJ9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGMwPSt2LmV2cl9jMDsKICAgICAgICAgIGNvbnN0IGVsaWdpYmxlPSt2LmVnZnJfY29udj49NDAmJit2LnByb3RlaW51cmlhPDgwMCYmIXYucmVjZW50X3JlaiYmdi53b3VuZHNfaGVhbGVkOwogICAgICAgICAgbGV0IG1zZz1jMD44P2BFdmVyb2xpbXVzICR7YzB9IOKAlCBhYm92ZSB0YXJnZXQuIENoZWNrIGxpcGlkcywgRkJDLCBwcm90ZWludXJpYS4gUmVkdWNlIGRvc2UuYDpjMDwzP2BFdmVyb2xpbXVzICR7YzB9IOKAlCBiZWxvdyB0YXJnZXQuIEluY3JlYXNlIGRvc2UuYDpgRXZlcm9saW11cyAke2MwfSDigJQgd2l0aGluIHRhcmdldC5gOwogICAgICAgICAgaWYoIWVsaWdpYmxlKXsKICAgICAgICAgICAgY29uc3QgcmVhc29ucz1bXTsKICAgICAgICAgICAgaWYoK3YuZWdmcl9jb252PDQwKSByZWFzb25zLnB1c2goImVHRlIgPDQwIik7CiAgICAgICAgICAgIGlmKCt2LnByb3RlaW51cmlhPj04MDApIHJlYXNvbnMucHVzaCgicHJvdGVpbnVyaWEg4omlODAwIik7CiAgICAgICAgICAgIGlmKHYucmVjZW50X3JlaikgcmVhc29ucy5wdXNoKCJyZWNlbnQgcmVqZWN0aW9uIik7CiAgICAgICAgICAgIGlmKCF2LndvdW5kc19oZWFsZWQpIHJlYXNvbnMucHVzaCgid291bmRzIG5vdCBoZWFsZWQiKTsKICAgICAgICAgICAgbXNnKz1gIENOSeKGkm1UT1IgY29udmVyc2lvbiBOT1QgZWxpZ2libGU6ICR7cmVhc29ucy5qb2luKCIsICIpfS5gOwogICAgICAgICAgfSBlbHNlIG1zZys9YCBDTknihpJtVE9SIGNvbnZlcnNpb24gZWxpZ2libGUuYDsKICAgICAgICAgIHJldHVybiB7YzpjMD44fHxjMDwzPyIjZWE1ODBjIjoiIzE2YTM0YSIsdDpgJHttc2d9ICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InR4X21tZl90ZG0iLCBuYW1lOiJNTUYvRUMtTVBTIOKAlCBNUEEgVERNIiwgcmVmOiJBUE9NWUdSRSBUcmlhbDsgS0RJR08gMjAwOTsgQmVyZ2FuIGV0IGFsLiwgVGhlciBEcnVnIE1vbml0IDIwMjEgKElBVERNQ1QgQ29uc2Vuc3VzKSIsIHRhZzoiSW1tdW5vc3VwcHJlc3Npb24g4oCUIE15Y29waGVub2xhdGUgRG9zaW5nICYgQVVDIiwKICAgICAgICBmb3JtdWxhOiJNUEEgQVVD4oKA4oKL4oKB4oKCIHRhcmdldDogMzAtNjAgbWfCt2gvTFxuICA8MzAgPSB1bmRlci1leHBvc2VkIChyZWplY3Rpb24gcmlzaylcbiAgPjYwID0gb3Zlci1leHBvc2VkIChpbmZlY3Rpb24sIGxldWtvcGVuaWEsIEdJIHRveGljaXR5KVxuXG5TdGFuZGFyZCBkb3Npbmc6XG4gIE1NRjogMWcgQkQgKDJnL2RheSkgd2l0aCBUQUM7IDEuNWcgQkQgd2l0aCBDc0FcbiAgRUMtTVBTOiA3MjBtZyBCRCAoZXF1aW1vbGFyIHRvIE1NRiAxZyBCRClcblxuQzAgcG9vcmx5IGNvcnJlbGF0ZXMgd2l0aCBBVUMuIEFVQy1ndWlkZWQgZG9zaW5nIChMU1MpIHJlY29tbWVuZGVkLlxuQ3NBIHJlZHVjZXMgTVBBIGV4cG9zdXJlIChpbmhpYml0cyBlbnRlcm9oZXBhdGljIGNpcmN1bGF0aW9uKS4iLAogICAgICAgIG5vdGU6IkFVQy1ndWlkZWQgZG9zaW5nIChBUE9NWUdSRSB0cmlhbCkgcmVkdWNlZCByZWplY3Rpb24gdnMgZml4ZWQgZG9zaW5nLiBIaWdoIGludGVyLWluZGl2aWR1YWwgdmFyaWFiaWxpdHkgKD4xMC1mb2xkKS4gQVVDIGJlc3QgZXN0aW1hdGVkIGJ5IGxpbWl0ZWQgc2FtcGxpbmcgc3RyYXRlZ3kgKEMwLCBDMSwgQzIpLiBFQy1NUFMgaGFzIGxlc3MgcHJlZGljdGFibGUgYWJzb3JwdGlvbiBmb3IgVERNLiBHSSBzaWRlIGVmZmVjdHMgKGRpYXJyaG9lYSwgbmF1c2VhKSBhcmUgY29tbW9uIGFuZCBkb3NlLWxpbWl0aW5nLiBMZXVrb3BlbmlhOiBob2xkIGlmIFdCQyA8My4wLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoibXBhX2F1YyIsbGFiZWw6Ik1QQSBBVUPigoDigovigoHigoIgKGlmIGF2YWlsYWJsZSkiLHVuaXQ6Im1nwrdoL0wiLHR5cGU6Im51bWJlciIscGg6IjQyIn0sCiAgICAgICAgICB7aWQ6Im1tZl9kb3NlIixsYWJlbDoiQ3VycmVudCBNTUYgRG9zZSIsdW5pdDoibWcvZGF5Iix0eXBlOiJudW1iZXIiLHBoOiIyMDAwIn0sCiAgICAgICAgICB7aWQ6ImZvcm11bGF0aW9uIixsYWJlbDoiRm9ybXVsYXRpb24iLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk1NRiAoTXljb3BoZW5vbGF0ZSBNb2ZldGlsIC8gQ2VsbENlcHQpIiwiRUMtTVBTIChFbnRlcmljLUNvYXRlZCAvIE15Zm9ydGljKSJdfSwKICAgICAgICAgIHtpZDoiY25pX3R5cGUiLGxhYmVsOiJDb25jdXJyZW50IENOSSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiVGFjcm9saW11cyIsIkN5Y2xvc3BvcmluZSIsIk5vbmUgKENOSS1mcmVlKSJdfSwKICAgICAgICAgIHtpZDoid2JjIixsYWJlbDoiV0JDIChpZiBhdmFpbGFibGUpIix1bml0OiLDlzEw4oG5L0wiLHR5cGU6Im51bWJlciIscGg6IjYuNSJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGF1Yz0rdi5tcGFfYXVjLGRvc2U9K3YubW1mX2Rvc2Usd2JjPSt2LndiYzsKICAgICAgICAgIGxldCBhdWNTdGF0dXM9YXVjP2F1YzwzMD8iVU5ERVItRVhQT1NFRCI6YXVjPjYwPyJPVkVSLUVYUE9TRUQiOiJXSVRISU4gVEFSR0VUIjoibm90IG1lYXN1cmVkIjsKICAgICAgICAgIGNvbnN0IGxldWtvPXdiYyYmd2JjPDMuMD8iTEVVS09QRU5JQSBXQVJOSU5HIjoiIjsKICAgICAgICAgIHJldHVybiB7dmFsOmF1Y1N0YXR1cyx1bml0OmF1Yz9gQVVDOiAke2F1Y30gbWfCt2gvTCAodGFyZ2V0IDMwLTYwKWA6YERvc2U6ICR7ZG9zZXx8Ii0ifSBtZy9kYXlgLHNlYzpgJHtsZXVrb30ke2xldWtvPyIgfCAiOiIifUZvcm11bGF0aW9uOiAke3YuZm9ybXVsYXRpb259IHwgQ05JOiAke3YuY25pX3R5cGV9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGF1Yz0rdi5tcGFfYXVjLHdiYz0rdi53YmM7CiAgICAgICAgICBsZXQgbXNnPSIiOwogICAgICAgICAgaWYod2JjJiZ3YmM8My4wKSBtc2c9YFdCQyAke3diY30g4oCUIExFVUtPUEVOSUEuIEhvbGQgb3IgcmVkdWNlIE1NRi4gQ2hlY2sgdmlyYWwgc2NyZWVuIChDTVYsIEJLKS4gYDsKICAgICAgICAgIGlmKGF1YyYmYXVjPDMwKSBtc2crPWBNUEEgQVVDICR7YXVjfSDigJQgdW5kZXItZXhwb3NlZC4gUmVqZWN0aW9uIHJpc2suIENvbnNpZGVyIGRvc2UgaW5jcmVhc2UgaWYgdG9sZXJhdGVkLiBgOwogICAgICAgICAgZWxzZSBpZihhdWMmJmF1Yz42MCkgbXNnKz1gTVBBIEFVQyAke2F1Y30g4oCUIG92ZXItZXhwb3NlZC4gSW5mZWN0aW9uIGFuZCBHSSB0b3hpY2l0eSByaXNrLiBDb25zaWRlciBkb3NlIHJlZHVjdGlvbi4gYDsKICAgICAgICAgIGVsc2UgaWYoYXVjKSBtc2crPWBNUEEgQVVDICR7YXVjfSDigJQgd2l0aGluIHRhcmdldCAoMzAtNjApLiBDb250aW51ZSBjdXJyZW50IGRvc2UuIGA7CiAgICAgICAgICBlbHNlIG1zZys9YEFVQyBub3QgYXZhaWxhYmxlLiBDb25zaWRlciBsaW1pdGVkIHNhbXBsaW5nIHN0cmF0ZWd5IChDMCtDMStDMikgZm9yIGRvc2Ugb3B0aW1pc2F0aW9uLiBGaXhlZCBkb3NpbmcgbGVhZHMgdG8gPjEwLWZvbGQgdmFyaWFiaWxpdHkgaW4gZXhwb3N1cmUuIGA7CiAgICAgICAgICBpZih2LmNuaV90eXBlPT09IkN5Y2xvc3BvcmluZSIpIG1zZys9YE5vdGU6IENzQSByZWR1Y2VzIE1QQSBleHBvc3VyZSBieSBpbmhpYml0aW5nIGVudGVyb2hlcGF0aWMgY2lyY3VsYXRpb24g4oCUIGhpZ2hlciBNTUYgZG9zZXMgb2Z0ZW4gcmVxdWlyZWQgd2l0aCBDc0EgdnMgVEFDLiBgOwogICAgICAgICAgcmV0dXJuIHtjOndiYyYmd2JjPDMuMD8iI2RjMjYyNiI6ci52YWw9PT0iVU5ERVItRVhQT1NFRCI/IiNlYTU4MGMiOnIudmFsPT09Ik9WRVItRVhQT1NFRCI/IiNjYThhMDQiOiIjMTZhMzRhIix0OmAke21zZ30ke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9hemFfdGRtIiwgbmFtZToiQXphdGhpb3ByaW5lICsgVFBNVC9OVURUMTUgUGhhcm1hY29nZW5vbWljcyIsIHJlZjoiQ1BJQyBHdWlkZWxpbmUgMjAyNSAoUmVsbGluZyBldCBhbC4pOyBLRElHTyAyMDA5IiwgdGFnOiJJbW11bm9zdXBwcmVzc2lvbiDigJQgQXphdGhpb3ByaW5lIERvc2luZyBieSBHZW5vdHlwZSIsCiAgICAgICAgZm9ybXVsYToiQ1BJQyAyMDI1IERvc2UgUmVjb21tZW5kYXRpb25zOlxuICBUUE1UIE5vcm1hbCArIE5VRFQxNSBOb3JtYWw6IFN0YW5kYXJkIGRvc2UgKDEuNS0yLjUgbWcva2cvZGF5KVxuICBUUE1UIElNIG9yIE5VRFQxNSBJTTogU3RhcnQgYXQgMjAtNTAlIG9mIG5vcm1hbCBkb3NlXG4gIFRQTVQgUE0gb3IgTlVEVDE1IFBNOiBBdm9pZCB0aGlvcHVyaW5lcyBvciB1c2UgMTAlIGRvc2Ugd2l0aCBjbG9zZSBGQkMgbW9uaXRvcmluZ1xuICBDb21wb3VuZCBJTSAoVFBNVCBJTSArIE5VRFQxNSBJTSk6IDIwLTUwJSBkb3NlICgyMDI1IHVwZGF0ZTogZ3JlYXRlciByZWR1Y3Rpb24gcmVjb21tZW5kZWQpXG5cblRoZXJhcGV1dGljIG1ldGFib2xpdGUgbW9uaXRvcmluZzpcbiAgNi1UR04gdGFyZ2V0OiAyMzUtNDUwIHBtb2wvOMOXMTDigbggUkJDXG4gIDYtTU1QID41NzAwID0gaGVwYXRvdG94aWNpdHkgcmlzayIsCiAgICAgICAgbm90ZToiVFBNVCBkZWZpY2llbmN5IGFmZmVjdHMgfjEwJSBvZiBDYXVjYXNpYW5zIChoZXRlcm96eWdvdXMpLiBOVURUMTUgdmFyaWFudHMgYXJlIG1vc3QgY29tbW9uIGluIEVhc3QgQXNpYW4gYW5kIEhpc3BhbmljIHBvcHVsYXRpb25zLiBQcmUtdHJlYXRtZW50IGdlbm90eXBpbmcgaXMgcmVjb21tZW5kZWQgYnkgQ1BJQywgRFBXRywgYW5kIEZEQSBsYWJlbGxpbmcuIENvbXBsZXRlIFRQTVQgb3IgTlVEVDE1IGRlZmljaWVuY3kgKHBvb3IgbWV0YWJvbGlzZXIpIGNhbiBjYXVzZSBsaWZlLXRocmVhdGVuaW5nIG15ZWxvc3VwcHJlc3Npb24gYXQgc3RhbmRhcmQgZG9zZXMuIEF6YXRoaW9wcmluZSBpcyBhIHByb2RydWcgZm9yIG1lcmNhcHRvcHVyaW5lLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoidHBtdCIsbGFiZWw6IlRQTVQgUGhlbm90eXBlIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJOb3JtYWwgTWV0YWJvbGlzZXIgKCoxLyoxKSIsIkludGVybWVkaWF0ZSBNZXRhYm9saXNlciAoKjEvKjNBLCAqMS8qM0MpIiwiUG9vciBNZXRhYm9saXNlciAoKjNBLyozQSwgKjIvKjNBKSIsIk5vdCB0ZXN0ZWQiXX0sCiAgICAgICAgICB7aWQ6Im51ZHQxNSIsbGFiZWw6Ik5VRFQxNSBQaGVub3R5cGUiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vcm1hbCBNZXRhYm9saXNlciAoKjEvKjEpIiwiSW50ZXJtZWRpYXRlIE1ldGFib2xpc2VyICgqMS8qMykiLCJQb29yIE1ldGFib2xpc2VyICgqMy8qMykiLCJOb3QgdGVzdGVkIl19LAogICAgICAgICAge2lkOiJ3dF9hemEiLGxhYmVsOiJXZWlnaHQiLHVuaXQ6ImtnIix0eXBlOiJudW1iZXIiLHBoOiI3MCJ9LAogICAgICAgICAge2lkOiJ0Z24iLGxhYmVsOiI2LVRHTiBsZXZlbCAoaWYgYXZhaWxhYmxlKSIsdW5pdDoicG1vbC84w5cxMOKBuCBSQkMiLHR5cGU6Im51bWJlciIscGg6IjMyMCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHRwbXQ9di50cG10fHwiTm90IHRlc3RlZCIsbnVkdD12Lm51ZHQxNXx8Ik5vdCB0ZXN0ZWQiLHd0PSt2Lnd0X2F6YTsKICAgICAgICAgIGNvbnN0IHRwbXRQTT10cG10LmluY2x1ZGVzKCJQb29yIiksdHBtdElNPXRwbXQuaW5jbHVkZXMoIkludGVybWVkaWF0ZSIpOwogICAgICAgICAgY29uc3QgbnVkdFBNPW51ZHQuaW5jbHVkZXMoIlBvb3IiKSxudWR0SU09bnVkdC5pbmNsdWRlcygiSW50ZXJtZWRpYXRlIik7CiAgICAgICAgICBsZXQgZG9zZUZyYWM9MS4wLGNhdGVnb3J5PSJTdGFuZGFyZCI7CiAgICAgICAgICBpZih0cG10UE18fG51ZHRQTSl7ZG9zZUZyYWM9MC4xO2NhdGVnb3J5PSJBVk9JRCBvciAxMCUgZG9zZSI7fQogICAgICAgICAgZWxzZSBpZih0cG10SU0mJm51ZHRJTSl7ZG9zZUZyYWM9MC4zO2NhdGVnb3J5PSJDb21wb3VuZCBJTSDigJQgMjAtNTAlIGRvc2UiO30KICAgICAgICAgIGVsc2UgaWYodHBtdElNfHxudWR0SU0pe2Rvc2VGcmFjPTAuNTtjYXRlZ29yeT0iSU0g4oCUIDUwJSBkb3NlIHN0YXJ0Ijt9CiAgICAgICAgICBjb25zdCBzdGREb3NlPXd0P01hdGgucm91bmQod3QqMik6Ii0iOwogICAgICAgICAgY29uc3QgYWRqRG9zZT13dD9NYXRoLnJvdW5kKHd0KjIqZG9zZUZyYWMpOiItIjsKICAgICAgICAgIHJldHVybiB7dmFsOmNhdGVnb3J5LHVuaXQ6YFN0YW5kYXJkOiAke3N0ZERvc2V9IG1nL2RheSB8IEFkanVzdGVkOiAke2FkakRvc2V9IG1nL2RheWAsc2VjOmBUUE1UOiAke3RwbXR9IHwgTlVEVDE1OiAke251ZHR9JHt2LnRnbj9gIHwgNi1UR046ICR7di50Z259YDoiIn1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgdGduPSt2LnRnbjsKICAgICAgICAgIGNvbnN0IHRwbXRQTT12LnRwbXQ/LmluY2x1ZGVzKCJQb29yIiksbnVkdFBNPXYubnVkdDE1Py5pbmNsdWRlcygiUG9vciIpOwogICAgICAgICAgbGV0IG1zZz1gJHtyLnZhbH0uIGA7CiAgICAgICAgICBpZih0cG10UE18fG51ZHRQTSkgbXNnKz1gQVZPSUQgdGhpb3B1cmluZXMgaWYgcG9zc2libGUuIElmIGVzc2VudGlhbDogdXNlIOKJpDEwJSBkb3NlIHdpdGggd2Vla2x5IEZCQyBmb3IgZmlyc3QgOCB3ZWVrcywgdGhlbiBtb250aGx5LiBMaWZlLXRocmVhdGVuaW5nIG15ZWxvc3VwcHJlc3Npb24gY2FuIG9jY3VyIGF0IHN0YW5kYXJkIGRvc2VzLiBDb25zaWRlciBhbHRlcm5hdGl2ZSBpbW11bm9zdXBwcmVzc2FudCAoTU1GKS4gYDsKICAgICAgICAgIGVsc2UgaWYoci52YWwuaW5jbHVkZXMoIkNvbXBvdW5kIikpIG1zZys9YFN0YXJ0IGF0IDIwLTUwJSBvZiBzdGFuZGFyZCBkb3NlIChDUElDIDIwMjUpLiBXZWVrbHkgRkJDIGZvciA4IHdlZWtzLCB0aGVuIGZvcnRuaWdodGx5IGZvciA4IHdlZWtzLCB0aGVuIG1vbnRobHkuIGA7CiAgICAgICAgICBlbHNlIGlmKHIudmFsLmluY2x1ZGVzKCJJTSIpKSBtc2crPWBTdGFydCBhdCA1MCUgZG9zZS4gRkJDIHdlZWtseSBmb3IgNCB3ZWVrcywgdGhlbiBmb3J0bmlnaHRseSBmb3IgOCB3ZWVrcywgdGhlbiBtb250aGx5LiBUaXRyYXRlIGJhc2VkIG9uIEZCQyBhbmQgNi1UR04gaWYgYXZhaWxhYmxlLiBgOwogICAgICAgICAgZWxzZSBtc2crPWBTdGFuZGFyZCBkb3NlIGFwcHJvcHJpYXRlLiBGQkMgYXQgMiwgNCwgOCB3ZWVrcyB0aGVuIG1vbnRobHkuIGA7CiAgICAgICAgICBpZih0Z24pewogICAgICAgICAgICBpZih0Z248MjM1KSBtc2crPWA2LVRHTiAke3Rnbn0g4oCUIHN1Yi10aGVyYXBldXRpYy4gQ29uc2lkZXIgZG9zZSBpbmNyZWFzZSBpZiBGQkMgYWxsb3dzLiBgOwogICAgICAgICAgICBlbHNlIGlmKHRnbj40NTApIG1zZys9YDYtVEdOICR7dGdufSDigJQgZWxldmF0ZWQuIE15ZWxvdG94aWNpdHkgcmlzay4gQ29uc2lkZXIgZG9zZSByZWR1Y3Rpb24uIGA7CiAgICAgICAgICAgIGVsc2UgbXNnKz1gNi1UR04gJHt0Z259IOKAlCB3aXRoaW4gdGFyZ2V0ICgyMzUtNDUwKS4gYDsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHYudHBtdD09PSJOb3QgdGVzdGVkInx8di5udWR0MTU9PT0iTm90IHRlc3RlZCIpIG1zZys9YFByZS10cmVhdG1lbnQgVFBNVC9OVURUMTUgZ2Vub3R5cGluZyBpcyByZWNvbW1lbmRlZCBieSBDUElDLCBEUFdHLCBhbmQgRkRBIGxhYmVsbGluZy4gYDsKICAgICAgICAgIHJldHVybiB7Yzp0cG10UE18fG51ZHRQTT8iI2RjMjYyNiI6ci52YWwuaW5jbHVkZXMoIklNIik/IiNjYThhMDQiOiIjMTZhMzRhIix0OmAke21zZ30ke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKCiAgICBdCiAgfSwKCiAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgLy8gSS4gUkVOQUwgRlVOQ1RJT04gJiBIRU1PRFlOQU1JQ1MgKCMx4oCTMTApLAogIC8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHsKICAgIGlkOiJzMTgiLCBsYWJlbDoiRGlhbHlzaXMgJiBWYXNjdWxhciBBY2Nlc3MiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6ImNycnRfZG9zZSIsIG5hbWU6IkNSUlQgRG9zZSAmIFByZXNjcmlwdGlvbiIsIHJlZjoiS0RJR08gQUtJIDIwMTIgwqc1Ljc7IEJlbGxvbW8gZXQgYWwuIChSRU5BTCksIE5FSk0gMjAwOTsgVkEvTklIIEFUTiBOZXR3b3JrLCBORUpNIDIwMDgiLCB0YWc6IkNSUlQg4oCUIEVmZmx1ZW50IERvc2UgUHJlc2NyaXB0aW9uIiwKICAgICAgICBmb3JtdWxhOiJFZmZsdWVudCBkb3NlID0gKERpYWx5c2F0ZSBmbG93ICsgUmVwbGFjZW1lbnQgZmxvdyArIFVGKSAvIFdlaWdodFxuS0RJR08gcmVjb21tZW5kczogMjAtMjUgbUwva2cvaCBkZWxpdmVyZWQgZWZmbHVlbnQgZG9zZVxuICBQcmVzY3JpYmUgMjUtMzAgbUwva2cvaCB0byBERUxJVkVSIDIwLTI1IChhY2NvdW50aW5nIGZvciBkb3dudGltZSlcblxuTW9kYWxpdGllczpcbiAgQ1ZWSDogUmVwbGFjZW1lbnQgZmx1aWQgKHByZS9wb3N0LWRpbHV0aW9uKVxuICBDVlZIRDogRGlhbHlzYXRlLWJhc2VkIChkaWZmdXNpb24pXG4gIENWVkhERjogQ29tYmluYXRpb24gKG1vc3QgY29tbW9uKSIsCiAgICAgICAgbm90ZToiQVROIHRyaWFsIChORUpNIDIwMDgpIGFuZCBSRU5BTCB0cmlhbCAoTkVKTSAyMDA5KSBzaG93ZWQgbm8gYmVuZWZpdCB0byBoaWdoZXIgaW50ZW5zaXR5ICgzNS00MCBtTC9rZy9oKSB2cyBzdGFuZGFyZCAoMjAtMjUgbUwva2cvaCkuIFByZXNjcmliZSAyNS0zMCB0byBkZWxpdmVyIDIwLTI1IGFmdGVyIGRvd250aW1lLiBQcmUtZGlsdXRpb24gcmVkdWNlcyBmaWx0ZXIgY2xvdHRpbmcgYnV0IGRpbHV0ZXMgZWZmaWNpZW5jeSAofjE1JSkuIENpdHJhdGUgYW50aWNvYWd1bGF0aW9uIHByZWZlcnJlZCBvdmVyIGhlcGFyaW4gaW4gbW9zdCBwYXRpZW50cy4gRHJ1ZyBkb3Npbmc6IG1hbnkgZHJ1Z3MgcmVtb3ZlZCBieSBDUlJUIOKAlCBwaGFybWFjaXN0IHJldmlldyBlc3NlbnRpYWwuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ3dCIsbGFiZWw6IlBhdGllbnQgV2VpZ2h0Iix1bml0OiJrZyIsdHlwZToibnVtYmVyIixwaDoiODAifSwKICAgICAgICAgIHtpZDoiZGlhbHlzYXRlIixsYWJlbDoiRGlhbHlzYXRlIEZsb3cgUmF0ZSIsdW5pdDoibUwvaCIsdHlwZToibnVtYmVyIixwaDoiMTAwMCJ9LAogICAgICAgICAge2lkOiJyZXBsYWNlbWVudCIsbGFiZWw6IlJlcGxhY2VtZW50IEZsdWlkIFJhdGUiLHVuaXQ6Im1ML2giLHR5cGU6Im51bWJlciIscGg6IjEwMDAifSwKICAgICAgICAgIHtpZDoidWYiLGxhYmVsOiJOZXQgVWx0cmFmaWx0cmF0aW9uIFJhdGUiLHVuaXQ6Im1ML2giLHR5cGU6Im51bWJlciIscGg6IjEwMCJ9LAogICAgICAgICAge2lkOiJtb2RhbGl0eSIsbGFiZWw6Ik1vZGFsaXR5Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJDVlZIIChoYWVtb2ZpbHRyYXRpb24pIiwiQ1ZWSEQgKGhhZW1vZGlhbHlzaXMpIiwiQ1ZWSERGIChoYWVtb2RpYWZpbHRyYXRpb24pIl19LAogICAgICAgICAge2lkOiJkaWx1dGlvbiIsbGFiZWw6IlByZS9Qb3N0LURpbHV0aW9uIChmb3IgQ1ZWSC9DVlZIREYpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJQb3N0LWRpbHV0aW9uIiwiUHJlLWRpbHV0aW9uIChyZWR1Y2UgZWZmaWNpZW5jeSB+MTUlKSIsIk1peGVkICgzMyUgcHJlIC8gNjclIHBvc3QpIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHd0PSt2Lnd0LGQ9K3YuZGlhbHlzYXRlLHI9K3YucmVwbGFjZW1lbnQsdT0rdi51ZjsKICAgICAgICAgIGlmKCF3dHx8d3Q8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgdG90YWw9ZCtyK3U7CiAgICAgICAgICBjb25zdCBkb3NlPXRvdGFsL3d0OwogICAgICAgICAgY29uc3QgcHJlRGlsQ29ycmVjdGlvbj12LmRpbHV0aW9uPy5pbmNsdWRlcygiUHJlIik/MC44NTp2LmRpbHV0aW9uPy5pbmNsdWRlcygiTWl4ZWQiKT8wLjk1OjEuMDsKICAgICAgICAgIGNvbnN0IGVmZmVjdGl2ZURvc2U9ZG9zZSpwcmVEaWxDb3JyZWN0aW9uOwogICAgICAgICAgcmV0dXJuIHt2YWw6ZWZmZWN0aXZlRG9zZS50b0ZpeGVkKDEpLHVuaXQ6Im1ML2tnL2ggKGVmZmVjdGl2ZSkiLHNlYzpgUHJlc2NyaWJlZDogJHtkb3NlLnRvRml4ZWQoMSl9IG1ML2tnL2ggfCBUb3RhbCBlZmZsdWVudDogJHt0b3RhbH0gbUwvaCB8IFByZS1kaWx1dGlvbiBmYWN0b3I6ICR7cHJlRGlsQ29ycmVjdGlvbn1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgZG9zZT0rci52YWw7CiAgICAgICAgICBpZihkb3NlPDIwKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEVmZmVjdGl2ZSBkb3NlICR7ci52YWx9IG1ML2tnL2gg4oCUIEJFTE9XIEtESUdPIHRhcmdldCAoMjAtMjUpLiBJbmNyZWFzZSBmbG93IHJhdGVzLiBJbmFkZXF1YXRlIHNvbHV0ZSBjbGVhcmFuY2UgbGlrZWx5LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoZG9zZTw9MjUpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRWZmZWN0aXZlIGRvc2UgJHtyLnZhbH0gbUwva2cvaCDigJQgd2l0aGluIEtESUdPIHRhcmdldCAoMjAtMjUpLiBUaGlzIGlzIHRoZSBldmlkZW5jZS1iYXNlZCBzdGFuZGFyZCBkb3NlLiBIaWdoZXIgZG9zZXMgaGF2ZSBub3Qgc2hvd24gYmVuZWZpdCAoQVROL1JFTkFMIHRyaWFscykuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihkb3NlPD0zMCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBFZmZlY3RpdmUgZG9zZSAke3IudmFsfSBtTC9rZy9oIOKAlCBhcHByb3ByaWF0ZSBwcmVzY3JpYmluZyBtYXJnaW4gdG8gZGVsaXZlciAyMC0yNSBhZnRlciBkb3dudGltZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgRWZmZWN0aXZlIGRvc2UgJHtyLnZhbH0gbUwva2cvaCDigJQgYWJvdmUgMzAuIE5vIG1vcnRhbGl0eSBiZW5lZml0IGZyb20gaGlnaGVyLWludGVuc2l0eSBDUlJULiBDb25zaWRlciByZWR1Y2luZyB0byBhdm9pZCBlbGVjdHJvbHl0ZSBsb3NzZXMgKHBob3NwaGF0ZSwgYW1pbm8gYWNpZHMpIGFuZCBkcnVnIGNsZWFyYW5jZSBpc3N1ZXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InBpcnJ0IiwgbmFtZToiUElSUlQgLyBTTEVEIFByZXNjcmlwdGlvbiIsIHJlZjoiTWFyc2hhbGwgZXQgYWwuLCBBSktEIDIwMTE7IEVkcmVlcyBldCBhbC4sIENsaW4gSiBBbSBTb2MgTmVwaHJvbCAyMDE2IiwgdGFnOiJQcm9sb25nZWQgSW50ZXJtaXR0ZW50IFJSVCAoU0xFRCkiLAogICAgICAgIGZvcm11bGE6IlBJUlJUIChTTEVEKTogNi0xMiBob3VycywgYmxvb2QgZmxvdyAxNTAtMjUwIG1ML21pbiwgZGlhbHlzYXRlIDEwMC0zMDAgbUwvbWluXG5LdC9WIHRhcmdldDog4omlMS4yIHBlciBzZXNzaW9uIChvciDiiaUzLjkvd2VlayBmb3IgYWx0ZXJuYXRlLWRheSlcblxuQWR2YW50YWdlcyBvdmVyIENSUlQ6XG4gIC0gTGVzcyBhbnRpY29hZ3VsYXRpb24gcmVxdWlyZW1lbnRcbiAgLSBBbGxvd3MgaW50ZXJydXB0aW9uLWZyZWUgZGlhZ25vc3RpY3MvcHJvY2VkdXJlc1xuICAtIENvbXBhcmFibGUgb3V0Y29tZXMgdG8gQ1JSVCBpbiBJQ1UtQUtJIiwKICAgICAgICBub3RlOiJHVUlERUxJTkUtQkFTRUQgVE9PTCDigJQgVGhpcyBjYWxjdWxhdG9yIGFwcGxpZXMgcHVibGlzaGVkIGNsaW5pY2FsIHRocmVzaG9sZHMgYnV0IGlzIG5vdCBpdHNlbGYgYSB2YWxpZGF0ZWQgY29tcG9zaXRlIHNjb3JpbmcgaW5zdHJ1bWVudC4gSW50ZXJwcmV0IHdpdGhpbiBjbGluaWNhbCBjb250ZXh0LlxuXG5QSVJSVC9TTEVEIGJyaWRnZXMgQ1JSVCBhbmQgY29udmVudGlvbmFsIElIRC4gSGFlbW9keW5hbWljYWxseSBiZXR0ZXIgdG9sZXJhdGVkIHRoYW4gSUhEIGR1ZSB0byBzbG93ZXIgc29sdXRlIGFuZCBmbHVpZCByZW1vdmFsLiBFcXVpdmFsZW50IG91dGNvbWVzIHRvIENSUlQgaW4gaGFlbW9keW5hbWljYWxseSB1bnN0YWJsZSBwYXRpZW50cyAobXVsdGlwbGUgUkNUcykuIFR5cGljYWwgcHJlc2NyaXB0aW9uOiBRYiAxNTAtMjUwLCBRZCAxMDAtMzAwLCBzZXNzaW9uIDYtMTJoLCBkYWlseSBvciBhbHRlcm5hdGUtZGF5LiBEcnVnIGRvc2luZyBzaW1pbGFyIHRvIENSUlQgZHVyaW5nIHRyZWF0bWVudCwgSUhEIGJldHdlZW4gc2Vzc2lvbnMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJxYiIsbGFiZWw6IkJsb29kIEZsb3cgUmF0ZSAoUWIpIix1bml0OiJtTC9taW4iLHR5cGU6Im51bWJlciIscGg6IjIwMCJ9LAogICAgICAgICAge2lkOiJxZCIsbGFiZWw6IkRpYWx5c2F0ZSBGbG93IFJhdGUgKFFkKSIsdW5pdDoibUwvbWluIix0eXBlOiJudW1iZXIiLHBoOiIyMDAifSwKICAgICAgICAgIHtpZDoiZHVyYXRpb24iLGxhYmVsOiJTZXNzaW9uIER1cmF0aW9uIix1bml0OiJob3VycyIsdHlwZToibnVtYmVyIixwaDoiOCJ9LAogICAgICAgICAge2lkOiJmcmVxdWVuY3kiLGxhYmVsOiJGcmVxdWVuY3kiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIkRhaWx5IiwiQWx0ZXJuYXRlIGRheSIsIlRocmVlIHRpbWVzL3dlZWsiXX0sCiAgICAgICAgICB7aWQ6InVmX3RhcmdldCIsbGFiZWw6IlVGIFRhcmdldCBwZXIgc2Vzc2lvbiIsdW5pdDoibUwiLHR5cGU6Im51bWJlciIscGg6IjIwMDAifSwKICAgICAgICAgIHtpZDoid3RfcGlycnQiLGxhYmVsOiJQYXRpZW50IFdlaWdodCIsdW5pdDoia2ciLHR5cGU6Im51bWJlciIscGg6Ijc1In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgcWI9K3YucWIscWQ9K3YucWQsZHVyPSt2LmR1cmF0aW9uLHVmPSt2LnVmX3RhcmdldCx3dD0rdi53dF9waXJydDsKICAgICAgICAgIGlmKCFxYnx8IXFkfHwhZHVyKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IHVmUmF0ZT11ZiYmZHVyPyh1Zi8oZHVyKjYwKSkudG9GaXhlZCgxKToiTi9BIjsKICAgICAgICAgIHJldHVybiB7dmFsOmBRYiAke3FifSAvIFFkICR7cWR9IC8gJHtkdXJ9aGAsdW5pdDp2LmZyZXF1ZW5jeSxzZWM6YFVGIHJhdGU6ICR7dWZSYXRlfSBtTC9taW4gfCBVRiB0YXJnZXQ6ICR7dWZ8fCItIn0gbUwgfCBXZWlnaHQ6ICR7d3R8fCItIn0ga2dgfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgcWI9K3YucWIscWQ9K3YucWQsZHVyPSt2LmR1cmF0aW9uLHVmPSt2LnVmX3RhcmdldCx3dD0rdi53dF9waXJydDsKICAgICAgICAgIGNvbnN0IHVmUmF0ZT11ZiYmZHVyPyh1Zi8oZHVyKjYwKSk6MDsKICAgICAgICAgIGxldCBtc2c9YFBJUlJUL1NMRUQgcHJlc2NyaXB0aW9uOiBRYiAke3FifSwgUWQgJHtxZH0sICR7ZHVyfWggc2Vzc2lvbnMsICR7di5mcmVxdWVuY3l9LiBgOwogICAgICAgICAgaWYodWZSYXRlPjEzKSBtc2crPWBVRiByYXRlICR7dWZSYXRlLnRvRml4ZWQoMSl9IG1ML21pbi9rZyDigJQgSElHSC4gQ29uc2lkZXIgZXh0ZW5kaW5nIHNlc3Npb24gb3IgcmVkdWNpbmcgdGFyZ2V0IHRvIGltcHJvdmUgaGFlbW9keW5hbWljIHRvbGVyYW5jZS4gYDsKICAgICAgICAgIGlmKHFiPDE1MCkgbXNnKz1gUWIgPDE1MCBtTC9taW4g4oCUIG1heSBsaW1pdCBjbGVhcmFuY2UuIGA7CiAgICAgICAgICBpZihkdXI8NikgbXNnKz1gRHVyYXRpb24gPDZoIGFwcHJvYWNoZXMgY29udmVudGlvbmFsIElIRCB0ZXJyaXRvcnkg4oCUIGNvbnNpZGVyIGV4dGVuZGluZyBmb3IgYmV0dGVyIGhhZW1vZHluYW1pYyBzdGFiaWxpdHkuIGA7CiAgICAgICAgICBtc2crPWBQaGFybWFjaXN0IHJldmlldyBmb3IgZHJ1ZyBkb3NpbmcgYWRqdXN0bWVudHMgZHVyaW5nIFBJUlJUIHNlc3Npb25zLiBgOwogICAgICAgICAgcmV0dXJuIHtjOiIjMjU2M2ViIix0OmAke21zZ30ke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJpaGRfa3R2IiwgbmFtZToiSUhEIEFkZXF1YWN5IChLdC9WKSIsIHJlZjoiS0RPUUkgSEQgQWRlcXVhY3kgMjAxNTsgRGF1Z2lyZGFzIEpULCBKQVNOIDE5OTMiLCB0YWc6IkludGVybWl0dGVudCBIRCDigJQgRGVsaXZlcmVkIERvc2UiLAogICAgICAgIGZvcm11bGE6IlNpbmdsZS1wb29sIEt0L1YgKERhdWdpcmRhcyAybmQgZ2VuKTpcbnNwS3QvViA9IC1sbihSIC0gMC4wMDh0KSArICg0IC0gMy41Uikgw5cgVUYvV1xud2hlcmUgUiA9IHBvc3QtQlVOL3ByZS1CVU4sIHQgPSBzZXNzaW9uIHRpbWUgKGgpLCBVRiA9IHVsdHJhZmlsdHJhdGlvbiAoTCksIFcgPSBwb3N0LXdlaWdodCAoa2cpXG5cblRhcmdldHMgKEtET1FJIDIwMTUpOlxuICBNaW5pbXVtOiBzcEt0L1Yg4omlMS4yIHBlciBzZXNzaW9uICgzw5cvd2VlaylcbiAgVGFyZ2V0OiBzcEt0L1YgMS40ICh0byBlbnN1cmUgZGVsaXZlcnkg4omlMS4yKVxuICBVUlIgdGFyZ2V0OiDiiaU2NSUiLAogICAgICAgIG5vdGU6IkRhdWdpcmRhcyAybmQgZ2VuZXJhdGlvbiBmb3JtdWxhIGFjY291bnRzIGZvciB1bHRyYWZpbHRyYXRpb24gYW5kIHVyZWEgZ2VuZXJhdGlvbi4gUmVzaWR1YWwga2lkbmV5IGZ1bmN0aW9uIChLcikgY29udHJpYnV0ZXMgdG8gdG90YWwgS3QvViBpbiBpbmNpZGVudCBwYXRpZW50cy4gS0RPUUkgcmVjb21tZW5kcyBtaW5pbXVtIHNwS3QvViAxLjIgZm9yIDPDly93ZWVrIHNjaGVkdWxlcy4gRm9yIDLDly93ZWVrICh3aXRoIHNpZ25pZmljYW50IHJlc2lkdWFsIGZ1bmN0aW9uKTogdGFyZ2V0IHN0ZEt0L1Yg4omlMi4zL3dlZWsuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJwcmVfYnVuIixsYWJlbDoiUHJlLURpYWx5c2lzIEJVTiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjY1In0sCiAgICAgICAgICB7aWQ6InBvc3RfYnVuIixsYWJlbDoiUG9zdC1EaWFseXNpcyBCVU4iLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIyMiJ9LAogICAgICAgICAge2lkOiJ0X3Nlc3Npb24iLGxhYmVsOiJTZXNzaW9uIER1cmF0aW9uIix1bml0OiJob3VycyIsdHlwZToibnVtYmVyIixwaDoiNCJ9LAogICAgICAgICAge2lkOiJ1Zl92b2wiLGxhYmVsOiJVbHRyYWZpbHRyYXRpb24gVm9sdW1lIix1bml0OiJMIix0eXBlOiJudW1iZXIiLHBoOiIyLjUifSwKICAgICAgICAgIHtpZDoicG9zdF93dCIsbGFiZWw6IlBvc3QtRGlhbHlzaXMgV2VpZ2h0Iix1bml0OiJrZyIsdHlwZToibnVtYmVyIixwaDoiNzAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBwcmU9K3YucHJlX2J1bixwb3N0PSt2LnBvc3RfYnVuLHQ9K3YudF9zZXNzaW9uLHVmPSt2LnVmX3ZvbCx3PSt2LnBvc3Rfd3Q7CiAgICAgICAgICBpZighcHJlfHwhcG9zdHx8IXR8fCF3fHxwcmU8PTB8fHBvc3Q8PTB8fHBvc3Q+PXByZSkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBSPXBvc3QvcHJlOwogICAgICAgICAgY29uc3Qga3R2PS1NYXRoLmxvZyhSLTAuMDA4KnQpKyg0LTMuNSpSKSoodWYvdyk7CiAgICAgICAgICBjb25zdCB1cnI9KDEtUikqMTAwOwogICAgICAgICAgcmV0dXJuIHt2YWw6a3R2LnRvRml4ZWQoMiksdW5pdDoic3BLdC9WIixzZWM6YFVSUjogJHt1cnIudG9GaXhlZCgxKX0lIHwgUjogJHtSLnRvRml4ZWQoMyl9IHwgVUY6ICR7dWZ9TGB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qga3R2PStyLnZhbDsKICAgICAgICAgIGlmKGt0dj49MS40KSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YHNwS3QvViAke3IudmFsfSDigJQgQWRlcXVhdGUgKHRhcmdldCDiiaUxLjQgdG8gcmVsaWFibHkgZGVsaXZlciDiiaUxLjIpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoa3R2Pj0xLjIpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgc3BLdC9WICR7ci52YWx9IOKAlCBNZWV0cyBtaW5pbXVtICjiiaUxLjIpIGJ1dCBiZWxvdyAxLjQgdGFyZ2V0LiBDb25zaWRlciBpbmNyZWFzaW5nIFFiLCBzZXNzaW9uIHRpbWUsIG9yIGRpYWx5c2VyIHN1cmZhY2UgYXJlYS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgc3BLdC9WICR7ci52YWx9IOKAlCBJTkFERVFVQVRFICg8MS4yKS4gSW5jcmVhc2Ugc2Vzc2lvbiB0aW1lLCBibG9vZCBmbG93LCBvciBkaWFseXNlciBlZmZpY2llbmN5LiBDaGVjayBhY2Nlc3MgcmVjaXJjdWxhdGlvbi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiYXZmX21hdHVyYXRpb24iLCBuYW1lOiJBViBGaXN0dWxhIE1hdHVyYXRpb24gQXNzZXNzbWVudCIsIHJlZjoiS0RPUUkgVmFzY3VsYXIgQWNjZXNzIDIwMTkgKFVwZGF0ZSk7IE5LRi1LRE9RSSAyMDA2IFJ1bGUgb2YgNnMiLCB0YWc6IlZhc2N1bGFyIEFjY2VzcyDigJQgQVZGIE1hdHVyYXRpb24iLAogICAgICAgIGZvcm11bGE6IlJ1bGUgb2YgNnMgKE5LRi1LRE9RSSkg4oCUIEFWRiBtYXR1cmF0aW9uIGNyaXRlcmlhOlxuICDigKIgRmxvdyDiiaU2MDAgbUwvbWluXG4gIOKAoiBEaWFtZXRlciDiiaU2IG1tICh2ZWluKVxuICDigKIgRGVwdGgg4omkNiBtbSBmcm9tIHNraW4gc3VyZmFjZVxuICDigKIgQXNzZXNzZWQg4omlNiB3ZWVrcyBwb3N0LWNyZWF0aW9uXG4gIOKAoiBTdHJhaWdodCBzZWdtZW50IOKJpTYgY20gZm9yIGNhbm51bGF0aW9uXG5cbkNyZWF0ZSBBVkYgd2hlbiBlR0ZSIDwxNS0yMCBPUiBkaWFseXNpcyBleHBlY3RlZCB3aXRoaW4gNi0xMiBtb250aHNcbkFWRiBwcmVmZXJyZWQgb3ZlciBBVkcgcHJlZmVycmVkIG92ZXIgQ1ZDIChGaXN0dWxhIEZpcnN0IGluaXRpYXRpdmUpIiwKICAgICAgICBub3RlOiJHVUlERUxJTkUtQkFTRUQgVE9PTCDigJQgVGhpcyBjYWxjdWxhdG9yIGFwcGxpZXMgcHVibGlzaGVkIGNsaW5pY2FsIHRocmVzaG9sZHMgYnV0IGlzIG5vdCBpdHNlbGYgYSB2YWxpZGF0ZWQgY29tcG9zaXRlIHNjb3JpbmcgaW5zdHJ1bWVudC4gSW50ZXJwcmV0IHdpdGhpbiBjbGluaWNhbCBjb250ZXh0LlxuXG5LRE9RSSAyMDE5IHVwZGF0ZSByZWNvbW1lbmRzIHJlZmVycmFsIGZvciBhY2Nlc3MgYXQgZUdGUiA8MjAgb3IgZXhwZWN0ZWQgZGlhbHlzaXMgd2l0aGluIDEyIG1vbnRocy4gQVZGIGhhcyBsb3dlc3QgaW5mZWN0aW9uIGFuZCB0aHJvbWJvc2lzIHJhdGVzLiBNYXR1cmF0aW9uIGZhaWx1cmUgcmF0ZTogMjgtNTMlIChEZW1iZXIgZXQgYWwuLCBORUpNIDIwMDgpLiBDb25zaWRlciBEdXBsZXggVVMgbWFwcGluZyBwcmUtb3BlcmF0aXZlbHkuIFJhZGlvY2VwaGFsaWMgcHJlZmVycmVkIOKGkiBicmFjaGlvY2VwaGFsaWMg4oaSIGJyYWNoaW9iYXNpbGljIHRyYW5zcG9zaXRpb24g4oaSIEFWRy4gQXZvaWQgaXBzaWxhdGVyYWwgc3ViY2xhdmlhbiBDVkMgaWYgZmlzdHVsYSBwbGFubmVkLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiZmxvdyIsbGFiZWw6IkFjY2VzcyBGbG93IChRYSkiLHVuaXQ6Im1ML21pbiIsdHlwZToibnVtYmVyIixwaDoiNzUwIn0sCiAgICAgICAgICB7aWQ6ImRpYW1ldGVyIixsYWJlbDoiVmVpbiBEaWFtZXRlciAob24gVVMpIix1bml0OiJtbSIsdHlwZToibnVtYmVyIixwaDoiNS41In0sCiAgICAgICAgICB7aWQ6ImRlcHRoIixsYWJlbDoiRGVwdGggZnJvbSBTa2luIFN1cmZhY2UiLHVuaXQ6Im1tIix0eXBlOiJudW1iZXIiLHBoOiI0In0sCiAgICAgICAgICB7aWQ6IndlZWtzIixsYWJlbDoiV2Vla3MgU2luY2UgQ3JlYXRpb24iLHVuaXQ6IndlZWtzIix0eXBlOiJudW1iZXIiLHBoOiI4In0sCiAgICAgICAgICB7aWQ6InNlZ21lbnQiLGxhYmVsOiJTdHJhaWdodCBDYW5udWxhdGlvbiBTZWdtZW50IExlbmd0aCIsdW5pdDoiY20iLHR5cGU6Im51bWJlciIscGg6IjcifSwKICAgICAgICAgIHtpZDoidGhyaWxsIixsYWJlbDoiUGFscGFibGUgdGhyaWxsIHRocm91Z2hvdXQiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgZmxvdz0rdi5mbG93LGRpYW09K3YuZGlhbWV0ZXIsZGVwdGg9K3YuZGVwdGgsd2tzPSt2LndlZWtzLHNlZz0rdi5zZWdtZW50OwogICAgICAgICAgY29uc3QgY3JpdGVyaWE9WwogICAgICAgICAgICBmbG93Pj02MDAsZGlhbT49NixkZXB0aDw9Nix3a3M+PTYsc2VnPj02CiAgICAgICAgICBdOwogICAgICAgICAgY29uc3QgbWV0PWNyaXRlcmlhLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7CiAgICAgICAgICByZXR1cm4ge3ZhbDpgJHttZXR9LzVgLHVuaXQ6IlJ1bGUgb2YgNnMgY3JpdGVyaWEgbWV0IixzZWM6YEZsb3c6ICR7Zmxvd3x8Ii0ifSB8IERpYW06ICR7ZGlhbXx8Ii0ifW1tIHwgRGVwdGg6ICR7ZGVwdGh8fCItIn1tbSB8IFdrczogJHt3a3N8fCItIn0gfCBTZWdtZW50OiAke3NlZ3x8Ii0ifWNtIHwgVGhyaWxsOiAke3YudGhyaWxsPyJZZXMiOiJObyJ9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGZsb3c9K3YuZmxvdyxkaWFtPSt2LmRpYW1ldGVyLGRlcHRoPSt2LmRlcHRoLHdrcz0rdi53ZWVrczsKICAgICAgICAgIGNvbnN0IG1ldD1wYXJzZUludChyLnZhbCl8fDA7CiAgICAgICAgICBpZihtZXQ9PT01JiZ2LnRocmlsbCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBBVkYgbWF0dXJlIOKAlCBhbGwgUnVsZSBvZiA2cyBjcml0ZXJpYSBtZXQgd2l0aCBwYWxwYWJsZSB0aHJpbGwuIFN1aXRhYmxlIGZvciBjYW5udWxhdGlvbi4gQmVnaW4gdHdvLW5lZWRsZSBkaWFseXNpcy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKG1ldD49MykgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmAke3IudmFsfSBjcml0ZXJpYSBtZXQuIFBhcnRpYWxseSBtYXR1cmUuICR7IXYudGhyaWxsPyJObyB0aHJpbGwgcGFscGF0ZWQg4oCUIGNoZWNrIGZvciBzdGVub3Npcy90aHJvbWJvc2lzLiAiOiIifSR7ZGlhbTw2PyJWZWluIGRpYW1ldGVyIDw2bW0g4oCUIG1heSBpbXByb3ZlIHdpdGggZXhlcmNpc2UvdGltZS4gIjoiIn0ke2Zsb3c8NjAwPyJGbG93IDw2MDAg4oCUIGNvbnNpZGVyIGZpc3R1bG9ncmFwaHkgaWYgcGVyc2lzdGVudC4gIjoiIn1SZXBlYXQgVVMgaW4gMi00IHdlZWtzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYod2tzPDYpIHJldHVybiB7YzoiIzI1NjNlYiIsdDpgT25seSAke3drc30gd2Vla3Mgc2luY2UgY3JlYXRpb24uIEFsbG93IOKJpTYgd2Vla3MgZm9yIG1hdHVyYXRpb24uIEVuY291cmFnZSBoYW5kLWdyaXAgZXhlcmNpc2VzLiBSZXBlYXQgYXNzZXNzbWVudCBhdCA2IHdlZWtzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAke3IudmFsfSBjcml0ZXJpYSBtZXQg4oCUIG1hdHVyYXRpb24gZmFpbHVyZSBsaWtlbHkuIENvbnNpZGVyIGZpc3R1bG9wbGFzdHkgKGJhbGxvb24gYW5naW9wbGFzdHkpLCBzdXBlcmZpY2lhbGlzYXRpb24sIG9yIHJldmlzaW9uLiBEdXBsZXggVVMgdG8gaWRlbnRpZnkgY29ycmVjdGFibGUgc3Rlbm9zaXMuIEFWRyBvciBDVkMgbWF5IGJlIG5lZWRlZCBhcyBicmlkZ2UuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0KXTsKCgovLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAKLy8gTUFJTiBDT01QT05FTlQKLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQCmNvbnN0IGFsbENhbGNzID0gU0VDVElPTlMuZmxhdE1hcChzID0+IHMuY2FsY3MubWFwKGMgPT4gKHsuLi5jLCBzaWQ6IHMuaWQsIHNsYWJlbDogcy5sYWJlbH0pKSk7CgpmdW5jdGlvbiBBcHAoKSB7CiAgY29uc3QgW2FjY2VwdGVkLCBzZXRBY2NlcHRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3NpZCwgc2V0U2lkXSA9IHVzZVN0YXRlKCJzMSIpOwogIGNvbnN0IFtjaWQsIHNldENpZF0gPSB1c2VTdGF0ZSgiY2tkZXBpIik7CiAgY29uc3QgW2lucHV0cywgc2V0SW5wdXRzXSA9IHVzZVN0YXRlKHt9KTsKICBjb25zdCBbcmVzdWx0LCBzZXRSZXN1bHRdID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgW2ludGVycCwgc2V0SW50ZXJwXSA9IHVzZVN0YXRlKG51bGwpOwogIGNvbnN0IFtzZWFyY2gsIHNldFNlYXJjaF0gPSB1c2VTdGF0ZSgiIik7CiAgY29uc3QgW3NpZGViYXJPcGVuLCBzZXRTaWRlYmFyT3Blbl0gPSB1c2VTdGF0ZSh0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCImJndpbmRvdy5pbm5lcldpZHRoPjc2OCk7CiAgY29uc3QgaXNNb2JpbGUgPSB0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCImJndpbmRvdy5pbm5lcldpZHRoPD03Njg7CgogIGNvbnN0IGNhbGMgPSBhbGxDYWxjcy5maW5kKGMgPT4gYy5pZCA9PT0gY2lkKTsKICBjb25zdCBzZWMgPSBTRUNUSU9OUy5maW5kKHMgPT4gcy5pZCA9PT0gc2lkKTsKICBjb25zdCBmb3VuZCA9IHNlYXJjaC50cmltKCkgPyBhbGxDYWxjcy5maWx0ZXIoYyA9PgogICAgYy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoLnRvTG93ZXJDYXNlKCkpIHx8CiAgICAoYy50YWd8fCIiKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaC50b0xvd2VyQ2FzZSgpKSB8fAogICAgKGMucmVmfHwiIikudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gudG9Mb3dlckNhc2UoKSkKICApIDogbnVsbDsKCiAgZnVuY3Rpb24gcGljayhjKSB7CiAgICBzZXRDaWQoYy5pZCk7IHNldFNpZChjLnNpZCk7CiAgICBzZXRJbnB1dHMoe30pOyBzZXRSZXN1bHQobnVsbCk7IHNldEludGVycChudWxsKTsgc2V0U2VhcmNoKCIiKTsKICAgIGlmKGlzTW9iaWxlKSBzZXRTaWRlYmFyT3BlbihmYWxzZSk7CiAgfQogIGZ1bmN0aW9uIGlucChpZCwgdmFsKSB7IHNldElucHV0cyhwID0+ICh7Li4ucCwgW2lkXTogdmFsfSkpOyBzZXRSZXN1bHQobnVsbCk7IHNldEludGVycChudWxsKTsgfQogIGZ1bmN0aW9uIGdvKCkgewogICAgaWYgKCFjYWxjKSByZXR1cm47CiAgICBjb25zdCBmaSA9IHsuLi5pbnB1dHN9OwogICAgY2FsYy5pbnB1dHMuZm9yRWFjaChpID0+IHsKICAgICAgaWYgKGkudHlwZSA9PT0gInNlbGVjdCIgJiYgKGZpW2kuaWRdID09PSB1bmRlZmluZWQgfHwgZmlbaS5pZF0gPT09IG51bGwgfHwgZmlbaS5pZF0gPT09ICIiKSkKICAgICAgICBmaVtpLmlkXSA9IGkub3B0aW9uc1swXTsKICAgICAgaWYgKGkudHlwZSA9PT0gImNoZWNrYm94IiAmJiBmaVtpLmlkXSA9PT0gdW5kZWZpbmVkKQogICAgICAgIGZpW2kuaWRdID0gZmFsc2U7CiAgICB9KTsKICAgIGxldCByOwogICAgdHJ5IHsgciA9IGNhbGMuY29tcHV0ZShmaSk7IH0gY2F0Y2goZSkgeyByID0gbnVsbDsgfQogICAgaWYgKHIgPT09IG51bGwgfHwgciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHNldFJlc3VsdChudWxsKTsKICAgICAgY29uc3QgbWlzc2luZyA9IGNhbGMuaW5wdXRzCiAgICAgICAgLmZpbHRlcihpID0+IGkudHlwZSA9PT0gIm51bWJlciIgJiYgKCFmaVtpLmlkXSB8fCBmaVtpLmlkXSA9PT0gIiIpKQogICAgICAgIC5tYXAoaSA9PiBpLmxhYmVsLnNwbGl0KCLigJQiKVswXS5zcGxpdCgiKCIpWzBdLnRyaW0oKSk7CiAgICAgIGNvbnN0IG1zZyA9IG1pc3NpbmcubGVuZ3RoID4gMAogICAgICAgID8gYE1pc3Npbmc6ICR7bWlzc2luZy5zbGljZSgwLDMpLmpvaW4oIiwgIil9JHttaXNzaW5nLmxlbmd0aCA+IDMgPyBgICgrJHttaXNzaW5nLmxlbmd0aC0zfSBtb3JlKWAgOiAiIn0uIFBsZWFzZSBlbnRlciB2YWxpZCB2YWx1ZXMuYAogICAgICAgIDogIlBsZWFzZSBlbnRlciB2YWxpZCB2YWx1ZXMgaW4gYWxsIHJlcXVpcmVkIGZpZWxkcy4iOwogICAgICBzZXRJbnRlcnAoe2M6IiNkYzI2MjYiLCB0OiBtc2d9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgc2V0UmVzdWx0KHIpOwogICAgc2V0SW50ZXJwKGNhbGMuaW50ZXJwcmV0KHIsIGZpKSk7CiAgfQogIGZ1bmN0aW9uIHJlc2V0KCkgeyBzZXRJbnB1dHMoe30pOyBzZXRSZXN1bHQobnVsbCk7IHNldEludGVycChudWxsKTsgfQoKICAvLyDilIDilIAgRElTQ0xBSU1FUiBHQVRFIOKUgOKUgAogIGlmICghYWNjZXB0ZWQpIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7bWluSGVpZ2h0OiIxMDB2aCIsYmFja2dyb3VuZDoiI2Y3ZjhmYSIsZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiY2VudGVyIixqdXN0aWZ5Q29udGVudDoiY2VudGVyIixwYWRkaW5nOjI0LGZvbnRGYW1pbHk6IidHZW9yZ2lhJyxzZXJpZiJ9fT4KICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOjY2MCxiYWNrZ3JvdW5kOiIjZmZmIixib3JkZXI6IjFweCBzb2xpZCAjZTBlM2VhIixib3JkZXJSYWRpdXM6OCxwYWRkaW5nOmlzTW9iaWxlPyIyMHB4IDE2cHgiOiI0MHB4IDQ0cHgiLGJveFNoYWRvdzoiMCAycHggMjBweCByZ2JhKDAsMCwwLDAuMDYpIn19PgogICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMSxsZXR0ZXJTcGFjaW5nOiIwLjE1ZW0iLGNvbG9yOiIjOTk5Iix0ZXh0VHJhbnNmb3JtOiJ1cHBlcmNhc2UiLG1hcmdpbkJvdHRvbTo2LGZvbnRGYW1pbHk6IidDb3VyaWVyIE5ldycsbW9ub3NwYWNlIn19PkltcG9ydGFudCDigJQgUmVhZCBCZWZvcmUgUHJvY2VlZGluZzwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToyMCxmb250V2VpZ2h0OjcwMCxjb2xvcjoiIzExMSIsbWFyZ2luQm90dG9tOjR9fT5FZHVjYXRpb25hbCAmIExlZ2FsIERpc2NsYWltZXI8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTEsY29sb3I6IiNiYmIiLG1hcmdpbkJvdHRvbToyMCxmb250RmFtaWx5OiInQ291cmllciBOZXcnLG1vbm9zcGFjZSJ9fT7CqSAyMDI2IERyLiBBc2hpc2ggUGF0ZWwuIEFsbCByaWdodHMgcmVzZXJ2ZWQuPC9kaXY+CiAgICAgICAgPGRpdiBkYXRhLXBlZXItcmV2aWV3LTE9IiIgZGF0YS1wZWVyLXJldmlldy0yPSIiIGRhdGEtcGVlci1yZXZpZXctMz0iIiBzdHlsZT17e2Rpc3BsYXk6Im5vbmUifX0vPgogICAgICAgIDxkaXYgc3R5bGU9e3ttYXhIZWlnaHQ6MzQwLG92ZXJmbG93WToiYXV0byIsZm9udFNpemU6MTIuNSxjb2xvcjoiIzQ0NCIsbGluZUhlaWdodDoxLjg1LG1hcmdpbkJvdHRvbToyOCxwYWRkaW5nUmlnaHQ6OCx3aGl0ZVNwYWNlOiJwcmUtbGluZSIsYm9yZGVyVG9wOiIxcHggc29saWQgI2YwZjJmNSIscGFkZGluZ1RvcDoxNn19PntESVNDTEFJTUVSX1RFWFR9PC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17e2JvcmRlclRvcDoiMXB4IHNvbGlkICNlZWUiLHBhZGRpbmdUb3A6MjAsZGlzcGxheToiZmxleCIsanVzdGlmeUNvbnRlbnQ6ImZsZXgtZW5kIn19PgogICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRBY2NlcHRlZCh0cnVlKX0gc3R5bGU9e3tiYWNrZ3JvdW5kOiIjMTExIixjb2xvcjoiI2ZmZiIsYm9yZGVyOiJub25lIixib3JkZXJSYWRpdXM6NSxwYWRkaW5nOiIxMXB4IDMycHgiLGZvbnRTaXplOjEzLGN1cnNvcjoicG9pbnRlciIsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UiLGxldHRlclNwYWNpbmc6IjAuMDZlbSIsZm9udFdlaWdodDo2MDB9fT4KICAgICAgICAgICAgSSBVTkRFUlNUQU5EIOKAlCBQUk9DRUVECiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwoKICAvLyDilIDilIAgTUFJTiBBUFAg4pSA4pSACiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3ttaW5IZWlnaHQ6IjEwMHZoIixiYWNrZ3JvdW5kOiIjZjdmOGZhIixmb250RmFtaWx5OiInSGVsdmV0aWNhIE5ldWUnLCdBcmlhbCcsc2Fucy1zZXJpZiIsY29sb3I6IiMxMTEiLGRpc3BsYXk6ImZsZXgiLGZsZXhEaXJlY3Rpb246ImNvbHVtbiJ9fT4KICAgICAgey8qIEhlYWRlciAqL30KICAgICAgPGhlYWRlciBzdHlsZT17e2JhY2tncm91bmQ6IiNmZmYiLGJvcmRlckJvdHRvbToiMXB4IHNvbGlkICNlMGUzZWEiLGhlaWdodDo1NCxkaXNwbGF5OiJmbGV4IixhbGlnbkl0ZW1zOiJjZW50ZXIiLGp1c3RpZnlDb250ZW50OiJzcGFjZS1iZXR3ZWVuIixwYWRkaW5nOiIwIDIwcHgiLGZsZXhTaHJpbms6MCxwb3NpdGlvbjoic3RpY2t5Iix0b3A6MCx6SW5kZXg6MTAwfX0+CiAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6ImZsZXgiLGFsaWduSXRlbXM6ImNlbnRlciIsZ2FwOjE0fX0+CiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFNpZGViYXJPcGVuKG8gPT4gIW8pfSBzdHlsZT17e2JhY2tncm91bmQ6Im5vbmUiLGJvcmRlcjoibm9uZSIsY3Vyc29yOiJwb2ludGVyIixmb250U2l6ZToxNyxjb2xvcjoiIzg4OCIscGFkZGluZzoiNHB4IDZweCIsbGluZUhlaWdodDoxfX0+4piwPC9idXR0b24+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiYmFzZWxpbmUiLGdhcDoxMH19PgogICAgICAgICAgICA8c3BhbiBzdHlsZT17e2ZvbnRTaXplOmlzTW9iaWxlPzEzOjE1LGZvbnRXZWlnaHQ6NzAwLGNvbG9yOiIjMTExIixsZXR0ZXJTcGFjaW5nOiItMC4wMWVtIn19Pntpc01vYmlsZT8iTmVwaHJvQ2FsYyBQcm8iOiJOZXBocm9DYWxjIFBybyDigJQgUmVuYWwgJiBDbGluaWNhbCBEZWNpc2lvbiBTdXBwb3J0In08L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7Zm9udFNpemU6MTAsY29sb3I6IiNiYmIiLGZvbnRGYW1pbHk6IidDb3VyaWVyIE5ldycsbW9ub3NwYWNlIn19PnYxMC4wPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjEwLGNvbG9yOiIjYmJiIixmb250RmFtaWx5OiInQ291cmllciBOZXcnLG1vbm9zcGFjZSIsdGV4dEFsaWduOiJyaWdodCIsbGluZUhlaWdodDoxLjV9fT7CqSAyMDI2IERyLiBBc2hpc2ggUGF0ZWw8YnIvPkFsbCByaWdodHMgcmVzZXJ2ZWQuPHNwYW4gZGF0YS1wZWVyLXJldmlldy0xPSIiIGRhdGEtcGVlci1yZXZpZXctMj0iIiBkYXRhLXBlZXItcmV2aWV3LTM9IiIgc3R5bGU9e3tkaXNwbGF5OiJub25lIn19Lz48L2Rpdj4KICAgICAgPC9oZWFkZXI+CgogICAgICB7LyogV2FybmluZyBiYXIgKi99CiAgICAgIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kOiIjZmZmYmViIixib3JkZXJCb3R0b206IjFweCBzb2xpZCAjZmRlNjhhIixwYWRkaW5nOiI3cHggMjBweCIsZm9udFNpemU6MTEsY29sb3I6IiM5MjQwMGUiLGRpc3BsYXk6ImZsZXgiLGdhcDo4LGFsaWduSXRlbXM6ImZsZXgtc3RhcnQifX0+CiAgICAgICAgPHNwYW4gc3R5bGU9e3ttYXJnaW5Ub3A6MX19PuKaoDwvc3Bhbj4KICAgICAgICA8c3Bhbj48c3Ryb25nPkNsaW5pY2FsIERlY2lzaW9uIFN1cHBvcnQgVG9vbC48L3N0cm9uZz4gQWxsIG91dHB1dHMgc3VwcG9ydCwgbm90IHJlcGxhY2UsIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudC4gSW4gZW1lcmdlbmNpZXMsIGltbWVkaWF0ZSByZXN1c2NpdGF0aW9uIHRha2VzIGFic29sdXRlIHByZWNlZGVuY2UuIMKpIDIwMjYgRHIuIEFzaGlzaCBQYXRlbC48c3BhbiBkYXRhLXBlZXItcmV2aWV3LTE9IiIgZGF0YS1wZWVyLXJldmlldy0yPSIiIGRhdGEtcGVlci1yZXZpZXctMz0iIiBzdHlsZT17e2Rpc3BsYXk6Im5vbmUifX0vPjwvc3Bhbj4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheToiZmxleCIsZmxleDoxLG92ZXJmbG93OiJoaWRkZW4iLG1pbkhlaWdodDowfX0+CiAgICAgICAgey8qIFNpZGViYXIgKi99CiAgICAgICAgICB7c2lkZWJhck9wZW4mJjxhc2lkZSBzdHlsZT17e3dpZHRoOmlzTW9iaWxlPyI4NSUiOjI2MCxiYWNrZ3JvdW5kOiIjZmZmIixib3JkZXJSaWdodDppc01vYmlsZT8ibm9uZSI6IjFweCBzb2xpZCAjZTBlM2VhIixvdmVyZmxvd1k6ImF1dG8iLGZsZXhTaHJpbms6MCxkaXNwbGF5OiJmbGV4IixmbGV4RGlyZWN0aW9uOiJjb2x1bW4iLHBvc2l0aW9uOmlzTW9iaWxlPyJmaXhlZCI6InN0YXRpYyIsdG9wOmlzTW9iaWxlPzU0OjAsbGVmdDowLGJvdHRvbTowLHpJbmRleDppc01vYmlsZT85OToxLGJveFNoYWRvdzppc01vYmlsZT8iMnB4IDAgMTJweCByZ2JhKDAsMCwwLDAuMTUpIjoibm9uZSJ9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17e3BhZGRpbmc6IjEwcHggMTJweCIsYm9yZGVyQm90dG9tOiIxcHggc29saWQgI2YwZjJmNSJ9fT4KICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e3NlYXJjaH0gb25DaGFuZ2U9e2UgPT4gc2V0U2VhcmNoKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9IlNlYXJjaCBhbGwgY2FsY3VsYXRvcnPigKYiCiAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiIxMDAlIixiYWNrZ3JvdW5kOiIjZjdmOGZhIixib3JkZXI6IjFweCBzb2xpZCAjZTBlM2VhIixib3JkZXJSYWRpdXM6NSxwYWRkaW5nOiI3cHggMTBweCIsZm9udFNpemU6MTIsY29sb3I6IiMzMzMiLG91dGxpbmU6Im5vbmUiLGJveFNpemluZzoiYm9yZGVyLWJveCIsZm9udEZhbWlseToiaW5oZXJpdCJ9fS8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICB7c2VhcmNoICYmIGZvdW5kID8gKAogICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZzoiOHB4IDEycHggNHB4Iixmb250U2l6ZToxMCxjb2xvcjoiI2FhYSIsbGV0dGVyU3BhY2luZzoiMC4xZW0iLHRleHRUcmFuc2Zvcm06InVwcGVyY2FzZSJ9fT5SZXN1bHRzICh7Zm91bmQubGVuZ3RofSk8L2Rpdj4KICAgICAgICAgICAgICAgIHtmb3VuZC5tYXAoYyA9PiAoCiAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtjLmlkfSBvbkNsaWNrPXsoKSA9PiBwaWNrKGMpfSBzdHlsZT17e3BhZGRpbmc6IjhweCAxMnB4IixjdXJzb3I6InBvaW50ZXIiLGJvcmRlckxlZnQ6Y2lkPT09Yy5pZD8iM3B4IHNvbGlkICMxMTEiOiIzcHggc29saWQgdHJhbnNwYXJlbnQiLGJhY2tncm91bmQ6Y2lkPT09Yy5pZD8iI2Y3ZjhmYSI6InRyYW5zcGFyZW50In19PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMCxjb2xvcjoiI2FhYSIsbWFyZ2luQm90dG9tOjF9fT57Yy5zbGFiZWx9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjEzLGNvbG9yOiIjMTExIixmb250V2VpZ2h0OmNpZD09PWMuaWQ/NjAwOjQwMH19PntjLm5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjEwLGNvbG9yOiIjYmJiIn19PntjLnRhZ308L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKSA6IFNFQ1RJT05TLm1hcChzID0+ICgKICAgICAgICAgICAgICA8ZGl2IGtleT17cy5pZH0+CiAgICAgICAgICAgICAgICA8ZGl2IG9uQ2xpY2s9eygpID0+IHNldFNpZChzaWQ9PT1zLmlkPyIiOnMuaWQpfSBzdHlsZT17e3BhZGRpbmc6IjlweCAxMnB4IixjdXJzb3I6InBvaW50ZXIiLGJvcmRlclRvcDoiMXB4IHNvbGlkICNmMGYyZjUiLGRpc3BsYXk6ImZsZXgiLGp1c3RpZnlDb250ZW50OiJzcGFjZS1iZXR3ZWVuIixhbGlnbkl0ZW1zOiJjZW50ZXIiLGJhY2tncm91bmQ6c2lkPT09cy5pZD8iI2Y3ZjhmYSI6IiNmZmYifX0+CiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7Zm9udFNpemU6MTEsZm9udFdlaWdodDo2MDAsY29sb3I6c2lkPT09cy5pZD8iIzExMSI6IiM2NjYiLGxldHRlclNwYWNpbmc6IjAuMDJlbSIsdGV4dFRyYW5zZm9ybToidXBwZXJjYXNlIixsaW5lSGVpZ2h0OjEuM319PntzLmxhYmVsfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMCxjb2xvcjoiI2NjYyJ9fT57cy5jYWxjcy5sZW5ndGh9PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICB7c2lkPT09cy5pZCAmJiBzLmNhbGNzLm1hcChjID0+ICgKICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2MuaWR9IG9uQ2xpY2s9eygpID0+IHBpY2soey4uLmMsc2lkOnMuaWQsc2xhYmVsOnMubGFiZWx9KX0gc3R5bGU9e3twYWRkaW5nOiI3cHggMTJweCA3cHggMjBweCIsY3Vyc29yOiJwb2ludGVyIixib3JkZXJMZWZ0OmNpZD09PWMuaWQ/IjNweCBzb2xpZCAjMTExIjoiM3B4IHNvbGlkIHRyYW5zcGFyZW50IixiYWNrZ3JvdW5kOmNpZD09PWMuaWQ/IiNmMGYyZjUiOiJ0cmFuc3BhcmVudCJ9fT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTMsY29sb3I6Y2lkPT09Yy5pZD8iIzExMSI6IiM0NDQiLGZvbnRXZWlnaHQ6Y2lkPT09Yy5pZD82MDA6NDAwfX0+e2MubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTAsY29sb3I6IiNhYWEiLG1hcmdpblRvcDoxfX0+e2MudGFnfTwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApKX0KICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpblRvcDoiYXV0byIscGFkZGluZzoiMTRweCAxMnB4Iixib3JkZXJUb3A6IjFweCBzb2xpZCAjZjBmMmY1In19PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMCxjb2xvcjoiI2NjYyIsbGluZUhlaWdodDoxLjcsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UifX0+CiAgICAgICAgICAgICAgICDCqSAyMDI2IERyLiBBc2hpc2ggUGF0ZWw8YnIvPkFsbCByaWdodHMgcmVzZXJ2ZWQuCiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9hc2lkZT59CiAgICAgICAgICB7aXNNb2JpbGUmJnNpZGViYXJPcGVuJiY8ZGl2IG9uQ2xpY2s9eygpPT5zZXRTaWRlYmFyT3BlbihmYWxzZSl9IHN0eWxlPXt7cG9zaXRpb246ImZpeGVkIix0b3A6NTQsbGVmdDowLHJpZ2h0OjAsYm90dG9tOjAsYmFja2dyb3VuZDoicmdiYSgwLDAsMCwwLjMpIix6SW5kZXg6OTh9fS8+fQoKICAgICAgICB7LyogTWFpbiAqL30KICAgICAgICA8bWFpbiBzdHlsZT17e2ZsZXg6MSxvdmVyZmxvd1k6ImF1dG8iLHBhZGRpbmc6aXNNb2JpbGU/IjE2cHggMTJweCI6IjI4cHggMzJweCJ9fT4KICAgICAgICAgIHtjYWxjICYmICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOmlzTW9iaWxlPyIxMDAlIjo2NjB9fT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luQm90dG9tOjI2fX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiY2VudGVyIixnYXA6OCxtYXJnaW5Cb3R0b206NixmbGV4V3JhcDoid3JhcCJ9fT4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMCxiYWNrZ3JvdW5kOiIjZjBmMmY1Iixjb2xvcjoiIzU1NSIsYm9yZGVyUmFkaXVzOjMscGFkZGluZzoiMnB4IDhweCIsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UifX0+e2NhbGMudGFnfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMCxjb2xvcjoiI2JiYiJ9fT7Ctzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMCxjb2xvcjoiI2JiYiJ9fT57c2VjPy5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxoMSBzdHlsZT17e2ZvbnRTaXplOjIyLGZvbnRXZWlnaHQ6NzAwLGNvbG9yOiIjMTExIixtYXJnaW46IjAgMCAzcHgiLGxldHRlclNwYWNpbmc6Ii0wLjAyZW0ifX0+e2NhbGMubmFtZX08L2gxPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjExLGNvbG9yOiIjOTk5IixtYXJnaW5Cb3R0b206MTIsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UifX0+e2NhbGMucmVmfTwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kOiIjZjdmOGZhIixib3JkZXI6IjFweCBzb2xpZCAjZTBlM2VhIixib3JkZXJSYWRpdXM6NSxwYWRkaW5nOiIxMHB4IDE0cHgiLG1hcmdpbkJvdHRvbToxMH19PgogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6OSxjb2xvcjoiI2JiYiIsbGV0dGVyU3BhY2luZzoiMC4xMmVtIix0ZXh0VHJhbnNmb3JtOiJ1cHBlcmNhc2UiLG1hcmdpbkJvdHRvbTo0fX0+Rm9ybXVsYTwvZGl2PgogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTIsY29sb3I6IiMzMzMiLGZvbnRGYW1pbHk6IidDb3VyaWVyIE5ldycsbW9ub3NwYWNlIixsaW5lSGVpZ2h0OjEuNyx3aGl0ZVNwYWNlOiJwcmUtd3JhcCJ9fT57Y2FsYy5mb3JtdWxhfTwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAge2NhbGMubm90ZSAmJiA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTEuNSxjb2xvcjoiIzY2NiIsbGluZUhlaWdodDoxLjc1LGJvcmRlckxlZnQ6IjNweCBzb2xpZCAjZTBlM2VhIixwYWRkaW5nTGVmdDoxMCxtYXJnaW5Cb3R0b206Mn19PntjYWxjLm5vdGV9PC9kaXY+fQogICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheToiZ3JpZCIsZ2FwOjEyLG1hcmdpbkJvdHRvbToyMn19PgogICAgICAgICAgICAgICAge2NhbGMuaW5wdXRzLm1hcChpID0+ICgKICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2kuaWR9PgogICAgICAgICAgICAgICAgICAgIHtpLnR5cGU9PT0iY2hlY2tib3giID8gKAogICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXt7ZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiZmxleC1zdGFydCIsZ2FwOjksY3Vyc29yOiJwb2ludGVyIix1c2VyU2VsZWN0OiJub25lIn19PgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9eyEhaW5wdXRzW2kuaWRdfSBvbkNoYW5nZT17ZSA9PiBpbnAoaS5pZCwgZS50YXJnZXQuY2hlY2tlZCl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW5Ub3A6Mix3aWR0aDoxNCxoZWlnaHQ6MTQsYWNjZW50Q29sb3I6IiMxMTEiLGN1cnNvcjoicG9pbnRlciIsZmxleFNocmluazowfX0vPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e2ZvbnRTaXplOjEzLGNvbG9yOmlucHV0c1tpLmlkXT8iIzExMSI6IiM1NTUiLGxpbmVIZWlnaHQ6MS40fX0+e2kubGFiZWx9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgPD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXt7ZGlzcGxheToiYmxvY2siLGZvbnRTaXplOjEwLGNvbG9yOiIjODg4IixtYXJnaW5Cb3R0b206NCxsZXR0ZXJTcGFjaW5nOiIwLjA0ZW0iLHRleHRUcmFuc2Zvcm06InVwcGVyY2FzZSJ9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICB7aS5sYWJlbH17aS51bml0ID8gPHNwYW4gc3R5bGU9e3tjb2xvcjoiI2NjYyIsZm9udFdlaWdodDo0MDAsdGV4dFRyYW5zZm9ybToibm9uZSJ9fT4gKHtpLnVuaXR9KTwvc3Bhbj46IiJ9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIHtpLnR5cGU9PT0ic2VsZWN0IiA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtpbnB1dHNbaS5pZF18fGkub3B0aW9uc1swXX0gb25DaGFuZ2U9e2UgPT4gaW5wKGkuaWQsIGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IjEwMCUiLGJhY2tncm91bmQ6IiNmZmYiLGJvcmRlcjoiMXB4IHNvbGlkICNkNGQ4ZTAiLGJvcmRlclJhZGl1czo1LHBhZGRpbmc6IjlweCAxMXB4Iixmb250U2l6ZToxMyxjb2xvcjoiIzExMSIsb3V0bGluZToibm9uZSIsZm9udEZhbWlseToiaW5oZXJpdCIsY3Vyc29yOiJwb2ludGVyIn19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAge2kub3B0aW9ucy5tYXAobyA9PiA8b3B0aW9uIGtleT17b30gdmFsdWU9e299PntvfTwvb3B0aW9uPil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9e2lucHV0c1tpLmlkXXx8IiJ9IG9uQ2hhbmdlPXtlID0+IGlucChpLmlkLCBlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPXtpLnBofQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDoiMTAwJSIsYmFja2dyb3VuZDoiI2ZmZiIsYm9yZGVyOiIxcHggc29saWQgI2Q0ZDhlMCIsYm9yZGVyUmFkaXVzOjUscGFkZGluZzoiOXB4IDExcHgiLGZvbnRTaXplOjEzLGNvbG9yOiIjMTExIixvdXRsaW5lOiJub25lIixmb250RmFtaWx5OiJpbmhlcml0Iixib3hTaXppbmc6ImJvcmRlci1ib3gifX0vPgogICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgPC8+CiAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6ImZsZXgiLGdhcDo5LG1hcmdpbkJvdHRvbToyMn19PgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtnb30gc3R5bGU9e3tiYWNrZ3JvdW5kOiIjMTExIixjb2xvcjoiI2ZmZiIsYm9yZGVyOiJub25lIixib3JkZXJSYWRpdXM6NSxwYWRkaW5nOiIxMHB4IDI4cHgiLGZvbnRTaXplOjEzLGN1cnNvcjoicG9pbnRlciIsZm9udEZhbWlseToiaW5oZXJpdCIsZm9udFdlaWdodDo1MDB9fT4KICAgICAgICAgICAgICAgICAgQ2FsY3VsYXRlCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17cmVzZXR9IHN0eWxlPXt7YmFja2dyb3VuZDoiI2ZmZiIsY29sb3I6IiM1NTUiLGJvcmRlcjoiMXB4IHNvbGlkICNkNGQ4ZTAiLGJvcmRlclJhZGl1czo1LHBhZGRpbmc6IjEwcHggMThweCIsZm9udFNpemU6MTMsY3Vyc29yOiJwb2ludGVyIixmb250RmFtaWx5OiJpbmhlcml0In19PgogICAgICAgICAgICAgICAgICBSZXNldAogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgIHtyZXN1bHQgJiYgKAogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmQ6IiNmZmYiLGJvcmRlcjoiMXB4IHNvbGlkICNlMGUzZWEiLGJvcmRlclJhZGl1czo2LHBhZGRpbmc6IjE2cHggMjBweCIsbWFyZ2luQm90dG9tOjEwfX0+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZTo5LGNvbG9yOiIjYWFhIixsZXR0ZXJTcGFjaW5nOiIwLjEyZW0iLHRleHRUcmFuc2Zvcm06InVwcGVyY2FzZSIsbWFyZ2luQm90dG9tOjZ9fT5SZXN1bHQ8L2Rpdj4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6ImZsZXgiLGFsaWduSXRlbXM6ImJhc2VsaW5lIixnYXA6MTAsZmxleFdyYXA6IndyYXAifX0+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZTozNCxmb250V2VpZ2h0OjcwMCxjb2xvcjoiIzExMSIsbGV0dGVyU3BhY2luZzoiLTAuMDJlbSIsbGluZUhlaWdodDoxfX0+e3Jlc3VsdC52YWx9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7Zm9udFNpemU6MTMsY29sb3I6IiM4ODgifX0+e3Jlc3VsdC51bml0fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIHtyZXN1bHQuc2VjICYmIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMSxjb2xvcjoiI2FhYSIsbWFyZ2luVG9wOjYsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UifX0+e3Jlc3VsdC5zZWN9PC9kaXY+fQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAge2ludGVycCAmJiAoCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Ym9yZGVyTGVmdDpgNHB4IHNvbGlkICR7aW50ZXJwLmN9YCxiYWNrZ3JvdW5kOiIjZmZmIixib3JkZXI6YDFweCBzb2xpZCAke2ludGVycC5jfTIyYCxib3JkZXJMZWZ0Q29sb3I6aW50ZXJwLmMsYm9yZGVyTGVmdFdpZHRoOjQsYm9yZGVyUmFkaXVzOiIwIDZweCA2cHggMCIscGFkZGluZzoiMTRweCAxOHB4IixtYXJnaW5Cb3R0b206MjJ9fT4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjksY29sb3I6IiNhYWEiLGxldHRlclNwYWNpbmc6IjAuMTJlbSIsdGV4dFRyYW5zZm9ybToidXBwZXJjYXNlIixtYXJnaW5Cb3R0b206Nn19PkNsaW5pY2FsIEludGVycHJldGF0aW9uPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMyxjb2xvcjoiIzMzMyIsbGluZUhlaWdodDoxLjh9fT57aW50ZXJwLnR9PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTAuNSxjb2xvcjoiI2JiYiIsYm9yZGVyVG9wOiIxcHggc29saWQgI2YwZjJmNSIscGFkZGluZ1RvcDoxNCxsaW5lSGVpZ2h0OjEuOH19PgogICAgICAgICAgICAgICAgPHN0cm9uZyBzdHlsZT17e2NvbG9yOiIjY2NjIn19PkRpc2NsYWltZXI6PC9zdHJvbmc+IFRoaXMgdG9vbCBzdXBwb3J0cyBjbGluaWNhbCBkZWNpc2lvbi1tYWtpbmcgYWxvbmdzaWRlLCBub3QgaW4gcGxhY2Ugb2YsIGEgdGhvcm91Z2ggY2xpbmljYWwgYXNzZXNzbWVudC4gQWxsIG91dHB1dHMgc2hvdWxkIGJlIGludGVycHJldGVkIGluIGNvbnRleHQgYW5kIGluIGFjY29yZGFuY2Ugd2l0aCBjdXJyZW50IGFwcGxpY2FibGUgaW50ZXJuYXRpb25hbCBhbmQgbmF0aW9uYWwgZ3VpZGVsaW5lcyBhbmQgeW91ciBpbnN0aXR1dGlvbidzIHByb3RvY29scy4gU291cmNlOiB7Y2FsYy5yZWZ9LiA8c3Ryb25nPsKpIDIwMjYgRHIuIEFzaGlzaCBQYXRlbC4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L3N0cm9uZz4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICApfQogICAgICAgIDwvbWFpbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9CgoKY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJvb3QiKSk7CnJvb3QucmVuZGVyKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQXBwKSk7Cg==</script>
</body>
</html>